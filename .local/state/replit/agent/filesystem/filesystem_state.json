{"file_contents":{"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"design_guidelines.md":{"content":"# TutorDashboard Design Guidelines\n\n## Design Approach: Productivity-Focused Dashboard\n\n**Selected System**: Material Design-inspired with modern dashboard aesthetics  \n**Justification**: This is a utility-focused video management tool requiring clear information hierarchy, efficient workflows, and intuitive data visualization. Drawing inspiration from platforms like **Notion**, **Linear**, and **YouTube Studio** for their clean, functional dashboard interfaces.\n\n---\n\n## Core Design Elements\n\n### A. Typography\n\n**Font Family**: Inter or DM Sans (via Google Fonts CDN)\n\n**Hierarchy**:\n- Page Title: text-2xl md:text-3xl font-bold\n- Section Headers: text-xl font-semibold\n- Card Titles: text-lg font-medium\n- Body Text: text-base font-normal\n- Labels/Metadata: text-sm font-medium text-gray-600\n- Helper Text: text-xs text-gray-500\n\n### B. Layout System\n\n**Spacing Primitives**: Tailwind units of 2, 4, 6, and 8 (e.g., p-4, gap-6, mb-8)\n\n**Container Structure**:\n- Main container: max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\n- Page padding: py-8\n- Section spacing: mb-8\n- Component gaps: gap-6 for grids, gap-4 for forms\n\n**Responsive Grid**:\n- Desktop (lg): Two-column layout (form: 1/3 width, video grid: 2/3 width)\n- Tablet (md): Stacked layout with full-width form above grid\n- Mobile: Single column, full-width everything\n\n**Video Grid**:\n- Desktop: grid-cols-1 lg:grid-cols-2 xl:grid-cols-3\n- Tablet: grid-cols-2\n- Mobile: grid-cols-1\n- Gap: gap-6\n\n---\n\n## Component Library\n\n### Dashboard Header\n- Full-width header with page title \"Video Management Dashboard\"\n- Subtitle/description: \"Manage your educational video content\"\n- Optional stat counters: \"Total Videos: X\" displayed as small badges\n\n### Add Video Form Card\n**Structure**:\n- White background with subtle shadow (shadow-md)\n- Rounded corners: rounded-lg\n- Padding: p-6\n- Sticky positioning on desktop: sticky top-8\n\n**Form Elements**:\n- Input fields with labels above\n- Input styling: w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\n- Label styling: block mb-2 text-sm font-medium text-gray-700\n- Textarea for description: rows={4}\n- Select dropdown for category with icon indicator\n- Submit button: Full-width, primary style (see Buttons section)\n\n**Field Arrangement**:\n- Title (text input)\n- Description (textarea)\n- Video URL (text input with helper text: \"Enter YouTube or Vimeo URL\")\n- Category (select dropdown with options: Tutorial, Lecture, Demo, Review)\n\n### Video Cards\n**Card Structure**:\n- Background: white with shadow-lg hover:shadow-xl transition\n- Border radius: rounded-xl\n- Padding: p-0 (image fills top)\n- Aspect ratio container for video preview: aspect-video\n\n**Card Content Layout**:\n1. **Video Preview Section**: \n   - iframe embedded at top with rounded-t-xl\n   - Fallback thumbnail if URL invalid\n   - Overlay play icon when hovering\n\n2. **Content Section** (p-5):\n   - Video title (font-semibold, text-lg, mb-2)\n   - Category badge (inline-flex px-3 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800)\n   - Description text (text-sm text-gray-600, line-clamp-3)\n\n3. **Action Footer** (p-4 pt-0):\n   - Delete button (see Buttons section)\n   - View count or duration metadata (optional)\n\n### Buttons\n\n**Primary Button (Add Video)**:\n- bg-blue-600 hover:bg-blue-700 active:bg-blue-800\n- text-white font-medium\n- px-6 py-3 rounded-lg\n- shadow-sm hover:shadow-md transition-all\n- Disabled state: opacity-50 cursor-not-allowed\n\n**Danger Button (Delete)**:\n- bg-red-50 hover:bg-red-100 text-red-600 hover:text-red-700\n- border border-red-200\n- px-4 py-2 rounded-lg\n- text-sm font-medium\n- Icon: Trash icon from Heroicons (via CDN)\n\n**Button Icons**: Use Heroicons v2 Outline\n- Add: PlusIcon\n- Delete: TrashIcon\n\n### Empty State\nWhen no videos exist:\n- Centered content with illustration placeholder\n- Icon: VideoCameraIcon from Heroicons (large, 64px)\n- Heading: \"No videos yet\"\n- Description: \"Add your first educational video using the form\"\n- Subtle background: bg-gray-50 rounded-lg p-12\n\n### Loading States\n- Skeleton cards matching video card dimensions\n- Pulsing animation: animate-pulse bg-gray-200\n- Form disabled with opacity-60 during submission\n\n---\n\n## Visual Treatments\n\n### Shadows & Depth\n- Cards: shadow-md\n- Hovered cards: shadow-lg\n- Form container: shadow-lg\n- Buttons: shadow-sm hover:shadow\n\n### Borders & Dividers\n- Input borders: border-gray-300\n- Focus rings: ring-2 ring-blue-500\n- Card separators: border-t border-gray-100 (if needed)\n\n### Interactive States\n- Hover transitions: transition-all duration-200\n- Focus states: Always include focus:ring for accessibility\n- Active button states: transform active:scale-98\n\n---\n\n## Responsive Behavior\n\n**Desktop (lg: 1024px+)**:\n- Side-by-side layout: Form fixed on left (360px wide), grid takes remaining space\n- Sticky form behavior\n- 3-column video grid\n\n**Tablet (md: 768px)**:\n- Stacked layout: Form full-width at top\n- 2-column video grid\n- Reduced padding\n\n**Mobile (base to md)**:\n- Single column everything\n- Full-width form and cards\n- Larger touch targets for buttons (min-height: 44px)\n\n---\n\n## Accessibility\n\n- All form inputs have associated labels with htmlFor\n- Error states shown with text-red-600 and border-red-500\n- Focus indicators on all interactive elements (ring-2)\n- ARIA labels on icon-only buttons\n- Semantic HTML: form, section, button elements\n\n---\n\n## Animations\n\n**Use Sparingly**:\n- Card hover elevation change\n- Button press animation (scale)\n- Form submission success: Brief checkmark animation\n- Delete confirmation: Fade out removed card\n\n**No Animations For**:\n- Page load\n- Scroll effects\n- Background animations\n\n---\n\n## Images\n\n**No hero image required** - This is a dashboard application focused on utility.\n\n**Video Thumbnails**:\n- Generated from iframe embeds or URL previews\n- Fallback: Gray placeholder with video icon\n- Maintain 16:9 aspect ratio","size_bytes":5927},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst app = express();\n\napp.use('/uploads', express.static(path.join(__dirname, '../public/uploads')));\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"â€¦\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2449},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0deg 6.15% 25.49%;\n\n  --foreground: 0deg 7.14% 94.51%;\n\n  --border: 0 0% 16.86%;\n\n  --card: 300 4.35% 6.67%;\n\n  --card-foreground: 0 0% 100%;\n\n  --card-border: 214 8% 92%;\n\n  --sidebar: 45 25% 97%;\n\n  --sidebar-foreground: 20 14% 17%;\n\n  --sidebar-border: 45 15% 80%;\n\n  --sidebar-primary: 9 75% 61%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 25 45% 80%;\n\n  --sidebar-accent-foreground: 20 14% 17%;\n\n  --sidebar-ring: 9 75% 61%;\n\n  --popover: 45 25% 97%;\n\n  --popover-foreground: 0 0% 100%;\n\n  --popover-border: 214 12% 88%;\n\n  --primary: 0deg 23.08% 97.45%;\n\n  --primary-foreground: 0 0% 5.1%;\n\n  --secondary: 0 0% 92.16%;\n\n  --secondary-foreground: 0 0% 5.1%;\n\n  --muted: 0deg 36.13% 37.45%;\n\n  --muted-foreground: 0deg 0% 100%;\n\n  --accent: 0 0% 92.16%;\n\n  --accent-foreground: 0 0% 0%;\n\n  --destructive: 356.3033 90.5579% 54.3137%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 0 0% 16.86%;\n  --ring: 221.74 13.14% 34.31%;\n  --chart-1: 203.8863 88.2845% 53.1373%;\n  --chart-2: 159.7826 100% 36.0784%;\n  --chart-3: 42.0290 92.8251% 56.2745%;\n  --chart-4: 147.1429 78.5047% 41.9608%;\n  --chart-5: 341.4894 75.2000% 50.9804%;\n\n  --font-sans: 'Inter', sans-serif;\n  --font-serif: 'Inter', sans-serif;\n  --font-mono: Menlo, monospace;\n  --radius: 0.4rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00);\n  --shadow-xs: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00);\n  --shadow-sm: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 1px 2px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 1px 2px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-md: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 2px 4px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-lg: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 4px 6px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-xl: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00), 0px 8px 10px -1px hsl(9, 75%, 61% / 0.00);\n  --shadow-2xl: 0px 2px 0px 0px hsl(9, 75%, 61% / 0.00);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 20 14% 4%;\n\n  --foreground: 45 25% 91%;\n\n  --border: 20 14% 15%;\n\n  --card: 20 14% 8%;\n\n  --card-foreground: 45 25% 85%;\n\n  --card-border: 217 10% 14%;\n\n  --sidebar: 20 14% 8%;\n\n  --sidebar-foreground: 45 25% 85%;\n\n  --sidebar-border: 20 14% 15%;\n\n  --sidebar-primary: 9 75% 61%;\n\n  --sidebar-primary-foreground: 0 0% 100%;\n\n  --sidebar-accent: 25 45% 20%;\n\n  --sidebar-accent-foreground: 45 25% 85%;\n\n  --sidebar-ring: 9 75% 61%;\n\n  --popover: 20 14% 4%;\n\n  --popover-foreground: 45 25% 91%;\n\n  --popover-border: 217 12% 18%;\n\n  --primary: 9 75% 61%;\n\n  --primary-foreground: 0 0% 100%;\n\n  --secondary: 30 15% 52%;\n\n  --secondary-foreground: 0 0% 100%;\n\n  --muted: 20 14% 15%;\n\n  --muted-foreground: 45 15% 46%;\n\n  --accent: 25 45% 20%;\n\n  --accent-foreground: 45 25% 85%;\n\n  --destructive: 356.3033 90.5579% 54.3137%;\n\n  --destructive-foreground: 0 0% 100%;\n\n  --input: 20 14% 18%;\n  --ring: 9 75% 61%;\n  --chart-1: 203.8863 88.2845% 53.1373%;\n  --chart-2: 159.7826 100% 36.0784%;\n  --chart-3: 42.0290 92.8251% 56.2745%;\n  --chart-4: 147.1429 78.5047% 41.9608%;\n  --chart-5: 341.4894 75.2000% 50.9804%;\n\n  --shadow-2xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.20);\n  --shadow-xs: 0px 1px 2px 0px hsl(0 0% 0% / 0.25);\n  --shadow-sm: 0px 1px 2px 0px hsl(0 0% 0% / 0.25), 0px 1px 3px 0px hsl(0 0% 0% / 0.30);\n  --shadow: 0px 1px 3px 0px hsl(0 0% 0% / 0.30), 0px 1px 2px -1px hsl(0 0% 0% / 0.30);\n  --shadow-md: 0px 4px 6px -1px hsl(0 0% 0% / 0.30), 0px 2px 4px -2px hsl(0 0% 0% / 0.30);\n  --shadow-lg: 0px 10px 15px -3px hsl(0 0% 0% / 0.35), 0px 4px 6px -4px hsl(0 0% 0% / 0.35);\n  --shadow-xl: 0px 20px 25px -5px hsl(0 0% 0% / 0.40), 0px 8px 10px -6px hsl(0 0% 0% / 0.40);\n  --shadow-2xl: 0px 25px 50px -12px hsl(0 0% 0% / 0.50);\n\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":10480},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"server/routes.ts":{"content":"import type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { insertVideoSchema, insertCommentSchema, insertQuestionSchema, answerQuestionSchema, insertPlaylistSchema, insertSubscriptionSchema, insertWatchProgressSchema, signupSchema, loginSchema, updateUserRoleSchema } from \"@shared/schema\";\nimport { z } from \"zod\";\nimport multer from \"multer\";\nimport path from \"path\";\nimport { fileURLToPath } from \"url\";\nimport fs from \"fs\";\nimport { fileTypeFromFile } from \"file-type\";\nimport bcrypt from \"bcryptjs\";\nimport { generateTokens, verifyRefreshToken, generateAccessToken } from \"./auth/jwt\";\nimport { authenticate, requireRole, optionalAuth } from \"./auth/middleware\";\n\nconst __filename = fileURLToPath(import.meta.url);\nconst __dirname = path.dirname(__filename);\n\nconst uploadsDir = path.join(__dirname, \"../public/uploads\");\nif (!fs.existsSync(uploadsDir)) {\n  fs.mkdirSync(uploadsDir, { recursive: true });\n}\n\nconst upload = multer({\n  storage: multer.diskStorage({\n    destination: (req, file, cb) => {\n      cb(null, uploadsDir);\n    },\n    filename: (req, file, cb) => {\n      const uniqueSuffix = Date.now() + '-' + Math.round(Math.random() * 1E9);\n      const sanitizedExt = path.extname(file.originalname).toLowerCase().replace(/[^a-z0-9.]/g, '');\n      const allowedExtensions = ['.mp4', '.webm', '.ogg', '.mov'];\n      const ext = allowedExtensions.includes(sanitizedExt) ? sanitizedExt : '.mp4';\n      cb(null, `video-${uniqueSuffix}${ext}`);\n    }\n  }),\n  fileFilter: (req, file, cb) => {\n    const allowedMimes = ['video/mp4', 'video/webm', 'video/ogg', 'video/quicktime'];\n    const ext = path.extname(file.originalname).toLowerCase();\n    const allowedExtensions = ['.mp4', '.webm', '.ogg', '.mov'];\n    \n    if (allowedMimes.includes(file.mimetype) && allowedExtensions.includes(ext)) {\n      cb(null, true);\n    } else {\n      cb(new Error('Invalid file type. Only video files (MP4, WebM, OGG, MOV) are allowed.'));\n    }\n  },\n  limits: {\n    fileSize: 100 * 1024 * 1024\n  }\n});\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  app.post(\"/api/auth/signup\", async (req, res) => {\n    try {\n      const validatedData = signupSchema.parse(req.body);\n      \n      const existingUser = await storage.getUserByEmail(validatedData.email);\n      if (existingUser) {\n        return res.status(409).json({\n          error: \"Email already registered\",\n          message: \"An account with this email already exists\",\n        });\n      }\n\n      const role = await storage.getRoleByName(\"student\");\n      if (!role) {\n        return res.status(500).json({\n          error: \"Server error\",\n          message: \"Student role not found in database\",\n        });\n      }\n\n      const user = await storage.createUser({\n        name: validatedData.name,\n        email: validatedData.email,\n        password: validatedData.password,\n        roleId: role.id,\n        status: \"active\",\n      });\n\n      const tokens = generateTokens(user, role);\n\n      res.status(201).json({\n        message: \"User registered successfully\",\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          role: role.name,\n          status: user.status,\n        },\n        ...tokens,\n      });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          error: \"Invalid input\",\n          details: error.errors,\n        });\n      }\n      console.error(\"Signup error:\", error);\n      res.status(500).json({ error: \"Failed to register user\" });\n    }\n  });\n\n  app.post(\"/api/auth/login\", async (req, res) => {\n    try {\n      const validatedData = loginSchema.parse(req.body);\n      \n      const user = await storage.getUserByEmail(validatedData.email);\n      if (!user) {\n        return res.status(401).json({\n          error: \"Invalid credentials\",\n          message: \"Email or password is incorrect\",\n        });\n      }\n\n      if (user.status !== \"active\") {\n        return res.status(403).json({\n          error: \"Account inactive\",\n          message: \"Your account has been suspended or deactivated\",\n        });\n      }\n\n      const isPasswordValid = await bcrypt.compare(validatedData.password, user.passwordHash);\n      if (!isPasswordValid) {\n        return res.status(401).json({\n          error: \"Invalid credentials\",\n          message: \"Email or password is incorrect\",\n        });\n      }\n\n      const role = await storage.getRole(user.roleId);\n      if (!role) {\n        return res.status(500).json({\n          error: \"Server error\",\n          message: \"User role not found\",\n        });\n      }\n\n      const tokens = generateTokens(user, role);\n\n      res.json({\n        message: \"Login successful\",\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          role: role.name,\n          status: user.status,\n        },\n        ...tokens,\n      });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          error: \"Invalid input\",\n          details: error.errors,\n        });\n      }\n      console.error(\"Login error:\", error);\n      res.status(500).json({ error: \"Failed to login\" });\n    }\n  });\n\n  app.post(\"/api/auth/refresh\", async (req, res) => {\n    try {\n      const { refreshToken } = req.body;\n      \n      if (!refreshToken) {\n        return res.status(400).json({\n          error: \"Missing refresh token\",\n          message: \"Refresh token is required\",\n        });\n      }\n\n      const payload = verifyRefreshToken(refreshToken);\n      if (!payload) {\n        return res.status(401).json({\n          error: \"Invalid token\",\n          message: \"Refresh token is invalid or expired\",\n        });\n      }\n\n      const user = await storage.getUser(payload.userId);\n      if (!user || user.status !== \"active\") {\n        return res.status(401).json({\n          error: \"Invalid user\",\n          message: \"User not found or inactive\",\n        });\n      }\n\n      const role = await storage.getRole(user.roleId);\n      if (!role) {\n        return res.status(500).json({\n          error: \"Server error\",\n          message: \"User role not found\",\n        });\n      }\n\n      const accessToken = generateAccessToken(user, role);\n\n      res.json({\n        accessToken,\n        message: \"Token refreshed successfully\",\n      });\n    } catch (error) {\n      console.error(\"Token refresh error:\", error);\n      res.status(500).json({ error: \"Failed to refresh token\" });\n    }\n  });\n\n  app.post(\"/api/auth/logout\", authenticate, async (req, res) => {\n    res.json({ message: \"Logged out successfully\" });\n  });\n\n  app.get(\"/api/users/profile\", authenticate, async (req, res) => {\n    try {\n      const user = await storage.getUser(req.user!.userId);\n      if (!user) {\n        return res.status(404).json({\n          error: \"User not found\",\n          message: \"The requested user does not exist\",\n        });\n      }\n\n      const role = await storage.getRole(user.roleId);\n      \n      res.json({\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        role: role?.name,\n        status: user.status,\n        createdAt: user.createdAt,\n      });\n    } catch (error) {\n      console.error(\"Get profile error:\", error);\n      res.status(500).json({ error: \"Failed to fetch profile\" });\n    }\n  });\n\n  app.get(\"/api/users\", authenticate, requireRole(\"superadmin\", \"admin\"), async (req, res) => {\n    try {\n      const users = await storage.getAllUsers();\n      const roles = await storage.getAllRoles();\n      \n      const roleMap = Object.fromEntries(roles.map(r => [r.id, r.name]));\n      \n      const usersWithRoles = users.map(user => ({\n        id: user.id,\n        name: user.name,\n        email: user.email,\n        role: roleMap[user.roleId],\n        status: user.status,\n        createdAt: user.createdAt,\n      }));\n\n      res.json(usersWithRoles);\n    } catch (error) {\n      console.error(\"Get users error:\", error);\n      res.status(500).json({ error: \"Failed to fetch users\" });\n    }\n  });\n\n  app.put(\"/api/users/:id/role\", authenticate, requireRole(\"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = updateUserRoleSchema.parse(req.body);\n      \n      const role = await storage.getRoleByName(validatedData.roleName);\n      if (!role) {\n        return res.status(400).json({\n          error: \"Invalid role\",\n          message: \"The specified role does not exist\",\n        });\n      }\n      \n      const user = await storage.updateUserRole(id, role.id);\n      if (!user) {\n        return res.status(404).json({\n          error: \"User not found\",\n          message: \"The requested user does not exist\",\n        });\n      }\n      \n      res.json({\n        message: \"User role updated successfully\",\n        user: {\n          id: user.id,\n          name: user.name,\n          email: user.email,\n          role: role?.name,\n          status: user.status,\n        },\n      });\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        return res.status(400).json({\n          error: \"Invalid input\",\n          details: error.errors,\n        });\n      }\n      console.error(\"Update role error:\", error);\n      res.status(500).json({ error: \"Failed to update user role\" });\n    }\n  });\n\n  app.delete(\"/api/users/:id\", authenticate, requireRole(\"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      \n      if (id === req.user!.userId) {\n        return res.status(400).json({\n          error: \"Cannot delete own account\",\n          message: \"You cannot delete your own account\",\n        });\n      }\n\n      const deleted = await storage.deleteUser(id);\n      if (!deleted) {\n        return res.status(404).json({\n          error: \"User not found\",\n          message: \"The requested user does not exist\",\n        });\n      }\n\n      res.json({ message: \"User deleted successfully\" });\n    } catch (error) {\n      console.error(\"Delete user error:\", error);\n      res.status(500).json({ error: \"Failed to delete user\" });\n    }\n  });\n\n  app.get(\"/api/videos\", async (req, res) => {\n    try {\n      const videos = await storage.getAllVideos();\n      res.json(videos);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch videos\" });\n    }\n  });\n\n  app.post(\"/api/videos\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const validatedData = insertVideoSchema.parse(req.body);\n      const video = await storage.createVideo(validatedData);\n      res.status(201).json(video);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid video data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create video\" });\n      }\n    }\n  });\n\n  app.post(\"/api/videos/upload\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), upload.single('video'), async (req, res) => {\n    try {\n      if (!req.file) {\n        res.status(400).json({ error: \"No video file provided\" });\n        return;\n      }\n\n      const fileType = await fileTypeFromFile(req.file.path);\n      const allowedTypes = ['video/mp4', 'video/webm', 'video/ogg', 'video/quicktime'];\n      \n      if (!fileType || !allowedTypes.includes(fileType.mime)) {\n        try {\n          fs.unlinkSync(req.file.path);\n        } catch (unlinkError) {\n          console.error(\"Failed to delete uploaded file:\", unlinkError);\n        }\n        res.status(400).json({ \n          error: \"Invalid file signature. File must be a valid video file (MP4, WebM, OGG, or QuickTime).\" \n        });\n        return;\n      }\n\n      const { title, description, category, playlistId } = req.body;\n\n      if (!title || !description || !category) {\n        try {\n          fs.unlinkSync(req.file.path);\n        } catch (unlinkError) {\n          console.error(\"Failed to delete uploaded file:\", unlinkError);\n        }\n        res.status(400).json({ error: \"Missing required fields: title, description, or category\" });\n        return;\n      }\n\n      const videoUrl = `/uploads/${req.file.filename}`;\n\n      const validatedData = insertVideoSchema.parse({\n        title,\n        description,\n        videoUrl,\n        category,\n        playlistId: playlistId || null,\n      });\n\n      const video = await storage.createVideo(validatedData);\n      res.status(201).json(video);\n    } catch (error) {\n      if (req.file) {\n        try {\n          fs.unlinkSync(req.file.path);\n        } catch (unlinkError) {\n          console.error(\"Failed to delete uploaded file:\", unlinkError);\n        }\n      }\n      \n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid video data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to upload video\" });\n      }\n    }\n  });\n\n  app.patch(\"/api/videos/:id\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertVideoSchema.partial().parse(req.body);\n      const video = await storage.updateVideo(id, validatedData);\n      \n      if (!video) {\n        res.status(404).json({ error: \"Video not found\" });\n        return;\n      }\n      \n      res.status(200).json(video);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid video data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to update video\" });\n      }\n    }\n  });\n\n  app.delete(\"/api/videos/:id\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deleteVideo(id);\n      \n      if (!deleted) {\n        res.status(404).json({ error: \"Video not found\" });\n        return;\n      }\n      \n      res.status(200).json({ message: \"Video deleted successfully\" });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete video\" });\n    }\n  });\n\n  app.post(\"/api/videos/:id/like\", authenticate, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const video = await storage.likeVideo(id);\n      \n      if (!video) {\n        res.status(404).json({ error: \"Video not found\" });\n        return;\n      }\n      \n      res.status(200).json(video);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to like video\" });\n    }\n  });\n\n  app.get(\"/api/videos/:id/comments\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const comments = await storage.getCommentsByVideoId(id);\n      res.json(comments);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch comments\" });\n    }\n  });\n\n  app.post(\"/api/videos/:id/comments\", authenticate, async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = insertCommentSchema.parse({\n        ...req.body,\n        videoId: id,\n      });\n      const comment = await storage.createComment(validatedData);\n      res.status(201).json(comment);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid comment data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create comment\" });\n      }\n    }\n  });\n\n  app.get(\"/api/playlists\", async (req, res) => {\n    try {\n      const playlists = await storage.getAllPlaylists();\n      const playlistsWithVideos = await Promise.all(\n        playlists.map(async (playlist) => {\n          const videos = await storage.getVideosByPlaylistId(playlist.id);\n          return { ...playlist, videos };\n        })\n      );\n      res.json(playlistsWithVideos);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch playlists\" });\n    }\n  });\n\n  app.post(\"/api/playlists\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const validatedData = insertPlaylistSchema.parse(req.body);\n      const playlist = await storage.createPlaylist(validatedData);\n      res.status(201).json(playlist);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid playlist data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create playlist\" });\n      }\n    }\n  });\n\n  app.delete(\"/api/playlists/:id\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      const deleted = await storage.deletePlaylist(id);\n      \n      if (!deleted) {\n        res.status(404).json({ error: \"Playlist not found\" });\n        return;\n      }\n      \n      res.status(200).json({ message: \"Playlist deleted successfully\" });\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to delete playlist\" });\n    }\n  });\n\n  app.get(\"/api/questions\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const questions = await storage.getAllQuestions();\n      res.json(questions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch questions\" });\n    }\n  });\n\n  app.get(\"/api/questions/student/:email\", authenticate, async (req, res) => {\n    try {\n      const { email } = req.params;\n      \n      if (req.user!.email !== email && ![\"admin\", \"superadmin\"].includes(req.user!.roleName)) {\n        return res.status(403).json({\n          error: \"Forbidden\",\n          message: \"You can only view your own questions\",\n        });\n      }\n      \n      const questions = await storage.getQuestionsByStudentEmail(email);\n      res.json(questions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch student questions\" });\n    }\n  });\n\n  app.post(\"/api/questions\", authenticate, async (req, res) => {\n    try {\n      const validatedData = insertQuestionSchema.parse(req.body);\n      const question = await storage.createQuestion(validatedData);\n      res.status(201).json(question);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid question data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create question\" });\n      }\n    }\n  });\n\n  app.get(\"/api/videos/:id/questions\", async (req, res) => {\n    try {\n      const { id } = req.params;\n      const questions = await storage.getQuestionsByVideoId(id);\n      res.json(questions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch questions\" });\n    }\n  });\n\n  app.post(\"/api/questions/:id/answer\", authenticate, requireRole(\"tutor\", \"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      const validatedData = answerQuestionSchema.parse(req.body);\n      const question = await storage.answerQuestion(id, validatedData.answer);\n      \n      if (!question) {\n        res.status(404).json({ error: \"Question not found\" });\n        return;\n      }\n      \n      res.status(200).json(question);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid answer data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to answer question\" });\n      }\n    }\n  });\n\n  app.get(\"/api/subscriptions\", authenticate, requireRole(\"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const subscriptions = await storage.getAllSubscriptions();\n      res.json(subscriptions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch subscriptions\" });\n    }\n  });\n\n  app.get(\"/api/subscriptions/student/:email\", authenticate, async (req, res) => {\n    try {\n      const { email } = req.params;\n      \n      if (req.user!.email !== email && ![\"admin\", \"superadmin\"].includes(req.user!.roleName)) {\n        return res.status(403).json({\n          error: \"Forbidden\",\n          message: \"You can only view your own subscriptions\",\n        });\n      }\n      \n      const subscriptions = await storage.getSubscriptionsByEmail(email);\n      res.json(subscriptions);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch subscriptions\" });\n    }\n  });\n\n  app.post(\"/api/subscriptions\", authenticate, async (req, res) => {\n    try {\n      const validatedData = insertSubscriptionSchema.parse(req.body);\n      \n      if (req.user!.email !== validatedData.studentEmail && ![\"admin\", \"superadmin\"].includes(req.user!.roleName)) {\n        return res.status(403).json({\n          error: \"Forbidden\",\n          message: \"You can only create subscriptions for yourself\",\n        });\n      }\n      \n      const subscription = await storage.createSubscription(validatedData);\n      res.status(201).json(subscription);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid subscription data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to create subscription\" });\n      }\n    }\n  });\n\n  app.patch(\"/api/subscriptions/:id\", authenticate, requireRole(\"admin\", \"superadmin\"), async (req, res) => {\n    try {\n      const { id } = req.params;\n      const subscription = await storage.updateSubscription(id, req.body);\n      \n      if (!subscription) {\n        res.status(404).json({ error: \"Subscription not found\" });\n        return;\n      }\n      \n      res.status(200).json(subscription);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to update subscription\" });\n    }\n  });\n\n  app.get(\"/api/watch-progress/student/:email\", authenticate, async (req, res) => {\n    try {\n      const { email } = req.params;\n      \n      if (req.user!.email !== email && ![\"admin\", \"superadmin\"].includes(req.user!.roleName)) {\n        return res.status(403).json({\n          error: \"Forbidden\",\n          message: \"You can only view your own watch progress\",\n        });\n      }\n      \n      const progress = await storage.getWatchProgressByEmail(email);\n      res.json(progress);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch watch progress\" });\n    }\n  });\n\n  app.get(\"/api/watch-progress/student/:email/playlist/:playlistId\", authenticate, async (req, res) => {\n    try {\n      const { email, playlistId } = req.params;\n      \n      if (req.user!.email !== email && ![\"admin\", \"superadmin\"].includes(req.user!.roleName)) {\n        return res.status(403).json({\n          error: \"Forbidden\",\n          message: \"You can only view your own watch progress\",\n        });\n      }\n      \n      const progress = await storage.getWatchProgressByPlaylist(email, playlistId);\n      res.json(progress);\n    } catch (error) {\n      res.status(500).json({ error: \"Failed to fetch playlist progress\" });\n    }\n  });\n\n  app.post(\"/api/watch-progress\", authenticate, async (req, res) => {\n    try {\n      const validatedData = insertWatchProgressSchema.parse(req.body);\n      \n      if (req.user!.email !== validatedData.studentEmail && ![\"admin\", \"superadmin\"].includes(req.user!.roleName)) {\n        return res.status(403).json({\n          error: \"Forbidden\",\n          message: \"You can only update your own watch progress\",\n        });\n      }\n      \n      const progress = await storage.upsertWatchProgress(validatedData);\n      res.status(200).json(progress);\n    } catch (error) {\n      if (error instanceof z.ZodError) {\n        res.status(400).json({ error: \"Invalid progress data\", details: error.errors });\n      } else {\n        res.status(500).json({ error: \"Failed to save watch progress\" });\n      }\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":23770},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"server/storage.ts":{"content":"import { type User, type InsertUser, type Video, type InsertVideo, type Comment, type InsertComment, type Question, type InsertQuestion, type Playlist, type InsertPlaylist, type Subscription, type InsertSubscription, type WatchProgress, type InsertWatchProgress, type Role, type InsertRole, type Permission, type InsertPermission, users, videos, comments, questions, playlists, subscriptions, watchProgress, roles, permissions } from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, sql, and } from \"drizzle-orm\";\nimport bcrypt from \"bcryptjs\";\n\nexport interface IStorage {\n  getRole(id: string): Promise<Role | undefined>;\n  getRoleByName(name: string): Promise<Role | undefined>;\n  getAllRoles(): Promise<Role[]>;\n  createRole(role: InsertRole): Promise<Role>;\n  \n  getPermissionsByRoleId(roleId: string): Promise<Permission[]>;\n  createPermission(permission: InsertPermission): Promise<Permission>;\n  \n  getUser(id: string): Promise<User | undefined>;\n  getUserByEmail(email: string): Promise<User | undefined>;\n  getAllUsers(): Promise<User[]>;\n  createUser(user: InsertUser): Promise<User>;\n  updateUserRole(id: string, roleId: string): Promise<User | undefined>;\n  deleteUser(id: string): Promise<boolean>;\n  \n  getAllPlaylists(): Promise<Playlist[]>;\n  getPlaylist(id: string): Promise<Playlist | undefined>;\n  createPlaylist(playlist: InsertPlaylist): Promise<Playlist>;\n  deletePlaylist(id: string): Promise<boolean>;\n  getVideosByPlaylistId(playlistId: string): Promise<Video[]>;\n  \n  getAllVideos(): Promise<Video[]>;\n  getVideo(id: string): Promise<Video | undefined>;\n  createVideo(video: InsertVideo): Promise<Video>;\n  updateVideo(id: string, video: Partial<InsertVideo>): Promise<Video | undefined>;\n  deleteVideo(id: string): Promise<boolean>;\n  likeVideo(videoId: string): Promise<Video | undefined>;\n  \n  getCommentsByVideoId(videoId: string): Promise<Comment[]>;\n  createComment(comment: InsertComment): Promise<Comment>;\n  \n  getAllQuestions(): Promise<Question[]>;\n  getQuestionsByVideoId(videoId: string): Promise<Question[]>;\n  getQuestionsByStudentEmail(email: string): Promise<Question[]>;\n  createQuestion(question: InsertQuestion): Promise<Question>;\n  answerQuestion(id: string, answer: string): Promise<Question | undefined>;\n  \n  getAllSubscriptions(): Promise<Subscription[]>;\n  getSubscriptionsByEmail(email: string): Promise<Subscription[]>;\n  getSubscription(id: string): Promise<Subscription | undefined>;\n  createSubscription(subscription: InsertSubscription): Promise<Subscription>;\n  updateSubscription(id: string, updates: Partial<InsertSubscription>): Promise<Subscription | undefined>;\n  \n  getWatchProgressByEmail(email: string): Promise<WatchProgress[]>;\n  getWatchProgressByPlaylist(email: string, playlistId: string): Promise<WatchProgress[]>;\n  upsertWatchProgress(progress: InsertWatchProgress): Promise<WatchProgress>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  async getRole(id: string): Promise<Role | undefined> {\n    const [role] = await db.select().from(roles).where(eq(roles.id, id));\n    return role || undefined;\n  }\n\n  async getRoleByName(name: string): Promise<Role | undefined> {\n    const [role] = await db.select().from(roles).where(eq(roles.name, name));\n    return role || undefined;\n  }\n\n  async getAllRoles(): Promise<Role[]> {\n    return await db.select().from(roles);\n  }\n\n  async createRole(insertRole: InsertRole): Promise<Role> {\n    const [role] = await db\n      .insert(roles)\n      .values(insertRole)\n      .returning();\n    return role;\n  }\n\n  async getPermissionsByRoleId(roleId: string): Promise<Permission[]> {\n    return await db.select().from(permissions).where(eq(permissions.roleId, roleId));\n  }\n\n  async createPermission(insertPermission: InsertPermission): Promise<Permission> {\n    const [permission] = await db\n      .insert(permissions)\n      .values(insertPermission)\n      .returning();\n    return permission;\n  }\n\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user || undefined;\n  }\n\n  async getUserByEmail(email: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.email, email));\n    return user || undefined;\n  }\n\n  async getAllUsers(): Promise<User[]> {\n    return await db.select().from(users);\n  }\n\n  async createUser(insertUser: InsertUser): Promise<User> {\n    const passwordHash = await bcrypt.hash(insertUser.password, 10);\n    const [user] = await db\n      .insert(users)\n      .values({\n        name: insertUser.name,\n        email: insertUser.email,\n        passwordHash,\n        roleId: insertUser.roleId,\n        status: insertUser.status,\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserRole(id: string, roleId: string): Promise<User | undefined> {\n    const [user] = await db\n      .update(users)\n      .set({ roleId, updatedAt: sql`now()` })\n      .where(eq(users.id, id))\n      .returning();\n    return user || undefined;\n  }\n\n  async deleteUser(id: string): Promise<boolean> {\n    const result = await db.delete(users).where(eq(users.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getAllPlaylists(): Promise<Playlist[]> {\n    return await db.select().from(playlists);\n  }\n\n  async getPlaylist(id: string): Promise<Playlist | undefined> {\n    const [playlist] = await db.select().from(playlists).where(eq(playlists.id, id));\n    return playlist || undefined;\n  }\n\n  async createPlaylist(insertPlaylist: InsertPlaylist): Promise<Playlist> {\n    const [playlist] = await db\n      .insert(playlists)\n      .values(insertPlaylist)\n      .returning();\n    return playlist;\n  }\n\n  async deletePlaylist(id: string): Promise<boolean> {\n    const result = await db.delete(playlists).where(eq(playlists.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async getVideosByPlaylistId(playlistId: string): Promise<Video[]> {\n    return await db.select().from(videos).where(eq(videos.playlistId, playlistId));\n  }\n\n  async getAllVideos(): Promise<Video[]> {\n    return await db.select().from(videos);\n  }\n\n  async getVideo(id: string): Promise<Video | undefined> {\n    const [video] = await db.select().from(videos).where(eq(videos.id, id));\n    return video || undefined;\n  }\n\n  async createVideo(insertVideo: InsertVideo): Promise<Video> {\n    const [video] = await db\n      .insert(videos)\n      .values(insertVideo)\n      .returning();\n    return video;\n  }\n\n  async updateVideo(id: string, updateData: Partial<InsertVideo>): Promise<Video | undefined> {\n    const [video] = await db\n      .update(videos)\n      .set(updateData)\n      .where(eq(videos.id, id))\n      .returning();\n    return video || undefined;\n  }\n\n  async deleteVideo(id: string): Promise<boolean> {\n    const result = await db.delete(videos).where(eq(videos.id, id)).returning();\n    return result.length > 0;\n  }\n\n  async likeVideo(videoId: string): Promise<Video | undefined> {\n    const [video] = await db\n      .update(videos)\n      .set({ likes: sql`${videos.likes} + 1` })\n      .where(eq(videos.id, videoId))\n      .returning();\n    return video || undefined;\n  }\n\n  async getCommentsByVideoId(videoId: string): Promise<Comment[]> {\n    return await db.select().from(comments).where(eq(comments.videoId, videoId));\n  }\n\n  async createComment(insertComment: InsertComment): Promise<Comment> {\n    const [comment] = await db\n      .insert(comments)\n      .values(insertComment)\n      .returning();\n    return comment;\n  }\n\n  async getAllQuestions(): Promise<Question[]> {\n    return await db.select().from(questions);\n  }\n\n  async getQuestionsByVideoId(videoId: string): Promise<Question[]> {\n    return await db.select().from(questions).where(eq(questions.videoId, videoId));\n  }\n\n  async getQuestionsByStudentEmail(email: string): Promise<Question[]> {\n    return await db.select().from(questions).where(eq(questions.studentEmail, email));\n  }\n\n  async createQuestion(insertQuestion: InsertQuestion): Promise<Question> {\n    const [question] = await db\n      .insert(questions)\n      .values(insertQuestion)\n      .returning();\n    return question;\n  }\n\n  async answerQuestion(id: string, answer: string): Promise<Question | undefined> {\n    const [question] = await db\n      .update(questions)\n      .set({ answer, answeredAt: new Date() })\n      .where(eq(questions.id, id))\n      .returning();\n    return question || undefined;\n  }\n\n  async getAllSubscriptions(): Promise<Subscription[]> {\n    return await db.select().from(subscriptions);\n  }\n\n  async getSubscriptionsByEmail(email: string): Promise<Subscription[]> {\n    return await db.select().from(subscriptions).where(eq(subscriptions.studentEmail, email));\n  }\n\n  async getSubscription(id: string): Promise<Subscription | undefined> {\n    const [subscription] = await db.select().from(subscriptions).where(eq(subscriptions.id, id));\n    return subscription || undefined;\n  }\n\n  async createSubscription(insertSubscription: InsertSubscription): Promise<Subscription> {\n    const [subscription] = await db\n      .insert(subscriptions)\n      .values(insertSubscription)\n      .returning();\n    return subscription;\n  }\n\n  async updateSubscription(id: string, updates: Partial<InsertSubscription>): Promise<Subscription | undefined> {\n    const [subscription] = await db\n      .update(subscriptions)\n      .set(updates)\n      .where(eq(subscriptions.id, id))\n      .returning();\n    return subscription || undefined;\n  }\n\n  async getWatchProgressByEmail(email: string): Promise<WatchProgress[]> {\n    return await db.select().from(watchProgress).where(eq(watchProgress.studentEmail, email));\n  }\n\n  async getWatchProgressByPlaylist(email: string, playlistId: string): Promise<WatchProgress[]> {\n    return await db.select().from(watchProgress).where(\n      and(\n        eq(watchProgress.studentEmail, email),\n        eq(watchProgress.playlistId, playlistId)\n      )\n    );\n  }\n\n  async upsertWatchProgress(insertProgress: InsertWatchProgress): Promise<WatchProgress> {\n    const existing = await db.select().from(watchProgress).where(\n      and(\n        eq(watchProgress.studentEmail, insertProgress.studentEmail),\n        eq(watchProgress.videoId, insertProgress.videoId)\n      )\n    );\n\n    if (existing.length > 0) {\n      const [progress] = await db\n        .update(watchProgress)\n        .set({ ...insertProgress, lastWatched: new Date() })\n        .where(eq(watchProgress.id, existing[0].id))\n        .returning();\n      return progress;\n    } else {\n      const [progress] = await db\n        .insert(watchProgress)\n        .values(insertProgress)\n        .returning();\n      return progress;\n    }\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":10706},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4050},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"shared/schema.ts":{"content":"import { sql } from \"drizzle-orm\";\nimport { pgTable, text, varchar, integer, timestamp } from \"drizzle-orm/pg-core\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\nexport const roles = pgTable(\"roles\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  description: text(\"description\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertRoleSchema = createInsertSchema(roles).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  name: z.enum([\"superadmin\", \"admin\", \"tutor\", \"student\"]),\n  description: z.string().optional(),\n});\n\nexport type InsertRole = z.infer<typeof insertRoleSchema>;\nexport type Role = typeof roles.$inferSelect;\n\nexport const permissions = pgTable(\"permissions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  featureName: text(\"feature_name\").notNull(),\n  roleId: varchar(\"role_id\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertPermissionSchema = createInsertSchema(permissions).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  featureName: z.string().min(1, \"Feature name is required\"),\n  roleId: z.string().min(1, \"Role ID is required\"),\n});\n\nexport type InsertPermission = z.infer<typeof insertPermissionSchema>;\nexport type Permission = typeof permissions.$inferSelect;\n\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull(),\n  email: text(\"email\").notNull().unique(),\n  passwordHash: text(\"password_hash\").notNull(),\n  roleId: varchar(\"role_id\").notNull(),\n  status: text(\"status\").notNull().default(\"active\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n  updatedAt: timestamp(\"updated_at\").notNull().defaultNow(),\n});\n\nexport const insertUserSchema = createInsertSchema(users).omit({\n  id: true,\n  createdAt: true,\n  updatedAt: true,\n  passwordHash: true,\n}).extend({\n  name: z.string().min(1, \"Name is required\"),\n  email: z.string().email(\"Must be a valid email\"),\n  password: z.string().min(8, \"Password must be at least 8 characters\"),\n  roleId: z.string().min(1, \"Role is required\"),\n  status: z.enum([\"active\", \"inactive\", \"suspended\"]).default(\"active\"),\n});\n\nexport const signupSchema = z.object({\n  name: z.string().min(2, \"Name must be at least 2 characters\"),\n  email: z.string().email(\"Must be a valid email\"),\n  password: z.string().min(6, \"Password must be at least 6 characters\"),\n});\n\nexport const loginSchema = z.object({\n  email: z.string().email(\"Must be a valid email\"),\n  password: z.string().min(1, \"Password is required\"),\n});\n\nexport const updateUserRoleSchema = z.object({\n  roleName: z.enum([\"superadmin\", \"admin\", \"tutor\", \"student\"]),\n});\n\nexport type InsertUser = z.infer<typeof insertUserSchema>;\nexport type SignupData = z.infer<typeof signupSchema>;\nexport type User = typeof users.$inferSelect;\nexport type LoginCredentials = z.infer<typeof loginSchema>;\nexport type UpdateUserRole = z.infer<typeof updateUserRoleSchema>;\n\nexport const playlists = pgTable(\"playlists\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: text(\"name\").notNull().unique(),\n  description: text(\"description\"),\n  tutorName: text(\"tutor_name\").notNull().default(\"Unknown Tutor\"),\n  category: text(\"category\").notNull().default(\"General\"),\n  thumbnail: text(\"thumbnail\"),\n  isPublic: integer(\"is_public\").notNull().default(1),\n  videoCount: integer(\"video_count\").notNull().default(0),\n  viewCount: integer(\"view_count\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertPlaylistSchema = createInsertSchema(playlists).omit({\n  id: true,\n  createdAt: true,\n  videoCount: true,\n  viewCount: true,\n}).extend({\n  name: z.string().min(1, \"Playlist name is required\"),\n  description: z.string().optional(),\n  tutorName: z.string().default(\"Unknown Tutor\"),\n  category: z.string().default(\"General\"),\n  thumbnail: z.string().optional(),\n  isPublic: z.number().default(1),\n});\n\nexport type InsertPlaylist = z.infer<typeof insertPlaylistSchema>;\nexport type Playlist = typeof playlists.$inferSelect;\n\nexport const videos = pgTable(\"videos\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  title: text(\"title\").notNull(),\n  description: text(\"description\").notNull(),\n  videoUrl: text(\"video_url\").notNull(),\n  category: text(\"category\").notNull(),\n  duration: text(\"duration\").default(\"0:00\"),\n  likes: integer(\"likes\").notNull().default(0),\n  playlistId: varchar(\"playlist_id\"),\n});\n\nexport const insertVideoSchema = createInsertSchema(videos).omit({\n  id: true,\n  likes: true,\n}).extend({\n  title: z.string().min(1, \"Title is required\"),\n  description: z.string().min(1, \"Description is required\"),\n  videoUrl: z.string().url(\"Must be a valid URL\"),\n  category: z.string().min(1, \"Category is required\"),\n  duration: z.string().optional(),\n  playlistId: z.string().optional(),\n});\n\nexport type InsertVideo = z.infer<typeof insertVideoSchema>;\nexport type Video = typeof videos.$inferSelect;\n\nexport const comments = pgTable(\"comments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  videoId: varchar(\"video_id\").notNull(),\n  username: text(\"username\").notNull().default(\"Anonymous\"),\n  text: text(\"text\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertCommentSchema = createInsertSchema(comments).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  videoId: z.string(),\n  username: z.string().min(1, \"Username is required\"),\n  text: z.string().min(1, \"Comment text is required\"),\n});\n\nexport type InsertComment = z.infer<typeof insertCommentSchema>;\nexport type Comment = typeof comments.$inferSelect;\n\nexport const questions = pgTable(\"questions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  videoId: varchar(\"video_id\").notNull(),\n  studentEmail: text(\"student_email\").notNull(),\n  studentName: text(\"student_name\").notNull(),\n  text: text(\"text\").notNull(),\n  answer: text(\"answer\"),\n  answeredAt: timestamp(\"answered_at\"),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertQuestionSchema = createInsertSchema(questions).omit({\n  id: true,\n  createdAt: true,\n  answeredAt: true,\n  answer: true,\n}).extend({\n  videoId: z.string().min(1, \"Video is required\"),\n  studentEmail: z.string().email(\"Valid email required\"),\n  studentName: z.string().min(1, \"Student name is required\"),\n  text: z.string().min(5, \"Question must be at least 5 characters\"),\n});\n\nexport const answerQuestionSchema = z.object({\n  answer: z.string().min(1, \"Answer text is required\"),\n});\n\nexport type InsertQuestion = z.infer<typeof insertQuestionSchema>;\nexport type AnswerQuestion = z.infer<typeof answerQuestionSchema>;\nexport type Question = typeof questions.$inferSelect;\n\nexport const subscriptions = pgTable(\"subscriptions\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  studentEmail: text(\"student_email\").notNull(),\n  studentName: text(\"student_name\").notNull(),\n  playlistId: varchar(\"playlist_id\").notNull(),\n  startDate: timestamp(\"start_date\").notNull().defaultNow(),\n  endDate: timestamp(\"end_date\").notNull(),\n  status: text(\"status\").notNull().default(\"active\"),\n  amountPaid: integer(\"amount_paid\").notNull(),\n  createdAt: timestamp(\"created_at\").notNull().defaultNow(),\n});\n\nexport const insertSubscriptionSchema = createInsertSchema(subscriptions).omit({\n  id: true,\n  createdAt: true,\n}).extend({\n  studentEmail: z.string().email(\"Must be a valid email\"),\n  studentName: z.string().min(1, \"Student name is required\"),\n  playlistId: z.string().min(1, \"Playlist ID is required\"),\n  startDate: z.date().optional(),\n  endDate: z.date(),\n  status: z.enum([\"active\", \"expired\"]).default(\"active\"),\n  amountPaid: z.number().min(0, \"Amount must be positive\"),\n});\n\nexport type InsertSubscription = z.infer<typeof insertSubscriptionSchema>;\nexport type Subscription = typeof subscriptions.$inferSelect;\n\nexport const watchProgress = pgTable(\"watch_progress\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  studentEmail: text(\"student_email\").notNull(),\n  videoId: varchar(\"video_id\").notNull(),\n  playlistId: varchar(\"playlist_id\").notNull(),\n  progress: integer(\"progress\").notNull().default(0),\n  completed: integer(\"completed\").notNull().default(0),\n  lastWatched: timestamp(\"last_watched\").notNull().defaultNow(),\n});\n\nexport const insertWatchProgressSchema = createInsertSchema(watchProgress).omit({\n  id: true,\n}).extend({\n  studentEmail: z.string().email(),\n  videoId: z.string(),\n  playlistId: z.string(),\n  progress: z.number().min(0).max(100),\n  completed: z.number().min(0).max(1),\n});\n\nexport type InsertWatchProgress = z.infer<typeof insertWatchProgressSchema>;\nexport type WatchProgress = typeof watchProgress.$inferSelect;\n","size_bytes":8941},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/pages/TutorDashboard.tsx":{"content":"import { useState, useMemo, useEffect } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Video, Trash2, VideoIcon, Loader2, Edit2, Search, X, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardFooter } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from \"@/components/ui/dialog\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport type { Video as VideoType, InsertVideo } from \"@shared/schema\";\nimport { insertVideoSchema } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport AddVideoForm from \"@/components/AddVideoForm\";\nimport AddDriveVideo from \"@/components/AddDriveVideo\";\nimport VideoPlaylistManager from \"@/components/VideoPlaylistManager\";\nimport UnifiedVideoManager from \"@/components/UnifiedVideoManager\";\n\nconst VIDEOS_PER_PAGE = 12;\n\nexport default function TutorDashboard() {\n  const { toast } = useToast();\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [editingVideo, setEditingVideo] = useState<VideoType | null>(null);\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState(false);\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [categoryFilter, setCategoryFilter] = useState<string>(\"all\");\n  const [currentPage, setCurrentPage] = useState(1);\n\n  const { data: videos = [], isLoading } = useQuery<VideoType[]>({\n    queryKey: [\"/api/videos\"],\n  });\n\n  const filteredVideos = useMemo(() => {\n    let result = [...videos];\n\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      result = result.filter(\n        (video) =>\n          video.title.toLowerCase().includes(query) ||\n          video.description.toLowerCase().includes(query)\n      );\n    }\n\n    if (categoryFilter !== \"all\") {\n      result = result.filter((video) => video.category === categoryFilter);\n    }\n\n    return result;\n  }, [videos, searchQuery, categoryFilter]);\n\n  const totalPages = Math.ceil(filteredVideos.length / VIDEOS_PER_PAGE);\n  const startIndex = (currentPage - 1) * VIDEOS_PER_PAGE;\n  const endIndex = startIndex + VIDEOS_PER_PAGE;\n  const paginatedVideos = filteredVideos.slice(startIndex, endIndex);\n\n  const editForm = useForm<InsertVideo>({\n    resolver: zodResolver(insertVideoSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      videoUrl: \"\",\n      category: \"\",\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: InsertVideo }) => {\n      const response = await apiRequest(\"PATCH\", `/api/videos/${id}`, data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      setIsEditDialogOpen(false);\n      setEditingVideo(null);\n      toast({\n        title: \"Success\",\n        description: \"Video updated successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to update video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      setDeletingId(id);\n      return await apiRequest(\"DELETE\", `/api/videos/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      setDeletingId(null);\n      toast({\n        title: \"Success\",\n        description: \"Video deleted successfully\",\n      });\n    },\n    onError: () => {\n      setDeletingId(null);\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onEditSubmit = (data: InsertVideo) => {\n    if (editingVideo) {\n      updateMutation.mutate({ id: editingVideo.id, data });\n    }\n  };\n\n  const handleEdit = (video: VideoType) => {\n    setEditingVideo(video);\n    editForm.reset({\n      title: video.title,\n      description: video.description,\n      videoUrl: video.videoUrl,\n      category: video.category,\n    });\n    setIsEditDialogOpen(true);\n  };\n\n  const handleDelete = (id: string) => {\n    deleteMutation.mutate(id);\n  };\n\n  const handleClearFilters = () => {\n    setSearchQuery(\"\");\n    setCategoryFilter(\"all\");\n    setCurrentPage(1);\n  };\n\n  const handlePageChange = (page: number) => {\n    setCurrentPage(page);\n    window.scrollTo({ top: 0, behavior: \"smooth\" });\n  };\n\n  const getEmbedUrl = (url: string): string | null => {\n    try {\n      const urlObj = new URL(url);\n      \n      if (urlObj.hostname.includes(\"youtube.com\") || urlObj.hostname.includes(\"youtu.be\")) {\n        let videoId = \"\";\n        if (urlObj.hostname.includes(\"youtu.be\")) {\n          videoId = urlObj.pathname.slice(1);\n        } else {\n          videoId = urlObj.searchParams.get(\"v\") || \"\";\n        }\n        return videoId ? `https://www.youtube.com/embed/${videoId}` : null;\n      }\n      \n      if (urlObj.hostname.includes(\"vimeo.com\")) {\n        const videoId = urlObj.pathname.split(\"/\").pop();\n        return videoId ? `https://player.vimeo.com/video/${videoId}` : null;\n      }\n      \n      return null;\n    } catch {\n      return null;\n    }\n  };\n\n  const getCategoryVariant = (category: string): \"default\" | \"secondary\" | \"outline\" => {\n    const variants: Record<string, \"default\" | \"secondary\" | \"outline\"> = {\n      Tutorial: \"default\",\n      Lecture: \"secondary\",\n      Demo: \"outline\",\n      Review: \"secondary\",\n    };\n    return variants[category] || \"secondary\";\n  };\n\n  const hasActiveFilters = searchQuery.trim() || categoryFilter !== \"all\";\n\n  // Reset to page 1 when filters change\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [searchQuery, categoryFilter]);\n\n  // Clamp current page to valid range when total pages changes\n  useEffect(() => {\n    if (totalPages > 0 && currentPage > totalPages) {\n      setCurrentPage(totalPages);\n    } else if (totalPages === 0 && currentPage !== 1) {\n      setCurrentPage(1);\n    }\n  }, [totalPages, currentPage]);\n\n  const renderVideoManagementPanel = () => (\n    <>\n      {videos.length > 0 && (\n        <Card className=\"mb-6\" data-testid=\"card-search-filter\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex flex-col sm:flex-row gap-4\">\n              <div className=\"relative flex-1\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search videos by title or description...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-9\"\n                  data-testid=\"input-search\"\n                />\n              </div>\n              <div className=\"flex gap-2\">\n                <Select\n                  value={categoryFilter}\n                  onValueChange={setCategoryFilter}\n                >\n                  <SelectTrigger className=\"w-full sm:w-[180px]\" data-testid=\"select-filter-category\">\n                    <SelectValue placeholder=\"All Categories\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all\" data-testid=\"option-filter-all\">All Categories</SelectItem>\n                    <SelectItem value=\"Tutorial\" data-testid=\"option-filter-tutorial\">Tutorial</SelectItem>\n                    <SelectItem value=\"Lecture\" data-testid=\"option-filter-lecture\">Lecture</SelectItem>\n                    <SelectItem value=\"Demo\" data-testid=\"option-filter-demo\">Demo</SelectItem>\n                    <SelectItem value=\"Review\" data-testid=\"option-filter-review\">Review</SelectItem>\n                  </SelectContent>\n                </Select>\n                {hasActiveFilters && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"icon\"\n                    onClick={handleClearFilters}\n                    data-testid=\"button-clear-filters\"\n                  >\n                    <X className=\"h-4 w-4\" />\n                  </Button>\n                )}\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      )}\n\n      {isLoading ? (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n          {[1, 2, 3, 4, 5, 6].map((i) => (\n            <Card key={i} className=\"overflow-hidden\" data-testid={`skeleton-card-${i}`}>\n              <div className=\"aspect-video bg-muted animate-pulse\" />\n              <CardContent className=\"p-5\">\n                <div className=\"h-6 bg-muted animate-pulse rounded mb-2\" />\n                <div className=\"h-4 bg-muted animate-pulse rounded w-20 mb-3\" />\n                <div className=\"space-y-2\">\n                  <div className=\"h-3 bg-muted animate-pulse rounded\" />\n                  <div className=\"h-3 bg-muted animate-pulse rounded\" />\n                  <div className=\"h-3 bg-muted animate-pulse rounded w-3/4\" />\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      ) : filteredVideos.length === 0 ? (\n        <div\n          className=\"bg-muted/30 rounded-lg p-12 text-center\"\n          data-testid=\"empty-state\"\n        >\n          <VideoIcon className=\"mx-auto h-16 w-16 text-muted-foreground mb-4\" />\n          <h3 className=\"text-lg font-semibold text-foreground mb-2\">\n            {videos.length === 0 ? \"No videos yet\" : \"No videos found\"}\n          </h3>\n          <p className=\"text-muted-foreground\">\n            {videos.length === 0 \n              ? \"Add your first educational video using the form\"\n              : \"Try adjusting your search or filters\"}\n          </p>\n          {hasActiveFilters && videos.length > 0 && (\n            <Button\n              variant=\"outline\"\n              onClick={handleClearFilters}\n              className=\"mt-4\"\n              data-testid=\"button-clear-filters-empty\"\n            >\n              Clear Filters\n            </Button>\n          )}\n        </div>\n      ) : (\n        <>\n          <div className=\"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6\">\n            {paginatedVideos.map((video) => {\n              const embedUrl = getEmbedUrl(video.videoUrl);\n              const isDeleting = deletingId === video.id;\n              \n              return (\n                <Card\n                  key={video.id}\n                  className=\"overflow-hidden hover-elevate transition-all duration-200\"\n                  data-testid={`card-video-${video.id}`}\n                >\n                  <div className=\"aspect-video bg-muted relative overflow-hidden\">\n                    {embedUrl ? (\n                      <iframe\n                        src={embedUrl}\n                        title={video.title}\n                        className=\"w-full h-full\"\n                        allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                        allowFullScreen\n                      />\n                    ) : (\n                      <div className=\"w-full h-full flex items-center justify-center bg-muted\">\n                        <Video className=\"h-12 w-12 text-muted-foreground\" />\n                      </div>\n                    )}\n                  </div>\n                  <CardContent className=\"p-5\">\n                    <h3\n                      className=\"font-semibold text-lg mb-2 text-card-foreground line-clamp-2\"\n                      data-testid={`text-video-title-${video.id}`}\n                    >\n                      {video.title}\n                    </h3>\n                    <Badge\n                      variant={getCategoryVariant(video.category)}\n                      className=\"mb-3\"\n                      data-testid={`badge-category-${video.id}`}\n                    >\n                      {video.category}\n                    </Badge>\n                    <p\n                      className=\"text-sm text-muted-foreground line-clamp-3\"\n                      data-testid={`text-video-description-${video.id}`}\n                    >\n                      {video.description}\n                    </p>\n                  </CardContent>\n                  <CardFooter className=\"p-4 pt-0 flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => handleEdit(video)}\n                      className=\"flex-1\"\n                      data-testid={`button-edit-${video.id}`}\n                    >\n                      <Edit2 className=\"mr-2 h-4 w-4\" />\n                      Edit\n                    </Button>\n                    <Button\n                      variant=\"destructive\"\n                      size=\"sm\"\n                      onClick={() => handleDelete(video.id)}\n                      disabled={isDeleting}\n                      className=\"flex-1\"\n                      data-testid={`button-delete-${video.id}`}\n                    >\n                      {isDeleting ? (\n                        <>\n                          <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                          Deleting...\n                        </>\n                      ) : (\n                        <>\n                          <Trash2 className=\"mr-2 h-4 w-4\" />\n                          Delete\n                        </>\n                      )}\n                    </Button>\n                  </CardFooter>\n                </Card>\n              );\n            })}\n          </div>\n\n          {totalPages > 1 && (\n            <div className=\"mt-8 flex items-center justify-center gap-2\" data-testid=\"pagination-controls\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handlePageChange(currentPage - 1)}\n                disabled={currentPage === 1}\n                data-testid=\"button-prev-page\"\n              >\n                <ChevronLeft className=\"h-4 w-4\" />\n                Previous\n              </Button>\n              \n              <div className=\"flex gap-1\">\n                {Array.from({ length: totalPages }, (_, i) => i + 1).map((page) => (\n                  <Button\n                    key={page}\n                    variant={currentPage === page ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => handlePageChange(page)}\n                    className=\"min-w-[2.5rem]\"\n                    data-testid={`button-page-${page}`}\n                  >\n                    {page}\n                  </Button>\n                ))}\n              </div>\n\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handlePageChange(currentPage + 1)}\n                disabled={currentPage === totalPages}\n                data-testid=\"button-next-page\"\n              >\n                Next\n                <ChevronRight className=\"h-4 w-4\" />\n              </Button>\n            </div>\n          )}\n        </>\n      )}\n    </>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl md:text-3xl font-bold text-foreground mb-2\" data-testid=\"text-page-title\">\n            Video Management Dashboard\n          </h1>\n          <p className=\"text-muted-foreground\" data-testid=\"text-page-subtitle\">\n            Manage your educational video content\n          </p>\n          {videos.length > 0 && (\n            <div className=\"mt-4 flex gap-2\">\n              <Badge variant=\"secondary\" data-testid=\"badge-video-count\">\n                Total Videos: {videos.length}\n              </Badge>\n              {hasActiveFilters && (\n                <Badge variant=\"outline\" data-testid=\"badge-filtered-count\">\n                  Showing: {filteredVideos.length}\n                </Badge>\n              )}\n            </div>\n          )}\n        </div>\n\n        <Tabs defaultValue=\"unified\" className=\"w-full mb-8\">\n          <TabsList className=\"grid w-full grid-cols-4 mb-6\">\n            <TabsTrigger value=\"unified\" data-testid=\"tab-unified\">Unified Upload</TabsTrigger>\n            <TabsTrigger value=\"youtube\" data-testid=\"tab-youtube\">YouTube / Vimeo</TabsTrigger>\n            <TabsTrigger value=\"drive\" data-testid=\"tab-google-drive\">Google Drive</TabsTrigger>\n            <TabsTrigger value=\"playlists\" data-testid=\"tab-playlists\">Playlists</TabsTrigger>\n          </TabsList>\n          \n          <TabsContent value=\"unified\">\n            <UnifiedVideoManager />\n          </TabsContent>\n          \n          <TabsContent value=\"youtube\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-1\">\n                <AddVideoForm />\n              </div>\n              <div className=\"lg:col-span-2\" data-testid=\"section-video-grid\">\n                {renderVideoManagementPanel()}\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"drive\">\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-1\">\n                <AddDriveVideo />\n              </div>\n              <div className=\"lg:col-span-2\" data-testid=\"section-video-grid\">\n                {renderVideoManagementPanel()}\n              </div>\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"playlists\">\n            <VideoPlaylistManager />\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent className=\"sm:max-w-[500px]\" data-testid=\"dialog-edit-video\">\n          <DialogHeader>\n            <DialogTitle>Edit Video</DialogTitle>\n          </DialogHeader>\n          <Form {...editForm}>\n            <form onSubmit={editForm.handleSubmit(onEditSubmit)} className=\"space-y-4\">\n              <FormField\n                control={editForm.control}\n                name=\"title\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Title</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Enter video title\"\n                        {...field}\n                        disabled={updateMutation.isPending}\n                        data-testid=\"input-edit-video-title\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={editForm.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Description</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"Enter video description\"\n                        rows={4}\n                        {...field}\n                        disabled={updateMutation.isPending}\n                        data-testid=\"input-edit-video-description\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={editForm.control}\n                name=\"videoUrl\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Video URL</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"https://youtube.com/watch?v=...\"\n                        {...field}\n                        disabled={updateMutation.isPending}\n                        data-testid=\"input-edit-video-url\"\n                      />\n                    </FormControl>\n                    <FormDescription>\n                      Enter YouTube or Vimeo URL\n                    </FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={editForm.control}\n                name=\"category\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Category</FormLabel>\n                    <Select\n                      onValueChange={field.onChange}\n                      value={field.value}\n                      disabled={updateMutation.isPending}\n                    >\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-edit-video-category\">\n                          <SelectValue placeholder=\"Select a category\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"Tutorial\">Tutorial</SelectItem>\n                        <SelectItem value=\"Lecture\">Lecture</SelectItem>\n                        <SelectItem value=\"Demo\">Demo</SelectItem>\n                        <SelectItem value=\"Review\">Review</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex gap-2\">\n                <Button\n                  type=\"button\"\n                  variant=\"outline\"\n                  onClick={() => setIsEditDialogOpen(false)}\n                  disabled={updateMutation.isPending}\n                  className=\"flex-1\"\n                  data-testid=\"button-cancel-edit\"\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={updateMutation.isPending}\n                  className=\"flex-1\"\n                  data-testid=\"button-save-edit\"\n                >\n                  {updateMutation.isPending ? (\n                    <>\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                      Saving...\n                    </>\n                  ) : (\n                    \"Save Changes\"\n                  )}\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":22921},"server/db.ts":{"content":"import { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":483},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/App.tsx":{"content":"import { Switch, Route, useLocation } from 'wouter';\nimport { QueryClientProvider } from '@tanstack/react-query';\nimport { queryClient } from './lib/queryClient';\nimport { Toaster } from '@/components/ui/toaster';\nimport { TooltipProvider } from '@/components/ui/tooltip';\nimport { AuthProvider, useAuth } from '@/context/AuthContext';\nimport { PermissionsProvider } from '@/context/PermissionsContext';\nimport { ProtectedRoute } from '@/components/ProtectedRoute';\nimport { Sidebar } from '@/components/layout/Sidebar';\nimport { TopNavbar } from '@/components/layout/TopNavbar';\n\nimport LoginPage from '@/pages/LoginPage';\nimport RoleRedirect from '@/pages/RoleRedirect';\nimport NotFound from '@/pages/not-found';\n\nimport SuperAdminDashboardPage from '@/pages/superadmin/SuperAdminDashboardPage';\nimport SuperAdminAccessControlPage from '@/pages/superadmin/SuperAdminAccessControlPage';\nimport AdminDashboardPage from '@/pages/admin/AdminDashboardPage';\nimport AdminUsersPage from '@/pages/admin/AdminUsersPage';\nimport AdminPlaylistsPage from '@/pages/admin/AdminPlaylistsPage';\nimport AdminPaymentsPage from '@/pages/admin/AdminPaymentsPage';\nimport AdminSettingsPage from '@/pages/admin/AdminSettingsPage';\nimport TutorDashboardPage from '@/pages/tutor/TutorDashboardPage';\nimport TutorPlaylistsPage from '@/pages/tutor/TutorPlaylistsPage';\nimport TutorUploadVideosPage from '@/pages/tutor/TutorUploadVideosPage';\nimport TutorCommentsPage from '@/pages/tutor/TutorCommentsPage';\nimport TutorEarningsPage from '@/pages/tutor/TutorEarningsPage';\nimport TutorProfilePage from '@/pages/tutor/TutorProfilePage';\n\nimport StudentDashboardPage from '@/pages/student/StudentDashboardPage';\nimport StudentPlaylistsPage from '@/pages/student/StudentPlaylistsPage';\nimport StudentPlaylistDetailPage from '@/pages/student/StudentPlaylistDetailPage';\nimport StudentExploreCoursesPage from '@/pages/student/StudentExploreCoursesPage';\nimport StudentSubscriptionsPage from '@/pages/student/StudentSubscriptionsPage';\nimport StudentQnaPage from '@/pages/student/StudentQnaPage';\nimport StudentProfilePage from '@/pages/student/StudentProfilePage';\n\nimport TutorDashboard from '@/pages/TutorDashboard';\nimport StudentVideoFeed from '@/pages/StudentVideoFeed';\n\nfunction MainLayout({ children }: { children: React.ReactNode }) {\n  const { isAuthenticated } = useAuth();\n  const [location] = useLocation();\n\n  const isLoginPage = location === '/login';\n\n  if (isLoginPage || !isAuthenticated) {\n    return <>{children}</>;\n  }\n\n  return (\n    <div className=\"flex h-screen overflow-hidden\">\n      <Sidebar />\n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <TopNavbar />\n        <main className=\"flex-1 overflow-y-auto p-6 bg-muted/30\">\n          {children}\n        </main>\n      </div>\n    </div>\n  );\n}\n\nfunction Router() {\n  return (\n    <MainLayout>\n      <Switch>\n        <Route path=\"/login\" component={LoginPage} />\n        \n        <Route path=\"/\">\n          <ProtectedRoute>\n            <RoleRedirect />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/dashboard\">\n          <ProtectedRoute>\n            <RoleRedirect />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/superadmin/dashboard\">\n          <ProtectedRoute allowedRoles={['superadmin']}>\n            <SuperAdminDashboardPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/superadmin/access-control\">\n          <ProtectedRoute allowedRoles={['superadmin']}>\n            <SuperAdminAccessControlPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/admin/dashboard\">\n          <ProtectedRoute allowedRoles={['admin']}>\n            <AdminDashboardPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/admin/users\">\n          <ProtectedRoute allowedRoles={['admin']}>\n            <AdminUsersPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/admin/playlists\">\n          <ProtectedRoute allowedRoles={['admin']}>\n            <AdminPlaylistsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/admin/payments\">\n          <ProtectedRoute allowedRoles={['admin']}>\n            <AdminPaymentsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/admin/settings\">\n          <ProtectedRoute allowedRoles={['admin']}>\n            <AdminSettingsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/tutor/dashboard\">\n          <ProtectedRoute allowedRoles={['tutor']}>\n            <TutorDashboardPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/tutor/playlists\">\n          <ProtectedRoute allowedRoles={['tutor']}>\n            <TutorPlaylistsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/tutor/upload\">\n          <ProtectedRoute allowedRoles={['tutor']}>\n            <TutorUploadVideosPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/tutor/comments\">\n          <ProtectedRoute allowedRoles={['tutor']}>\n            <TutorCommentsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/tutor/earnings\">\n          <ProtectedRoute allowedRoles={['tutor']}>\n            <TutorEarningsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/tutor/profile\">\n          <ProtectedRoute allowedRoles={['tutor']}>\n            <TutorProfilePage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/dashboard\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentDashboardPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/playlists\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentPlaylistsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/playlist/:id\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentPlaylistDetailPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/explore\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentExploreCoursesPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/subscriptions\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentSubscriptionsPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/qna\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentQnaPage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route path=\"/student/profile\">\n          <ProtectedRoute allowedRoles={['student']}>\n            <StudentProfilePage />\n          </ProtectedRoute>\n        </Route>\n\n        <Route component={NotFound} />\n      </Switch>\n    </MainLayout>\n  );\n}\n\nfunction App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AuthProvider>\n          <PermissionsProvider>\n            <Router />\n          </PermissionsProvider>\n        </AuthProvider>\n        <Toaster />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n\nexport default App;\n","size_bytes":7139},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"replit.md":{"content":"# Video Learning Platform - Tutor & Student Dashboard\n\n## Overview\n\nThis project is a comprehensive video learning platform featuring distinct interfaces for students, tutors, administrators, and super administrators. It enables tutors to upload and manage video tutorials, students to consume content and interact, administrators to oversee platform operations, and super administrators to control role-based access permissions. The platform supports various video sources and includes robust playlist management. It's built as a full-stack TypeScript application with a React frontend, an Express backend, and PostgreSQL for data persistence, aiming to provide a rich educational experience.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend\n\n**Frameworks & Libraries**: React 18 with TypeScript, Wouter for routing, TanStack Query for state management, React Hook Form with Zod for forms, Shadcn/ui and Radix UI for components, and Tailwind CSS for styling.\n**Design System**: Material Design-inspired with Inter/DM Sans fonts, a neutral HSL color scheme, responsive mobile-first breakpoints, and light/dark mode support. It incorporates Notion-inspired aesthetics with attention to spacing, borders, and hover effects.\n**Core Features**:\n- **Unified Video Manager**: Facilitates adding videos from YouTube/Vimeo, Google Drive, or direct uploads, including live previews and playlist integration.\n- **Playlist Management**: Tutors can create, edit, and organize videos into playlists.\n- **Video Playback**: Supports embedded YouTube/Vimeo and Google Drive videos, offering consistent interaction features across all sources.\n- **Admin Dashboard**: A central portal for managing users, subscriptions, revenue, and platform analytics with search, filtering, and reporting capabilities.\n- **Form Handling**: Utilizes React Hook Form and Zod for robust client-side validation, sharing schemas with the backend for type safety.\n- **Navigation**: Features a multi-role routing system with dedicated interfaces for Tutors (`/tutor`), Students (`/student`), Admins (`/admin`), and Super Admins (`/superadmin`).\n- **Super Admin Dashboard**: A control panel for managing role-based permissions with the Access Control Panel, allowing fine-grained control over which features each role can access.\n\n### Backend\n\n**Framework**: Express.js with TypeScript and Node.js (ESM modules).\n**Storage Layer**: PostgreSQL with Drizzle ORM via Neon Database, abstracted using an `IStorage` interface for flexibility.\n**Data Models**: Includes Users, Videos, Comments, Questions, and Playlists, all utilizing UUIDs for primary keys.\n**API Endpoints**: Provides comprehensive CRUD operations for videos, playlists, comments, and questions. Secure direct file upload endpoints include magic byte validation, MIME type checking, and size limits.\n**Key Architectural Decisions**: Emphasizes interface-driven storage, clear separation of concerns, request/response logging, and shared Zod schemas for end-to-end type-safe validation.\n\n### Data Schema (PostgreSQL with Drizzle ORM)\n\n- **Roles**: `id` (UUID), `name` (unique), `description`, `createdAt`.\n- **Users**: `id` (UUID), `name`, `email` (unique), `passwordHash`, `roleId` (FK to roles), `status`, `createdAt`, `updatedAt`.\n- **Playlists**: `id`, `name`, `description`, `createdAt`, `tutorName`, `category`, `thumbnail`, `isPublic`, `videoCount`, `viewCount`.\n- **Videos**: `id`, `title`, `description`, `videoUrl`, `category`, `likes`, `playlistId`.\n- **Comments**: `id`, `videoId`, `username`, `text`, `createdAt`.\n- **Questions**: `id`, `videoId`, `text`, `createdAt`, `answer`, `answeredAt`, `studentEmail`, `studentName`.\n- **Subscriptions**: `studentEmail`, `studentName`, `playlistId`, `startDate`, `endDate`, `status`, `amountPaid`.\n- **Watch Progress**: `studentEmail`, `videoId`, `playlistId`, `progress`, `completed`, `lastWatched`.\n**Validation**: Enforced via client/server shared Zod schemas, URL validation, required fields, and foreign key constraints.\n\n### UI/UX Decisions\n\n- **Color Scheme**: Neutral HSL palette.\n- **Typography**: Inter/DM Sans for general text, specialized fonts for code and headings.\n- **Responsiveness**: Mobile-first approach with defined breakpoints.\n- **Interaction**: Notion-inspired aesthetics including spacing, border separators, rounded borders, and hover effects.\n- **Theming**: Supports both light and dark modes.\n\n### Technical Implementations & Feature Specifications\n\n- **Admin Dashboard**: A comprehensive 5-page admin portal:\n  - **Dashboard Overview**: Displays 4 stat cards (Total Users, Active Subscriptions, Total Revenue, Growth Rate), a revenue growth line chart showing monthly trends, and a subscription status pie chart (Active/Expired/Expiring). Uses Recharts for data visualization.\n  - **Users Page**: Full-featured user management with a searchable table showing student subscriptions, status filters (All/Active/Expired), pagination (10 per page), view details modal with complete student information, and invoice download functionality.\n  - **Playlists Page**: Card grid layout displaying all playlists with thumbnails, video counts, categories, and tutor names. Includes complete CRUD operations (create, edit with update mutation, delete) through dialogs using React Hook Form and Zod validation.\n  - **Payments Page**: Transaction management featuring 4 summary cards (Total Earnings, Pending Payments, Successful, Failed), monthly earnings bar chart, and a detailed transactions table with status filters and invoice actions.\n  - **Settings Page**: Platform configuration with three sections: Subscription Pricing (monthly/yearly prices, currency, tax), Admin Profile (name, email, password change), and Account Actions (logout).\n- **Student Dashboard**: Includes \"My Playlists\" with progress tracking, a \"Playlist Detail\" view with video player and interaction features, \"Explore Courses\" for browsing and subscribing, \"My Subscriptions\" for managing historical data, \"Comments & Q&A\" for interaction, and \"Profile Settings.\"\n- **Tutor Dashboard**: Offers an overview with tutor-specific metrics, \"My Playlists\" for CRUD operations, \"Upload Videos\" using the unified manager, \"Comments & Questions\" for student interaction, \"Earnings Summary,\" and \"Profile Settings\" including payment information.\n- **Super Admin Dashboard**: A comprehensive 2-page control panel:\n  - **Dashboard Overview**: Displays 5 stat cards (Total Users, Admins, Tutors, Students, System Status), Quick Actions card for accessing key features, and Platform Overview with system statistics.\n  - **Access Control Panel**: Features dynamic permission management with collapsible role cards (Admin, Tutor, Student), checkbox-based feature toggles for each role, badge counts showing enabled/total features, and atomic save operations. Permissions are stored in localStorage and persist across sessions. Super Admin always has full access regardless of permission settings.\n- **PermissionsContext**: Centralized permission management system that controls which features are visible in each role's sidebar. Includes `hasPermission()` function for checking access, `updateAllPermissions()` for atomic updates, and automatic synchronization with localStorage.\n- **Dynamic Sidebar Filtering**: Admin, Tutor, and Student roles have their sidebar menu items filtered based on permissions set by Super Admin. Super Admin role is never filtered and always has access to all features.\n- **JWT Authentication System**: Production-ready authentication using JSON Web Tokens with bcryptjs password hashing:\n  - **Access Tokens**: Short-lived (15 minutes) for API authentication\n  - **Refresh Tokens**: Long-lived (7 days) for obtaining new access tokens\n  - **Axios Interceptor**: Automatically adds Authorization headers and handles token refresh on 401 errors\n  - **Secure Password Storage**: Uses bcrypt hashing with salt rounds for password security\n  - **Role-Based Access Control (RBAC)**: Four predefined roles (superadmin, admin, tutor, student) stored in database\n  - **Protected Routes**: Backend middleware validates JWT tokens and role permissions\n  - **Token Persistence**: Tokens stored in localStorage and automatically restored on page reload\n  - **Demo Credentials**: superadmin@lms.com, admin@lms.com, tutor@lms.com, student@lms.com (all use password: password123)\n- **Data Filtering**: Tutor and student dashboards implement data filtering based on `tutorName` or `studentEmail` to scope content appropriately.\n\n## External Dependencies\n\n**Database**:\n- Neon Database (`@neondatabase/serverless`)\n- Drizzle ORM (PostgreSQL dialect)\n\n**UI Component Libraries**:\n- Radix UI\n- Lucide React (icons)\n- Shadcn/ui\n- Class Variance Authority, Tailwind Merge, CLSX (styling utilities)\n\n**Form & Validation**:\n- React Hook Form\n- `@hookform/resolvers` (Zod integration)\n- Zod\n\n**Development Tools**:\n- Vite\n\n**Data Visualization**:\n- Recharts (for admin dashboard charts: LineChart, PieChart, BarChart)\n\n**Authentication & Security**:\n- `jsonwebtoken` (JWT generation and verification)\n- `bcryptjs` (password hashing)\n- Axios (HTTP client with interceptors)\n\n**Additional Integrations**:\n- Google Fonts (Inter, DM Sans, Architects Daughter, Fira Code, Geist Mono)\n- PostCSS & Autoprefixer\n- `date-fns`\n- `file-type` (server-side file validation)\n\n## Recent Changes\n\n### November 2, 2025 - JWT Authentication System Implementation\n- **Replaced mock authentication with production-ready JWT-based system**\n- Created comprehensive database schema with `roles` and updated `users` tables\n- Implemented JWT utilities (`server/auth/jwt.ts`) for token generation, verification, and refresh\n- Built authentication middleware (`server/auth/middleware.ts`) for protecting routes with role-based access control\n- Created complete authentication API:\n  - `POST /api/auth/signup` - User registration with automatic role assignment\n  - `POST /api/auth/login` - Login with JWT token generation\n  - `POST /api/auth/logout` - Token invalidation\n  - `POST /api/auth/refresh` - Refresh access token using refresh token\n  - `GET /api/users/profile` - Get authenticated user profile\n  - `GET /api/users` - List all users (admin/superadmin only)\n  - `POST /api/users/:userId/role` - Update user role (superadmin only)\n  - `DELETE /api/users/:userId` - Delete user (superadmin only)\n- Updated frontend `AuthContext` to use real API with token management and automatic refresh\n- Created axios interceptor (`client/src/lib/axios.ts`) for automatic token injection and refresh on 401 errors\n- Updated `LoginPage` to remove role selection (roles now determined by backend)\n- Database seeded with four default roles and test users\n- Comprehensive API documentation created in `API_DOCUMENTATION.md`\n- All authentication endpoints tested and verified with curl\n\n### November 2, 2025 - Super Admin Access Control System\n- Added 'superadmin' role to authentication system with dedicated routing and login flow\n- Created PermissionsContext for centralized role-based access control management\n- Built Super Admin Dashboard with system overview (5 stat cards, Quick Actions, Platform Overview)\n- Implemented Access Control Panel with dynamic permission management:\n  - Collapsible role cards for Admin, Tutor, and Student with checkbox controls\n  - Badge counts showing enabled/total features for each role\n  - Save Changes button with atomic `updateAllPermissions` function (fixes race conditions)\n  - Reset Changes button to restore default permissions\n  - Permissions persist in localStorage across sessions\n- Updated Sidebar component to dynamically filter menu items based on permissions\n- Super Admin always has full access to all features (not affected by permission restrictions)\n- Added useEffect synchronization to ensure UI reflects saved permissions after navigation\n- Comprehensive end-to-end testing verified all functionality including permission persistence, sidebar filtering, and cross-role behavior\n\n### November 1, 2025 - Admin Dashboard Enhancement\n- Enhanced Dashboard Overview with revenue growth line chart and subscription status pie chart using Recharts\n- Created comprehensive Users Page with search, filter, pagination, and detailed view modal\n- Built Playlists Page with card grid layout and full CRUD operations (create, edit, delete)\n- Implemented Payments Page with transaction table, filters, summary cards, and monthly earnings chart\n- Added Settings Page with pricing configuration, currency/tax settings, and admin profile management\n- All pages use React Query for data fetching, React Hook Form with Zod validation for forms, and shadcn/ui components for consistency\n- Successfully tested all admin pages end-to-end with playwright verification","size_bytes":12789},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/pages/StudentVideoFeed.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery } from \"@tanstack/react-query\";\nimport { MessageCircle, HelpCircle } from \"lucide-react\";\nimport { Card, CardContent, CardHeader } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Badge } from \"@/components/ui/badge\";\nimport type { Video } from \"@shared/schema\";\nimport CommentList from \"@/components/CommentList\";\nimport LikeButton from \"@/components/LikeButton\";\nimport QuestionAnswerSection from \"@/components/QuestionAnswerSection\";\n\nexport default function StudentVideoFeed() {\n  const [expandedComments, setExpandedComments] = useState<Set<string>>(new Set());\n  const [expandedQA, setExpandedQA] = useState<Set<string>>(new Set());\n\n  const { data: videos = [], isLoading } = useQuery<Video[]>({\n    queryKey: [\"/api/videos\"],\n  });\n\n  const toggleComments = (videoId: string) => {\n    setExpandedComments(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(videoId)) {\n        newSet.delete(videoId);\n      } else {\n        newSet.add(videoId);\n      }\n      return newSet;\n    });\n  };\n\n  const toggleQA = (videoId: string) => {\n    setExpandedQA(prev => {\n      const newSet = new Set(prev);\n      if (newSet.has(videoId)) {\n        newSet.delete(videoId);\n      } else {\n        newSet.add(videoId);\n      }\n      return newSet;\n    });\n  };\n\n  const getEmbedUrl = (url: string): string | null => {\n    try {\n      const urlObj = new URL(url);\n      \n      if (urlObj.hostname.includes(\"youtube.com\") || urlObj.hostname.includes(\"youtu.be\")) {\n        let videoId = \"\";\n        if (urlObj.hostname.includes(\"youtu.be\")) {\n          videoId = urlObj.pathname.slice(1);\n        } else {\n          videoId = urlObj.searchParams.get(\"v\") || \"\";\n        }\n        return videoId ? `https://www.youtube.com/embed/${videoId}` : null;\n      }\n      \n      if (urlObj.hostname.includes(\"vimeo.com\")) {\n        const videoId = urlObj.pathname.split(\"/\").pop();\n        return videoId ? `https://player.vimeo.com/video/${videoId}` : null;\n      }\n      \n      // Handle Google Drive URLs\n      if (urlObj.hostname.includes(\"drive.google.com\")) {\n        // If it's already in embed/preview format, return as-is\n        if (url.includes(\"/preview\") || url.includes(\"uc?export=preview\")) {\n          return url;\n        }\n        \n        // Extract FILE_ID from various Google Drive URL formats\n        const fileIdMatch = url.match(/\\/file\\/d\\/([a-zA-Z0-9_-]+)/) || url.match(/[?&]id=([a-zA-Z0-9_-]+)/);\n        if (fileIdMatch && fileIdMatch[1]) {\n          return `https://drive.google.com/file/d/${fileIdMatch[1]}/preview`;\n        }\n      }\n      \n      return null;\n    } catch {\n      return null;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"min-h-screen bg-background flex items-center justify-center\">\n        <p className=\"text-muted-foreground\">Loading videos...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-background\">\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-3xl font-bold text-foreground mb-2\" data-testid=\"text-student-feed-title\">\n            Student Video Feed\n          </h1>\n          <p className=\"text-muted-foreground\" data-testid=\"text-student-feed-subtitle\">\n            Watch tutorial videos, like, comment, and ask questions\n          </p>\n        </div>\n\n        {videos.length === 0 ? (\n          <Card className=\"p-12 text-center\">\n            <p className=\"text-muted-foreground\">No videos available yet</p>\n          </Card>\n        ) : (\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {videos.map((video) => (\n              <VideoCard\n                key={video.id}\n                video={video}\n                isCommentsExpanded={expandedComments.has(video.id)}\n                isQAExpanded={expandedQA.has(video.id)}\n                onToggleComments={() => toggleComments(video.id)}\n                onToggleQA={() => toggleQA(video.id)}\n                getEmbedUrl={getEmbedUrl}\n              />\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}\n\ninterface VideoCardProps {\n  video: Video;\n  isCommentsExpanded: boolean;\n  isQAExpanded: boolean;\n  onToggleComments: () => void;\n  onToggleQA: () => void;\n  getEmbedUrl: (url: string) => string | null;\n}\n\nfunction VideoCard({\n  video,\n  isCommentsExpanded,\n  isQAExpanded,\n  onToggleComments,\n  onToggleQA,\n  getEmbedUrl,\n}: VideoCardProps) {\n  const embedUrl = getEmbedUrl(video.videoUrl);\n\n  return (\n    <Card className=\"overflow-hidden\" data-testid={`card-video-${video.id}`}>\n      <div className=\"aspect-video bg-muted relative overflow-hidden\">\n        {embedUrl ? (\n          <iframe\n            src={embedUrl}\n            title={video.title}\n            className=\"w-full h-full\"\n            allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n            allowFullScreen\n          />\n        ) : (\n          <div className=\"w-full h-full flex items-center justify-center bg-muted\">\n            <p className=\"text-muted-foreground\">Video preview unavailable</p>\n          </div>\n        )}\n      </div>\n\n      <CardHeader>\n        <div className=\"flex items-start justify-between gap-2\">\n          <h3 className=\"font-semibold text-xl text-card-foreground\" data-testid={`text-video-title-${video.id}`}>\n            {video.title}\n          </h3>\n          <Badge variant=\"secondary\" data-testid={`badge-category-${video.id}`}>\n            {video.category}\n          </Badge>\n        </div>\n        <p className=\"text-sm text-muted-foreground mt-2\" data-testid={`text-video-description-${video.id}`}>\n          {video.description}\n        </p>\n      </CardHeader>\n\n      <CardContent className=\"space-y-4\">\n        <div className=\"flex gap-2\">\n          <LikeButton videoId={video.id} initialLikeCount={video.likes} />\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={onToggleComments}\n            className=\"flex-1\"\n            data-testid={`button-toggle-comments-${video.id}`}\n          >\n            <MessageCircle className=\"mr-2 h-4 w-4\" />\n            Comments\n          </Button>\n\n          <Button\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={onToggleQA}\n            className=\"flex-1\"\n            data-testid={`button-toggle-qa-${video.id}`}\n          >\n            <HelpCircle className=\"mr-2 h-4 w-4\" />\n            Q&A\n          </Button>\n        </div>\n\n        {isCommentsExpanded && (\n          <div className=\"border-t pt-4\" data-testid={`section-comments-${video.id}`}>\n            <CommentList videoId={video.id} />\n          </div>\n        )}\n\n        {isQAExpanded && (\n          <div className=\"border-t pt-4\" data-testid={`section-qa-${video.id}`}>\n            <QuestionAnswerSection videoId={video.id} isTutor={false} />\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":7022},"client/src/components/LikeButton.tsx":{"content":"import { useState, useEffect } from \"react\";\nimport { useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { Heart } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\n\ninterface LikeButtonProps {\n  videoId: string;\n  initialLikeCount: number;\n}\n\nexport default function LikeButton({ videoId, initialLikeCount }: LikeButtonProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [optimisticLikes, setOptimisticLikes] = useState<number | null>(null);\n\n  // Clear optimistic state when new data arrives from server\n  useEffect(() => {\n    if (optimisticLikes !== null && optimisticLikes <= initialLikeCount) {\n      setOptimisticLikes(null);\n    }\n  }, [initialLikeCount, optimisticLikes]);\n\n  const likeMutation = useMutation({\n    mutationFn: async () => {\n      const response = await apiRequest(\"POST\", `/api/videos/${videoId}/like`);\n      return await response.json();\n    },\n    onMutate: async () => {\n      // Optimistically update the like count\n      const currentLikes = optimisticLikes ?? initialLikeCount;\n      setOptimisticLikes(currentLikes + 1);\n    },\n    onSuccess: () => {\n      // Invalidate and refetch videos to get the actual count from server\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      // Don't clear optimistic state here - let it persist until new props arrive\n      // This prevents visual flicker during the refetch\n    },\n    onError: () => {\n      // Revert optimistic update on error\n      setOptimisticLikes(null);\n      toast({\n        title: \"Error\",\n        description: \"Failed to like video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleClick = () => {\n    likeMutation.mutate();\n  };\n\n  const displayedLikes = optimisticLikes ?? initialLikeCount;\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={handleClick}\n      disabled={likeMutation.isPending}\n      className=\"flex-1 transition-all duration-200 hover:scale-105 active:scale-95\"\n      data-testid={`button-like-${videoId}`}\n    >\n      <Heart \n        className={`mr-2 h-4 w-4 transition-colors duration-200 ${\n          displayedLikes > 0 ? 'fill-current text-red-500' : ''\n        }`} \n      />\n      <span className=\"transition-all duration-200\">\n        {displayedLikes} {displayedLikes === 1 ? 'Like' : 'Likes'}\n      </span>\n    </Button>\n  );\n}\n","size_bytes":2492},"client/src/components/AddVideoForm.tsx":{"content":"import { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Plus, Loader2 } from \"lucide-react\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { InsertVideo } from \"@shared/schema\";\nimport { insertVideoSchema } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\nexport default function AddVideoForm() {\n  const { toast } = useToast();\n\n  const form = useForm<InsertVideo>({\n    resolver: zodResolver(insertVideoSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      videoUrl: \"\",\n      category: \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: InsertVideo) => {\n      const response = await apiRequest(\"POST\", \"/api/videos\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      form.reset();\n      toast({\n        title: \"Success\",\n        description: \"Video added successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: InsertVideo) => {\n    createMutation.mutate(data);\n  };\n\n  return (\n    <Card className=\"sticky top-8\" data-testid=\"card-add-video-form\">\n      <CardContent className=\"p-6\">\n        <h2 className=\"text-xl font-semibold mb-6 text-card-foreground\">Add New Video</h2>\n        <Form {...form}>\n          <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n            <FormField\n              control={form.control}\n              name=\"title\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Title</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"Enter video title\"\n                      {...field}\n                      disabled={createMutation.isPending}\n                      data-testid=\"input-video-title\"\n                    />\n                  </FormControl>\n                  <FormMessage data-testid=\"error-title\" />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"description\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Description</FormLabel>\n                  <FormControl>\n                    <Textarea\n                      placeholder=\"Enter video description\"\n                      rows={4}\n                      {...field}\n                      disabled={createMutation.isPending}\n                      data-testid=\"input-video-description\"\n                    />\n                  </FormControl>\n                  <FormMessage data-testid=\"error-description\" />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"videoUrl\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Video URL</FormLabel>\n                  <FormControl>\n                    <Input\n                      placeholder=\"https://youtube.com/watch?v=...\"\n                      {...field}\n                      disabled={createMutation.isPending}\n                      data-testid=\"input-video-url\"\n                    />\n                  </FormControl>\n                  <FormDescription>\n                    Enter YouTube or Vimeo URL\n                  </FormDescription>\n                  <FormMessage data-testid=\"error-videoUrl\" />\n                </FormItem>\n              )}\n            />\n\n            <FormField\n              control={form.control}\n              name=\"category\"\n              render={({ field }) => (\n                <FormItem>\n                  <FormLabel>Category</FormLabel>\n                  <Select\n                    onValueChange={field.onChange}\n                    value={field.value}\n                    disabled={createMutation.isPending}\n                  >\n                    <FormControl>\n                      <SelectTrigger data-testid=\"select-video-category\">\n                        <SelectValue placeholder=\"Select a category\" />\n                      </SelectTrigger>\n                    </FormControl>\n                    <SelectContent>\n                      <SelectItem value=\"Tutorial\" data-testid=\"option-category-tutorial\">Tutorial</SelectItem>\n                      <SelectItem value=\"Lecture\" data-testid=\"option-category-lecture\">Lecture</SelectItem>\n                      <SelectItem value=\"Demo\" data-testid=\"option-category-demo\">Demo</SelectItem>\n                      <SelectItem value=\"Review\" data-testid=\"option-category-review\">Review</SelectItem>\n                    </SelectContent>\n                  </Select>\n                  <FormMessage data-testid=\"error-category\" />\n                </FormItem>\n              )}\n            />\n\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={createMutation.isPending}\n              data-testid=\"button-add-video\"\n            >\n              {createMutation.isPending ? (\n                <>\n                  <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                  Adding...\n                </>\n              ) : (\n                <>\n                  <Plus className=\"mr-2 h-4 w-4\" />\n                  Add Video\n                </>\n              )}\n            </Button>\n          </form>\n        </Form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":6118},"client/src/components/CommentList.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Send } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport type { Comment } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { formatDistanceToNow } from \"date-fns\";\n\ninterface CommentListProps {\n  videoId: string;\n}\n\nexport default function CommentList({ videoId }: CommentListProps) {\n  const { toast } = useToast();\n  const [commentText, setCommentText] = useState(\"\");\n  const [username, setUsername] = useState(\"\");\n\n  const { data: comments = [], isLoading } = useQuery<Comment[]>({\n    queryKey: [\"/api/videos\", videoId, \"comments\"],\n    staleTime: 0,\n  });\n\n  const commentMutation = useMutation({\n    mutationFn: async ({ text, username }: { text: string; username: string }) => {\n      const response = await apiRequest(\"POST\", `/api/videos/${videoId}/comments`, { \n        videoId, \n        text,\n        username: username || \"Anonymous\"\n      });\n      return await response.json();\n    },\n    onSuccess: async () => {\n      await queryClient.refetchQueries({ queryKey: [\"/api/videos\", videoId, \"comments\"] });\n      setCommentText(\"\");\n      toast({\n        title: \"Success\",\n        description: \"Comment added\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add comment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    const text = commentText.trim();\n    if (!text) return;\n    commentMutation.mutate({ text, username });\n  };\n\n  const handleKeyPress = (e: React.KeyboardEvent) => {\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      e.preventDefault();\n      handleSubmit(e);\n    }\n  };\n\n  return (\n    <div className=\"space-y-4\" data-testid={`comment-list-${videoId}`}>\n      {/* Comment Input Form */}\n      <form onSubmit={handleSubmit} className=\"space-y-3\">\n        <div className=\"flex gap-2\">\n          <Input\n            type=\"text\"\n            placeholder=\"Your name (optional)\"\n            value={username}\n            onChange={(e) => setUsername(e.target.value)}\n            className=\"flex-1\"\n            data-testid={`input-username-${videoId}`}\n          />\n        </div>\n        <div className=\"flex gap-2\">\n          <Input\n            type=\"text\"\n            placeholder=\"Add a comment...\"\n            value={commentText}\n            onChange={(e) => setCommentText(e.target.value)}\n            onKeyPress={handleKeyPress}\n            disabled={commentMutation.isPending}\n            className=\"flex-1\"\n            data-testid={`input-comment-${videoId}`}\n          />\n          <Button\n            type=\"submit\"\n            size=\"icon\"\n            disabled={!commentText.trim() || commentMutation.isPending}\n            data-testid={`button-submit-comment-${videoId}`}\n          >\n            <Send className=\"h-4 w-4\" />\n          </Button>\n        </div>\n      </form>\n\n      {/* Comments List */}\n      <div className=\"space-y-3\">\n        {isLoading ? (\n          <p className=\"text-sm text-muted-foreground\">Loading comments...</p>\n        ) : comments.length === 0 ? (\n          <p className=\"text-sm text-muted-foreground\" data-testid={`text-no-comments-${videoId}`}>\n            No comments yet. Be the first to comment!\n          </p>\n        ) : (\n          comments.map((comment) => (\n            <div\n              key={comment.id}\n              className=\"rounded-lg border bg-card p-3 space-y-1\"\n              data-testid={`comment-item-${comment.id}`}\n            >\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm font-medium\" data-testid={`comment-username-${comment.id}`}>\n                  {comment.username}\n                </span>\n                <span className=\"text-xs text-muted-foreground\" data-testid={`comment-timestamp-${comment.id}`}>\n                  {formatDistanceToNow(new Date(comment.createdAt), { addSuffix: true })}\n                </span>\n              </div>\n              <p className=\"text-sm text-foreground\" data-testid={`comment-text-${comment.id}`}>\n                {comment.text}\n              </p>\n            </div>\n          ))\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":4429},"client/src/pages/AdminDashboard.tsx":{"content":"import { useState } from \"react\";\nimport { Sidebar } from \"@/components/admin/Sidebar\";\nimport { TopNavbar } from \"@/components/admin/TopNavbar\";\nimport { DashboardCards } from \"@/components/admin/DashboardCards\";\nimport { UserTable } from \"@/components/admin/UserTable\";\n\nconst mockUsers = [\n  {\n    id: 1,\n    name: \"John Doe\",\n    email: \"john@example.com\",\n    playlist: \"React for Beginners\",\n    dueDate: \"2025-12-01\",\n    amountPaid: \"â‚¹500\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"Introduction to React\", duration: \"15:30\" },\n      { id: 2, title: \"Components and Props\", duration: \"20:45\" },\n      { id: 3, title: \"State and Lifecycle\", duration: \"18:20\" },\n    ],\n    progress: 65,\n  },\n  {\n    id: 2,\n    name: \"Jane Smith\",\n    email: \"jane@example.com\",\n    playlist: \"Python Basics\",\n    dueDate: \"2025-11-15\",\n    amountPaid: \"â‚¹750\",\n    invoiceUrl: \"#\",\n    status: \"Expired\",\n    videos: [\n      { id: 1, title: \"Python Fundamentals\", duration: \"25:00\" },\n      { id: 2, title: \"Data Types\", duration: \"30:15\" },\n    ],\n    progress: 100,\n  },\n  {\n    id: 3,\n    name: \"Mike Johnson\",\n    email: \"mike@example.com\",\n    playlist: \"JavaScript Advanced\",\n    dueDate: \"2026-01-20\",\n    amountPaid: \"â‚¹1200\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"ES6 Features\", duration: \"22:30\" },\n      { id: 2, title: \"Async/Await\", duration: \"28:45\" },\n      { id: 3, title: \"Promises\", duration: \"19:20\" },\n      { id: 4, title: \"Modules\", duration: \"16:10\" },\n    ],\n    progress: 45,\n  },\n  {\n    id: 4,\n    name: \"Sarah Williams\",\n    email: \"sarah@example.com\",\n    playlist: \"Node.js Fundamentals\",\n    dueDate: \"2025-12-15\",\n    amountPaid: \"â‚¹900\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"Setting up Node\", duration: \"12:30\" },\n      { id: 2, title: \"Express.js Basics\", duration: \"35:00\" },\n      { id: 3, title: \"REST APIs\", duration: \"40:15\" },\n    ],\n    progress: 30,\n  },\n  {\n    id: 5,\n    name: \"Tom Brown\",\n    email: \"tom@example.com\",\n    playlist: \"TypeScript Mastery\",\n    dueDate: \"2025-11-20\",\n    amountPaid: \"â‚¹850\",\n    invoiceUrl: \"#\",\n    status: \"Expired\",\n    videos: [\n      { id: 1, title: \"TypeScript Basics\", duration: \"18:45\" },\n      { id: 2, title: \"Interfaces and Types\", duration: \"22:30\" },\n    ],\n    progress: 80,\n  },\n  {\n    id: 6,\n    name: \"Emily Davis\",\n    email: \"emily@example.com\",\n    playlist: \"CSS Grid & Flexbox\",\n    dueDate: \"2026-02-10\",\n    amountPaid: \"â‚¹600\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"Flexbox Fundamentals\", duration: \"20:00\" },\n      { id: 2, title: \"Grid Layout\", duration: \"25:30\" },\n      { id: 3, title: \"Responsive Design\", duration: \"30:45\" },\n    ],\n    progress: 50,\n  },\n  {\n    id: 7,\n    name: \"David Miller\",\n    email: \"david@example.com\",\n    playlist: \"React Hooks Deep Dive\",\n    dueDate: \"2025-12-25\",\n    amountPaid: \"â‚¹1100\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"useState Hook\", duration: \"15:20\" },\n      { id: 2, title: \"useEffect Hook\", duration: \"22:40\" },\n      { id: 3, title: \"Custom Hooks\", duration: \"28:15\" },\n      { id: 4, title: \"useContext\", duration: \"18:30\" },\n    ],\n    progress: 25,\n  },\n  {\n    id: 8,\n    name: \"Lisa Anderson\",\n    email: \"lisa@example.com\",\n    playlist: \"Vue.js Essentials\",\n    dueDate: \"2025-11-30\",\n    amountPaid: \"â‚¹700\",\n    invoiceUrl: \"#\",\n    status: \"Expired\",\n    videos: [\n      { id: 1, title: \"Vue Components\", duration: \"19:00\" },\n      { id: 2, title: \"Vuex State Management\", duration: \"32:20\" },\n    ],\n    progress: 90,\n  },\n  {\n    id: 9,\n    name: \"Chris Wilson\",\n    email: \"chris@example.com\",\n    playlist: \"MongoDB Basics\",\n    dueDate: \"2026-03-05\",\n    amountPaid: \"â‚¹950\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"Introduction to MongoDB\", duration: \"16:45\" },\n      { id: 2, title: \"CRUD Operations\", duration: \"28:00\" },\n      { id: 3, title: \"Aggregation\", duration: \"35:30\" },\n    ],\n    progress: 40,\n  },\n  {\n    id: 10,\n    name: \"Amy Taylor\",\n    email: \"amy@example.com\",\n    playlist: \"GraphQL Complete Guide\",\n    dueDate: \"2025-12-30\",\n    amountPaid: \"â‚¹1300\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"GraphQL Basics\", duration: \"20:15\" },\n      { id: 2, title: \"Queries and Mutations\", duration: \"25:40\" },\n      { id: 3, title: \"Subscriptions\", duration: \"22:30\" },\n      { id: 4, title: \"Schema Design\", duration: \"30:00\" },\n    ],\n    progress: 55,\n  },\n  {\n    id: 11,\n    name: \"Robert Garcia\",\n    email: \"robert@example.com\",\n    playlist: \"Docker Fundamentals\",\n    dueDate: \"2025-11-25\",\n    amountPaid: \"â‚¹800\",\n    invoiceUrl: \"#\",\n    status: \"Expired\",\n    videos: [\n      { id: 1, title: \"Getting Started with Docker\", duration: \"18:00\" },\n      { id: 2, title: \"Docker Compose\", duration: \"26:45\" },\n    ],\n    progress: 75,\n  },\n  {\n    id: 12,\n    name: \"Jessica Martinez\",\n    email: \"jessica@example.com\",\n    playlist: \"AWS Cloud Basics\",\n    dueDate: \"2026-01-15\",\n    amountPaid: \"â‚¹1400\",\n    invoiceUrl: \"#\",\n    status: \"Active\",\n    videos: [\n      { id: 1, title: \"EC2 Instances\", duration: \"24:30\" },\n      { id: 2, title: \"S3 Storage\", duration: \"20:15\" },\n      { id: 3, title: \"Lambda Functions\", duration: \"28:40\" },\n      { id: 4, title: \"RDS Databases\", duration: \"32:20\" },\n    ],\n    progress: 35,\n  },\n];\n\nexport default function AdminDashboard() {\n  const [activeSection, setActiveSection] = useState(\"dashboard\");\n  const [isSidebarOpen, setIsSidebarOpen] = useState(true);\n\n  return (\n    <div className=\"flex h-screen bg-background\">\n      <Sidebar \n        activeSection={activeSection} \n        setActiveSection={setActiveSection}\n        isOpen={isSidebarOpen}\n        setIsOpen={setIsSidebarOpen}\n      />\n      \n      <div className=\"flex-1 flex flex-col overflow-hidden\">\n        <TopNavbar toggleSidebar={() => setIsSidebarOpen(!isSidebarOpen)} />\n        \n        <main className=\"flex-1 overflow-y-auto p-6\">\n          {activeSection === \"dashboard\" && (\n            <div className=\"space-y-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-admin-dashboard-title\">Admin Dashboard</h1>\n                <p className=\"text-muted-foreground mt-1\">Monitor and manage your learning platform</p>\n              </div>\n              \n              <DashboardCards users={mockUsers} />\n              \n              <UserTable users={mockUsers} />\n            </div>\n          )}\n          \n          {activeSection === \"users\" && (\n            <div className=\"space-y-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-users-title\">Users Management</h1>\n                <p className=\"text-muted-foreground mt-1\">View and manage all users</p>\n              </div>\n              <UserTable users={mockUsers} />\n            </div>\n          )}\n          \n          {activeSection === \"subscriptions\" && (\n            <div className=\"space-y-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-subscriptions-title\">Subscriptions</h1>\n                <p className=\"text-muted-foreground mt-1\">Manage subscription plans and billing</p>\n              </div>\n              <div className=\"bg-card rounded-lg border p-8 text-center\">\n                <p className=\"text-muted-foreground\">Subscriptions management coming soon...</p>\n              </div>\n            </div>\n          )}\n          \n          {activeSection === \"invoices\" && (\n            <div className=\"space-y-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-invoices-title\">Invoices</h1>\n                <p className=\"text-muted-foreground mt-1\">View and download invoices</p>\n              </div>\n              <div className=\"bg-card rounded-lg border p-8 text-center\">\n                <p className=\"text-muted-foreground\">Invoices management coming soon...</p>\n              </div>\n            </div>\n          )}\n          \n          {activeSection === \"settings\" && (\n            <div className=\"space-y-6\">\n              <div>\n                <h1 className=\"text-3xl font-bold\" data-testid=\"text-settings-title\">Settings</h1>\n                <p className=\"text-muted-foreground mt-1\">Configure your admin preferences</p>\n              </div>\n              <div className=\"bg-card rounded-lg border p-8 text-center\">\n                <p className=\"text-muted-foreground\">Settings panel coming soon...</p>\n              </div>\n            </div>\n          )}\n        </main>\n      </div>\n    </div>\n  );\n}\n","size_bytes":8754},"client/src/pages/LoginPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { useLocation } from 'wouter';\nimport { useAuth } from '@/context/AuthContext';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { useToast } from '@/hooks/use-toast';\nimport { GraduationCap } from 'lucide-react';\nimport type { UserRole } from '@/context/AuthContext';\n\nexport default function LoginPage() {\n  const [, setLocation] = useLocation();\n  const { login, isAuthenticated, user, isLoading: authLoading } = useAuth();\n  const { toast } = useToast();\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [isLoading, setIsLoading] = useState(false);\n\n  // Redirect if already authenticated\n  useEffect(() => {\n    if (isAuthenticated && user) {\n      const redirectPath =\n        user.role === 'superadmin'\n          ? '/superadmin/dashboard'\n          : user.role === 'admin'\n          ? '/admin/dashboard'\n          : user.role === 'tutor'\n          ? '/tutor/dashboard'\n          : '/student/dashboard';\n      setLocation(redirectPath);\n    }\n  }, [isAuthenticated, user, setLocation]);\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    \n    if (!email || !password) {\n      toast({\n        title: 'Error',\n        description: 'Please fill in all fields',\n        variant: 'destructive',\n      });\n      return;\n    }\n\n    setIsLoading(true);\n    try {\n      await login(email, password);\n      toast({\n        title: 'Success',\n        description: 'Logged in successfully!',\n      });\n    } catch (error: any) {\n      const errorMessage = error.response?.data?.error || 'Invalid credentials. Please try again.';\n      toast({\n        title: 'Login Failed',\n        description: errorMessage,\n        variant: 'destructive',\n      });\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const handleQuickLogin = (quickRole: UserRole) => {\n    const emails: Record<UserRole, string> = {\n      superadmin: 'superadmin@lms.com',\n      admin: 'admin@lms.com',\n      tutor: 'tutor@lms.com',\n      student: 'student@lms.com',\n    };\n    setEmail(emails[quickRole]);\n    setPassword('password123');\n  };\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-gray-900 p-4\">\n      <Card className=\"w-full max-w-md\">\n        <CardHeader className=\"space-y-1 text-center\">\n          <div className=\"flex justify-center mb-4\">\n            <div className=\"h-16 w-16 rounded-full bg-primary flex items-center justify-center\">\n              <GraduationCap className=\"h-10 w-10 text-primary-foreground\" />\n            </div>\n          </div>\n          <CardTitle className=\"text-2xl font-bold\" data-testid=\"text-login-title\">\n            Welcome to LMS\n          </CardTitle>\n          <CardDescription data-testid=\"text-login-description\">\n            Sign in to access your learning dashboard\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handleSubmit} className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"email\">Email</Label>\n              <Input\n                id=\"email\"\n                type=\"email\"\n                placeholder=\"your@email.com\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                data-testid=\"input-email\"\n              />\n            </div>\n\n            <div className=\"space-y-2\">\n              <Label htmlFor=\"password\">Password</Label>\n              <Input\n                id=\"password\"\n                type=\"password\"\n                placeholder=\"Enter your password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                data-testid=\"input-password\"\n              />\n            </div>\n\n            <Button\n              type=\"submit\"\n              className=\"w-full\"\n              disabled={isLoading || authLoading}\n              data-testid=\"button-login\"\n            >\n              {isLoading ? 'Signing in...' : 'Sign In'}\n            </Button>\n          </form>\n\n          <div className=\"mt-6\">\n            <div className=\"relative\">\n              <div className=\"absolute inset-0 flex items-center\">\n                <span className=\"w-full border-t\" />\n              </div>\n              <div className=\"relative flex justify-center text-xs uppercase\">\n                <span className=\"bg-background px-2 text-muted-foreground\">\n                  Quick Demo Login\n                </span>\n              </div>\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-2 mt-4\">\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handleQuickLogin('student')}\n                data-testid=\"button-quick-student\"\n              >\n                Student\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handleQuickLogin('tutor')}\n                data-testid=\"button-quick-tutor\"\n              >\n                Tutor\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handleQuickLogin('admin')}\n                data-testid=\"button-quick-admin\"\n              >\n                Admin\n              </Button>\n              <Button\n                type=\"button\"\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => handleQuickLogin('superadmin')}\n                data-testid=\"button-quick-superadmin\"\n              >\n                Super Admin\n              </Button>\n            </div>\n          </div>\n\n          <p className=\"mt-4 text-xs text-center text-muted-foreground\">\n            All demo accounts use password: <strong>password123</strong>\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":6281},"client/src/pages/admin/AdminDashboardPage.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Users, CreditCard, DollarSign, TrendingUp } from 'lucide-react';\nimport { LineChart, Line, BarChart, Bar, PieChart, Pie, Cell, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\n\nconst stats = [\n  {\n    title: 'Total Users',\n    value: '1,234',\n    description: '+12% from last month',\n    icon: Users,\n    iconBg: 'bg-blue-100 dark:bg-blue-900',\n    iconColor: 'text-blue-600 dark:text-blue-400',\n  },\n  {\n    title: 'Active Subscriptions',\n    value: '856',\n    description: '+8% from last month',\n    icon: CreditCard,\n    iconBg: 'bg-green-100 dark:bg-green-900',\n    iconColor: 'text-green-600 dark:text-green-400',\n  },\n  {\n    title: 'Total Revenue',\n    value: 'â‚¹1,24,500',\n    description: '+23% from last month',\n    icon: DollarSign,\n    iconBg: 'bg-purple-100 dark:bg-purple-900',\n    iconColor: 'text-purple-600 dark:text-purple-400',\n  },\n  {\n    title: 'Growth Rate',\n    value: '18.2%',\n    description: '+4.3% from last month',\n    icon: TrendingUp,\n    iconBg: 'bg-orange-100 dark:bg-orange-900',\n    iconColor: 'text-orange-600 dark:text-orange-400',\n  },\n];\n\nconst revenueData = [\n  { month: 'Jan', revenue: 45000 },\n  { month: 'Feb', revenue: 52000 },\n  { month: 'Mar', revenue: 61000 },\n  { month: 'Apr', revenue: 58000 },\n  { month: 'May', revenue: 72000 },\n  { month: 'Jun', revenue: 89000 },\n  { month: 'Jul', revenue: 95000 },\n  { month: 'Aug', revenue: 102000 },\n  { month: 'Sep', revenue: 108000 },\n  { month: 'Oct', revenue: 115000 },\n  { month: 'Nov', revenue: 124500 },\n  { month: 'Dec', revenue: 135000 },\n];\n\nconst subscriptionData = [\n  { name: 'Active', value: 856, color: '#10b981' },\n  { name: 'Expired', value: 378, color: '#ef4444' },\n];\n\nexport default function AdminDashboardPage() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          Admin Dashboard\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Monitor your platform's performance and manage users\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} data-testid={`card-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{stat.title}</CardTitle>\n                <div className={`h-8 w-8 rounded-full flex items-center justify-center ${stat.iconBg}`}>\n                  <Icon className={`h-4 w-4 ${stat.iconColor}`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{stat.value}</div>\n                <p className=\"text-xs text-muted-foreground\">{stat.description}</p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Revenue Growth</CardTitle>\n            <CardDescription>Monthly revenue over the past year</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={revenueData}>\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                <XAxis dataKey=\"month\" className=\"text-xs\" />\n                <YAxis className=\"text-xs\" />\n                <Tooltip \n                  contentStyle={{ backgroundColor: 'hsl(var(--card))', border: '1px solid hsl(var(--border))' }}\n                  labelStyle={{ color: 'hsl(var(--foreground))' }}\n                />\n                <Legend />\n                <Line \n                  type=\"monotone\" \n                  dataKey=\"revenue\" \n                  stroke=\"hsl(var(--primary))\" \n                  strokeWidth={2}\n                  name=\"Revenue (â‚¹)\"\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Subscription Status</CardTitle>\n            <CardDescription>Active vs Expired subscriptions</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <PieChart>\n                <Pie\n                  data={subscriptionData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  labelLine={false}\n                  label={({ name, percent }) => `${name}: ${(percent * 100).toFixed(0)}%`}\n                  outerRadius={80}\n                  fill=\"#8884d8\"\n                  dataKey=\"value\"\n                >\n                  {subscriptionData.map((entry, index) => (\n                    <Cell key={`cell-${index}`} fill={entry.color} />\n                  ))}\n                </Pie>\n                <Tooltip contentStyle={{ backgroundColor: 'hsl(var(--card))', border: '1px solid hsl(var(--border))' }} />\n              </PieChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Quick Actions</CardTitle>\n          <CardDescription>Manage your platform efficiently</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <p className=\"text-sm text-muted-foreground\">\n            Navigate using the sidebar to access user management, playlists, payments, and settings.\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":5774},"client/src/components/UnifiedVideoManager.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Label } from \"@/components/ui/label\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { queryClient, apiRequest } from \"@/lib/queryClient\";\nimport { Youtube, Video, Upload, Plus, X } from \"lucide-react\";\nimport type { Playlist } from \"@shared/schema\";\n\ntype VideoSource = \"youtube\" | \"drive\" | \"upload\";\n\nconst formSchema = z.object({\n  title: z.string().min(1, \"Title is required\"),\n  description: z.string().min(1, \"Description is required\"),\n  category: z.enum([\"Tutorial\", \"Lecture\", \"Demo\", \"Review\"], {\n    required_error: \"Category is required\",\n  }),\n  videoUrl: z.string().optional(),\n  playlistId: z.string().optional(),\n  newPlaylistName: z.string().optional(),\n  newPlaylistDescription: z.string().optional(),\n});\n\ntype VideoFormData = z.infer<typeof formSchema>;\n\nfunction convertDriveUrl(url: string): string | null {\n  const patterns = [\n    /drive\\.google\\.com\\/file\\/d\\/([a-zA-Z0-9_-]+)/,\n    /drive\\.google\\.com\\/open\\?id=([a-zA-Z0-9_-]+)/,\n    /drive\\.google\\.com\\/uc\\?.*id=([a-zA-Z0-9_-]+)/,\n  ];\n\n  for (const pattern of patterns) {\n    const match = url.match(pattern);\n    if (match && match[1]) {\n      return `https://drive.google.com/uc?export=preview&id=${match[1]}`;\n    }\n  }\n\n  return null;\n}\n\nfunction getEmbedUrl(url: string, source: VideoSource): string {\n  if (source === \"drive\") {\n    const converted = convertDriveUrl(url);\n    return converted || url;\n  }\n\n  if (url.includes(\"youtube.com\") || url.includes(\"youtu.be\")) {\n    const videoId = url.includes(\"youtu.be\")\n      ? url.split(\"/\").pop()?.split(\"?\")[0]\n      : new URLSearchParams(url.split(\"?\")[1]).get(\"v\");\n    return videoId ? `https://www.youtube.com/embed/${videoId}` : url;\n  }\n\n  if (url.includes(\"vimeo.com\")) {\n    const videoId = url.split(\"/\").pop();\n    return videoId ? `https://player.vimeo.com/video/${videoId}` : url;\n  }\n\n  return url;\n}\n\nexport default function UnifiedVideoManager() {\n  const { toast } = useToast();\n  const [videoSource, setVideoSource] = useState<VideoSource>(\"youtube\");\n  const [videoUrl, setVideoUrl] = useState(\"\");\n  const [previewUrl, setPreviewUrl] = useState(\"\");\n  const [selectedFile, setSelectedFile] = useState<File | null>(null);\n  const [uploadProgress, setUploadProgress] = useState(0);\n  const [isCreatingNewPlaylist, setIsCreatingNewPlaylist] = useState(false);\n\n  const form = useForm<VideoFormData>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      category: undefined,\n      videoUrl: \"\",\n      playlistId: undefined,\n      newPlaylistName: \"\",\n      newPlaylistDescription: \"\",\n    },\n  });\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: [\"/api/playlists\"],\n  });\n\n  const createPlaylistMutation = useMutation({\n    mutationFn: async (data: { name: string; description?: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/playlists\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/playlists\"] });\n    },\n  });\n\n  const createVideoMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest(\"POST\", \"/api/videos\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/playlists\"] });\n      toast({\n        title: \"Success\",\n        description: \"Video added successfully!\",\n      });\n      handleReset();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const uploadVideoMutation = useMutation<any, Error, FormData>({\n    mutationFn: async (formData: FormData) => {\n      const xhr = new XMLHttpRequest();\n      \n      return new Promise((resolve, reject) => {\n        xhr.upload.addEventListener(\"progress\", (e) => {\n          if (e.lengthComputable) {\n            const progress = Math.round((e.loaded / e.total) * 100);\n            setUploadProgress(progress);\n          }\n        });\n\n        xhr.addEventListener(\"load\", () => {\n          if (xhr.status >= 200 && xhr.status < 300) {\n            resolve(JSON.parse(xhr.responseText));\n          } else {\n            reject(new Error(xhr.statusText));\n          }\n        });\n\n        xhr.addEventListener(\"error\", () => reject(new Error(\"Upload failed\")));\n\n        xhr.open(\"POST\", \"/api/videos/upload\");\n        xhr.send(formData);\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/playlists\"] });\n      toast({\n        title: \"Success\",\n        description: \"Video uploaded successfully!\",\n      });\n      handleReset();\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to upload video\",\n        variant: \"destructive\",\n      });\n      setUploadProgress(0);\n    },\n  });\n\n  const handleReset = () => {\n    form.reset();\n    setVideoUrl(\"\");\n    setPreviewUrl(\"\");\n    setSelectedFile(null);\n    setUploadProgress(0);\n    setIsCreatingNewPlaylist(false);\n  };\n\n  const handleVideoUrlChange = (url: string) => {\n    setVideoUrl(url);\n    if (url.trim()) {\n      setPreviewUrl(getEmbedUrl(url, videoSource));\n    } else {\n      setPreviewUrl(\"\");\n    }\n  };\n\n  const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n      setSelectedFile(file);\n      const objectUrl = URL.createObjectURL(file);\n      setPreviewUrl(objectUrl);\n    }\n  };\n\n  const onSubmit = async (data: VideoFormData) => {\n    if (videoSource !== \"upload\" && !videoUrl.trim()) {\n      toast({\n        title: \"Error\",\n        description: \"Please provide a video URL\",\n        variant: \"destructive\",\n      });\n      return;\n    }\n\n    let playlistId = data.playlistId;\n\n    if (isCreatingNewPlaylist && data.newPlaylistName) {\n      try {\n        const newPlaylist = await createPlaylistMutation.mutateAsync({\n          name: data.newPlaylistName,\n          description: data.newPlaylistDescription,\n        });\n        playlistId = newPlaylist.id;\n      } catch (error) {\n        toast({\n          title: \"Error\",\n          description: \"Failed to create playlist\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n    }\n\n    if (videoSource === \"upload\") {\n      if (!selectedFile) {\n        toast({\n          title: \"Error\",\n          description: \"Please select a video file\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      const formData = new FormData();\n      formData.append(\"video\", selectedFile);\n      formData.append(\"title\", data.title);\n      formData.append(\"description\", data.description);\n      formData.append(\"category\", data.category);\n      if (playlistId) {\n        formData.append(\"playlistId\", playlistId);\n      }\n\n      await uploadVideoMutation.mutateAsync(formData);\n    } else {\n      let finalVideoUrl = videoUrl;\n      if (videoSource === \"drive\") {\n        const converted = convertDriveUrl(videoUrl);\n        if (!converted) {\n          toast({\n            title: \"Error\",\n            description: \"Invalid Google Drive URL\",\n            variant: \"destructive\",\n          });\n          return;\n        }\n        finalVideoUrl = converted;\n      }\n\n      if (!finalVideoUrl) {\n        toast({\n          title: \"Error\",\n          description: \"Please provide a video URL\",\n          variant: \"destructive\",\n        });\n        return;\n      }\n\n      await createVideoMutation.mutateAsync({\n        ...data,\n        videoUrl: finalVideoUrl,\n        playlistId,\n      });\n    }\n  };\n\n  const handleSourceChange = (source: VideoSource) => {\n    setVideoSource(source);\n    setVideoUrl(\"\");\n    setPreviewUrl(\"\");\n    setSelectedFile(null);\n    setUploadProgress(0);\n  };\n\n  return (\n    <Card className=\"shadow-lg max-w-3xl mx-auto\" data-testid=\"card-unified-video-manager\">\n      <CardHeader>\n        <CardTitle>Add New Video</CardTitle>\n        <CardDescription>\n          Upload videos from YouTube, Vimeo, Google Drive, or upload directly\n        </CardDescription>\n      </CardHeader>\n      <CardContent>\n        <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-6\">\n          {/* Video Source Tabs */}\n          <div>\n            <Label>Video Source</Label>\n            <Tabs value={videoSource} onValueChange={(v) => handleSourceChange(v as VideoSource)} className=\"mt-2\">\n              <TabsList className=\"grid w-full grid-cols-3\">\n                <TabsTrigger value=\"youtube\" data-testid=\"tab-youtube-vimeo\">\n                  <Youtube className=\"w-4 h-4 mr-2\" />\n                  YouTube / Vimeo\n                </TabsTrigger>\n                <TabsTrigger value=\"drive\" data-testid=\"tab-google-drive\">\n                  <Video className=\"w-4 h-4 mr-2\" />\n                  Google Drive\n                </TabsTrigger>\n                <TabsTrigger value=\"upload\" data-testid=\"tab-upload\">\n                  <Upload className=\"w-4 h-4 mr-2\" />\n                  Upload File\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"youtube\" className=\"mt-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"youtube-url\">YouTube / Vimeo URL</Label>\n                  <Input\n                    id=\"youtube-url\"\n                    data-testid=\"input-youtube-url\"\n                    placeholder=\"https://www.youtube.com/watch?v=...\"\n                    value={videoUrl}\n                    onChange={(e) => handleVideoUrlChange(e.target.value)}\n                  />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Paste a YouTube or Vimeo video link\n                  </p>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"drive\" className=\"mt-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"drive-url\">Google Drive URL</Label>\n                  <Input\n                    id=\"drive-url\"\n                    data-testid=\"input-drive-url\"\n                    placeholder=\"https://drive.google.com/file/d/...\"\n                    value={videoUrl}\n                    onChange={(e) => handleVideoUrlChange(e.target.value)}\n                  />\n                  <p className=\"text-sm text-muted-foreground\">\n                    Make sure the video is shared with \"Anyone with the link\"\n                  </p>\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"upload\" className=\"mt-4\">\n                <div className=\"space-y-2\">\n                  <Label htmlFor=\"file-upload\">Upload Video File</Label>\n                  <div\n                    className=\"border-2 border-dashed rounded-lg p-8 text-center hover-elevate cursor-pointer transition-colors\"\n                    onClick={() => document.getElementById(\"file-upload\")?.click()}\n                    data-testid=\"dropzone-upload\"\n                  >\n                    <Input\n                      id=\"file-upload\"\n                      data-testid=\"input-file-upload\"\n                      type=\"file\"\n                      accept=\"video/*\"\n                      className=\"hidden\"\n                      onChange={handleFileChange}\n                    />\n                    <Upload className=\"w-12 h-12 mx-auto mb-4 text-muted-foreground\" />\n                    {selectedFile ? (\n                      <p className=\"text-sm font-medium\">{selectedFile.name}</p>\n                    ) : (\n                      <>\n                        <p className=\"text-sm font-medium mb-1\">Click to upload a video</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          MP4, WebM, or OGG (max 100MB)\n                        </p>\n                      </>\n                    )}\n                  </div>\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n\n          {/* Live Preview */}\n          {previewUrl && (\n            <div>\n              <Label>Preview</Label>\n              <div className=\"mt-2 rounded-lg overflow-hidden bg-black aspect-video\">\n                {videoSource === \"upload\" ? (\n                  <video\n                    controls\n                    className=\"w-full h-full\"\n                    src={previewUrl}\n                    data-testid=\"preview-video\"\n                  >\n                    Your browser does not support the video tag.\n                  </video>\n                ) : (\n                  <iframe\n                    src={previewUrl}\n                    className=\"w-full h-full\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen\n                    data-testid=\"preview-iframe\"\n                  />\n                )}\n              </div>\n            </div>\n          )}\n\n          {/* Upload Progress */}\n          {uploadProgress > 0 && uploadProgress < 100 && (\n            <div>\n              <Label>Upload Progress</Label>\n              <Progress value={uploadProgress} className=\"mt-2\" data-testid=\"progress-upload\" />\n              <p className=\"text-sm text-muted-foreground mt-1\">{uploadProgress}%</p>\n            </div>\n          )}\n\n          {/* Common Fields */}\n          <div className=\"space-y-4\">\n            <div>\n              <Label htmlFor=\"title\">Video Title *</Label>\n              <Input\n                id=\"title\"\n                data-testid=\"input-title\"\n                placeholder=\"Enter video title\"\n                {...form.register(\"title\")}\n              />\n              {form.formState.errors.title && (\n                <p className=\"text-sm text-destructive mt-1\">\n                  {form.formState.errors.title.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"description\">Description *</Label>\n              <Textarea\n                id=\"description\"\n                data-testid=\"input-description\"\n                placeholder=\"Enter video description\"\n                rows={4}\n                {...form.register(\"description\")}\n              />\n              {form.formState.errors.description && (\n                <p className=\"text-sm text-destructive mt-1\">\n                  {form.formState.errors.description.message}\n                </p>\n              )}\n            </div>\n\n            <div>\n              <Label htmlFor=\"category\">Category *</Label>\n              <Select\n                value={form.watch(\"category\")}\n                onValueChange={(value) => form.setValue(\"category\", value as any)}\n              >\n                <SelectTrigger id=\"category\" data-testid=\"select-category\">\n                  <SelectValue placeholder=\"Select category\" />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"Tutorial\">Tutorial</SelectItem>\n                  <SelectItem value=\"Lecture\">Lecture</SelectItem>\n                  <SelectItem value=\"Demo\">Demo</SelectItem>\n                  <SelectItem value=\"Review\">Review</SelectItem>\n                </SelectContent>\n              </Select>\n              {form.formState.errors.category && (\n                <p className=\"text-sm text-destructive mt-1\">\n                  {form.formState.errors.category.message}\n                </p>\n              )}\n            </div>\n\n            {/* Playlist Selection */}\n            <div>\n              <div className=\"flex items-center justify-between mb-2\">\n                <Label>Playlist (Optional)</Label>\n                {!isCreatingNewPlaylist && (\n                  <Button\n                    type=\"button\"\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={() => setIsCreatingNewPlaylist(true)}\n                    data-testid=\"button-create-new-playlist\"\n                  >\n                    <Plus className=\"w-4 h-4 mr-1\" />\n                    New Playlist\n                  </Button>\n                )}\n              </div>\n\n              {isCreatingNewPlaylist ? (\n                <div className=\"space-y-3 p-4 border rounded-lg\">\n                  <div className=\"flex items-center justify-between\">\n                    <Label className=\"text-sm font-medium\">Create New Playlist</Label>\n                    <Button\n                      type=\"button\"\n                      variant=\"ghost\"\n                      size=\"sm\"\n                      onClick={() => {\n                        setIsCreatingNewPlaylist(false);\n                        form.setValue(\"newPlaylistName\", \"\");\n                        form.setValue(\"newPlaylistDescription\", \"\");\n                      }}\n                      data-testid=\"button-cancel-new-playlist\"\n                    >\n                      <X className=\"w-4 h-4\" />\n                    </Button>\n                  </div>\n                  <Input\n                    placeholder=\"Playlist name\"\n                    data-testid=\"input-new-playlist-name\"\n                    {...form.register(\"newPlaylistName\")}\n                  />\n                  <Input\n                    placeholder=\"Playlist description (optional)\"\n                    data-testid=\"input-new-playlist-description\"\n                    {...form.register(\"newPlaylistDescription\")}\n                  />\n                </div>\n              ) : (\n                <Select\n                  value={form.watch(\"playlistId\")}\n                  onValueChange={(value) => form.setValue(\"playlistId\", value)}\n                >\n                  <SelectTrigger data-testid=\"select-playlist\">\n                    <SelectValue placeholder=\"Select playlist or leave empty\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {playlists.map((playlist) => (\n                      <SelectItem key={playlist.id} value={playlist.id}>\n                        {playlist.name}\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              )}\n            </div>\n          </div>\n\n          {/* Submit Buttons */}\n          <div className=\"flex gap-3\">\n            <Button\n              type=\"submit\"\n              className=\"flex-1\"\n              disabled={\n                createVideoMutation.isPending ||\n                uploadVideoMutation.isPending ||\n                createPlaylistMutation.isPending\n              }\n              data-testid=\"button-submit\"\n            >\n              {uploadVideoMutation.isPending\n                ? \"Uploading...\"\n                : createVideoMutation.isPending\n                ? \"Adding...\"\n                : \"Add Video\"}\n            </Button>\n            <Button\n              type=\"button\"\n              variant=\"outline\"\n              onClick={handleReset}\n              data-testid=\"button-reset\"\n            >\n              Reset\n            </Button>\n          </div>\n        </form>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":19891},"client/src/pages/RoleRedirect.tsx":{"content":"import { useAuth } from '@/context/AuthContext';\nimport { Redirect } from 'wouter';\n\nexport default function RoleRedirect() {\n  const { user } = useAuth();\n\n  if (!user) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  switch (user.role) {\n    case 'superadmin':\n      return <Redirect to=\"/superadmin/dashboard\" />;\n    case 'admin':\n      return <Redirect to=\"/admin/dashboard\" />;\n    case 'tutor':\n      return <Redirect to=\"/tutor/dashboard\" />;\n    case 'student':\n      return <Redirect to=\"/student/dashboard\" />;\n    default:\n      return <Redirect to=\"/login\" />;\n  }\n}\n","size_bytes":577},"client/src/pages/tutor/TutorDashboardPage.tsx":{"content":"import { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { PlaySquare, Video, MessageSquare, DollarSign } from 'lucide-react';\nimport type { Playlist, Video as VideoType, Question, Subscription } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function TutorDashboardPage() {\n  const { user } = useAuth();\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const { data: videos = [] } = useQuery<VideoType[]>({\n    queryKey: ['/api/videos'],\n  });\n\n  const { data: questions = [] } = useQuery<Question[]>({\n    queryKey: ['/api/questions'],\n  });\n\n  const { data: subscriptions = [] } = useQuery<Subscription[]>({\n    queryKey: ['/api/subscriptions'],\n  });\n\n  const tutorPlaylists = playlists.filter(p => p.tutorName === user?.name);\n  const tutorPlaylistIds = tutorPlaylists.map(p => p.id);\n  \n  const tutorVideos = videos.filter(v => v.playlistId && tutorPlaylistIds.includes(v.playlistId));\n  const tutorVideoIds = tutorVideos.map(v => v.id);\n  \n  const tutorQuestions = questions.filter(q => tutorVideoIds.includes(q.videoId));\n  const tutorSubscriptions = subscriptions.filter(s => tutorPlaylistIds.includes(s.playlistId));\n  \n  const totalVideos = tutorVideos.length;\n  const totalLikes = tutorVideos.reduce((sum, v) => sum + (v.likes || 0), 0);\n  const unansweredQuestions = tutorQuestions.filter(q => !q.answer).length;\n  const totalEarnings = tutorSubscriptions.reduce((sum, s) => sum + s.amountPaid, 0);\n\n  const stats = [\n    {\n      title: 'Total Playlists',\n      value: tutorPlaylists.length.toString(),\n      description: `${tutorPlaylists.filter(p => p.isPublic).length} public courses`,\n      icon: PlaySquare,\n      iconBg: 'bg-blue-100 dark:bg-blue-900',\n      iconColor: 'text-blue-600 dark:text-blue-400',\n    },\n    {\n      title: 'Total Videos',\n      value: totalVideos.toString(),\n      description: `${totalLikes} total likes`,\n      icon: Video,\n      iconBg: 'bg-green-100 dark:bg-green-900',\n      iconColor: 'text-green-600 dark:text-green-400',\n    },\n    {\n      title: 'Comments & Q&A',\n      value: tutorQuestions.length.toString(),\n      description: `${unansweredQuestions} pending replies`,\n      icon: MessageSquare,\n      iconBg: 'bg-purple-100 dark:bg-purple-900',\n      iconColor: 'text-purple-600 dark:text-purple-400',\n    },\n    {\n      title: 'Total Earnings',\n      value: `â‚¹${totalEarnings.toLocaleString()}`,\n      description: 'From subscriptions',\n      icon: DollarSign,\n      iconBg: 'bg-orange-100 dark:bg-orange-900',\n      iconColor: 'text-orange-600 dark:text-orange-400',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          Welcome back, {user?.name || 'Tutor'}!\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Manage your courses and engage with students\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} data-testid={`card-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{stat.title}</CardTitle>\n                <div className={`h-8 w-8 rounded-full flex items-center justify-center ${stat.iconBg}`}>\n                  <Icon className={`h-4 w-4 ${stat.iconColor}`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{stat.value}</div>\n                <p className=\"text-xs text-muted-foreground\">{stat.description}</p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Recent Activity</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-2\">\n                <PlaySquare className=\"h-4 w-4 text-muted-foreground\" />\n                <span className=\"text-sm\">{tutorPlaylists.length} playlists created</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <Video className=\"h-4 w-4 text-muted-foreground\" />\n                <span className=\"text-sm\">{totalVideos} videos uploaded</span>\n              </div>\n              <div className=\"flex items-center gap-2\">\n                <MessageSquare className=\"h-4 w-4 text-muted-foreground\" />\n                <span className=\"text-sm\">{unansweredQuestions} questions pending</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Quick Actions</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <p className=\"text-sm text-muted-foreground mb-4\">\n              Use the sidebar to manage your teaching content:\n            </p>\n            <ul className=\"text-sm space-y-2 text-muted-foreground\">\n              <li>â€¢ Upload new videos and assign to playlists</li>\n              <li>â€¢ Create and manage playlists</li>\n              <li>â€¢ Respond to student questions</li>\n              <li>â€¢ Track your earnings</li>\n            </ul>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5631},"client/src/components/admin/DashboardCards.tsx":{"content":"import { Users, CreditCard, DollarSign, Clock } from \"lucide-react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\n\ninterface User {\n  status: string;\n  amountPaid: string;\n  dueDate: string;\n}\n\ninterface DashboardCardsProps {\n  users: User[];\n}\n\nexport function DashboardCards({ users }: DashboardCardsProps) {\n  const totalUsers = users.length;\n  const activeSubscriptions = users.filter(u => u.status === \"Active\").length;\n  \n  const totalRevenue = users.reduce((sum, user) => {\n    const amount = parseInt(user.amountPaid.replace(/[^0-9]/g, \"\"));\n    return sum + amount;\n  }, 0);\n  \n  const expiringSoon = users.filter(u => {\n    if (u.status !== \"Active\") return false;\n    const dueDate = new Date(u.dueDate);\n    const today = new Date();\n    const daysUntilDue = Math.ceil((dueDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\n    return daysUntilDue <= 30 && daysUntilDue > 0;\n  }).length;\n\n  const cards = [\n    {\n      title: \"Total Users\",\n      value: totalUsers.toString(),\n      icon: Users,\n      description: \"Registered users\",\n      color: \"text-blue-600\",\n      bgColor: \"bg-blue-100 dark:bg-blue-950\",\n      testId: \"card-total-users\"\n    },\n    {\n      title: \"Active Subscriptions\",\n      value: activeSubscriptions.toString(),\n      icon: CreditCard,\n      description: \"Currently active\",\n      color: \"text-green-600\",\n      bgColor: \"bg-green-100 dark:bg-green-950\",\n      testId: \"card-active-subscriptions\"\n    },\n    {\n      title: \"Total Revenue\",\n      value: `â‚¹${totalRevenue.toLocaleString()}`,\n      icon: DollarSign,\n      description: \"All time earnings\",\n      color: \"text-purple-600\",\n      bgColor: \"bg-purple-100 dark:bg-purple-950\",\n      testId: \"card-total-revenue\"\n    },\n    {\n      title: \"Expiring Soon\",\n      value: expiringSoon.toString(),\n      icon: Clock,\n      description: \"Next 30 days\",\n      color: \"text-orange-600\",\n      bgColor: \"bg-orange-100 dark:bg-orange-950\",\n      testId: \"card-expiring-soon\"\n    },\n  ];\n\n  return (\n    <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n      {cards.map((card) => {\n        const Icon = card.icon;\n        return (\n          <Card key={card.title} data-testid={card.testId}>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2 gap-2\">\n              <CardTitle className=\"text-sm font-medium\">{card.title}</CardTitle>\n              <div className={`${card.bgColor} ${card.color} p-2 rounded-lg`}>\n                <Icon className=\"h-4 w-4\" />\n              </div>\n            </CardHeader>\n            <CardContent>\n              <div className=\"text-2xl font-bold\" data-testid={`text-${card.testId}-value`}>\n                {card.value}\n              </div>\n              <p className=\"text-xs text-muted-foreground mt-1\">{card.description}</p>\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n}\n","size_bytes":2931},"client/src/pages/student/StudentDashboardPage.tsx":{"content":"import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { PlaySquare, BookOpen, TrendingUp, Clock } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\n\nconst stats = [\n  {\n    title: 'Enrolled Playlists',\n    value: '5',\n    description: '2 in progress',\n    icon: PlaySquare,\n    iconBg: 'bg-blue-100 dark:bg-blue-900',\n    iconColor: 'text-blue-600 dark:text-blue-400',\n  },\n  {\n    title: 'Completed Courses',\n    value: '3',\n    description: '+1 this month',\n    icon: BookOpen,\n    iconBg: 'bg-green-100 dark:bg-green-900',\n    iconColor: 'text-green-600 dark:text-green-400',\n  },\n  {\n    title: 'Learning Streak',\n    value: '12 days',\n    description: 'Keep it up!',\n    icon: TrendingUp,\n    iconBg: 'bg-purple-100 dark:bg-purple-900',\n    iconColor: 'text-purple-600 dark:text-purple-400',\n  },\n  {\n    title: 'Watch Time',\n    value: '24h',\n    description: 'This month',\n    icon: Clock,\n    iconBg: 'bg-orange-100 dark:bg-orange-900',\n    iconColor: 'text-orange-600 dark:text-orange-400',\n  },\n];\n\nconst continueWatching = [\n  {\n    id: 1,\n    title: 'React for Beginners',\n    thumbnail: 'https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=400&h=225&fit=crop',\n    progress: 65,\n    currentVideo: 'State and Lifecycle',\n  },\n  {\n    id: 2,\n    title: 'JavaScript Advanced',\n    thumbnail: 'https://images.unsplash.com/photo-1627398242454-45a1465c2479?w=400&h=225&fit=crop',\n    progress: 45,\n    currentVideo: 'Async/Await',\n  },\n];\n\nexport default function StudentDashboardPage() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          Student Dashboard\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Continue your learning journey\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} data-testid={`card-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{stat.title}</CardTitle>\n                <div className={`h-8 w-8 rounded-full flex items-center justify-center ${stat.iconBg}`}>\n                  <Icon className={`h-4 w-4 ${stat.iconColor}`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{stat.value}</div>\n                <p className=\"text-xs text-muted-foreground\">{stat.description}</p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Continue Watching</CardTitle>\n          <CardDescription>Pick up where you left off</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid gap-4 md:grid-cols-2\">\n            {continueWatching.map((course) => (\n              <Card key={course.id} className=\"overflow-hidden\">\n                <div className=\"aspect-video bg-muted relative\">\n                  <img\n                    src={course.thumbnail}\n                    alt={course.title}\n                    className=\"w-full h-full object-cover\"\n                  />\n                </div>\n                <CardContent className=\"p-4\">\n                  <h3 className=\"font-semibold mb-1\">{course.title}</h3>\n                  <p className=\"text-sm text-muted-foreground mb-3\">\n                    Current: {course.currentVideo}\n                  </p>\n                  <div className=\"space-y-2\">\n                    <Progress value={course.progress} className=\"h-2\" />\n                    <div className=\"flex items-center justify-between text-xs text-muted-foreground\">\n                      <span>{course.progress}% complete</span>\n                      <Button size=\"sm\" variant=\"outline\">\n                        Continue\n                      </Button>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":4355},"client/src/components/admin/TopNavbar.tsx":{"content":"import { Search, Menu, User, LogOut } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from \"@/components/ui/dropdown-menu\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\n\ninterface TopNavbarProps {\n  toggleSidebar: () => void;\n}\n\nexport function TopNavbar({ toggleSidebar }: TopNavbarProps) {\n  return (\n    <header className=\"h-16 border-b bg-card flex items-center px-6 gap-4\" data-testid=\"header-admin\">\n      <Button\n        variant=\"ghost\"\n        size=\"icon\"\n        className=\"lg:hidden\"\n        onClick={toggleSidebar}\n        data-testid=\"button-toggle-sidebar\"\n      >\n        <Menu className=\"h-5 w-5\" />\n      </Button>\n      \n      <div className=\"flex-1 flex items-center gap-4\">\n        <h1 className=\"text-lg font-bold hidden lg:block\" data-testid=\"text-navbar-title\">\n          Admin Dashboard\n        </h1>\n        <div className=\"relative max-w-md flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            type=\"search\"\n            placeholder=\"Search users, subscriptions...\"\n            className=\"pl-10\"\n            data-testid=\"input-search\"\n          />\n        </div>\n      </div>\n      \n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button variant=\"ghost\" className=\"gap-2\" data-testid=\"button-profile-menu\">\n            <Avatar className=\"h-8 w-8\">\n              <AvatarFallback className=\"bg-primary text-primary-foreground\">AD</AvatarFallback>\n            </Avatar>\n            <div className=\"hidden md:block text-left\">\n              <p className=\"text-sm font-medium\">Admin User</p>\n              <p className=\"text-xs text-muted-foreground\">admin@lms.com</p>\n            </div>\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"end\" className=\"w-56\">\n          <DropdownMenuLabel>My Account</DropdownMenuLabel>\n          <DropdownMenuSeparator />\n          <DropdownMenuItem data-testid=\"menu-item-profile\">\n            <User className=\"mr-2 h-4 w-4\" />\n            Profile Settings\n          </DropdownMenuItem>\n          <DropdownMenuSeparator />\n          <DropdownMenuItem className=\"text-red-600\" data-testid=\"menu-item-logout\">\n            <LogOut className=\"mr-2 h-4 w-4\" />\n            Logout\n          </DropdownMenuItem>\n        </DropdownMenuContent>\n      </DropdownMenu>\n    </header>\n  );\n}\n","size_bytes":2610},"client/src/components/QuestionAnswerSection.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation, useQueryClient } from \"@tanstack/react-query\";\nimport { MessageSquare, ChevronDown, ChevronUp } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport type { Question } from \"@shared/schema\";\nimport { formatDistanceToNow } from \"date-fns\";\nimport {\n  Collapsible,\n  CollapsibleContent,\n  CollapsibleTrigger,\n} from \"@/components/ui/collapsible\";\n\ninterface QuestionAnswerSectionProps {\n  videoId: string;\n  isTutor?: boolean;\n}\n\nexport default function QuestionAnswerSection({ videoId, isTutor = false }: QuestionAnswerSectionProps) {\n  const { toast } = useToast();\n  const queryClient = useQueryClient();\n  const [questionText, setQuestionText] = useState(\"\");\n  const [answerText, setAnswerText] = useState<Record<string, string>>({});\n  const [expandedQuestions, setExpandedQuestions] = useState<Set<string>>(new Set());\n\n  const { data: questions = [], isLoading } = useQuery<Question[]>({\n    queryKey: [\"/api/videos\", videoId, \"questions\"],\n    queryFn: async () => {\n      const response = await fetch(`/api/videos/${videoId}/questions`);\n      if (!response.ok) throw new Error(\"Failed to fetch questions\");\n      return response.json();\n    },\n    staleTime: 0,\n  });\n\n  const askQuestionMutation = useMutation({\n    mutationFn: async (text: string) => {\n      const response = await apiRequest(\"POST\", \"/api/questions\", { videoId, text });\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.refetchQueries({ queryKey: [\"/api/videos\", videoId, \"questions\"] });\n      setQuestionText(\"\");\n      toast({\n        title: \"Success\",\n        description: \"Question posted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to post question\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const answerQuestionMutation = useMutation({\n    mutationFn: async ({ questionId, answer }: { questionId: string; answer: string }) => {\n      const response = await apiRequest(\"POST\", `/api/questions/${questionId}/answer`, { answer });\n      return await response.json();\n    },\n    onSuccess: (_, variables) => {\n      queryClient.refetchQueries({ queryKey: [\"/api/videos\", videoId, \"questions\"] });\n      setAnswerText(prev => {\n        const newState = { ...prev };\n        delete newState[variables.questionId];\n        return newState;\n      });\n      toast({\n        title: \"Success\",\n        description: \"Answer posted successfully\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to post answer\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleAskQuestion = () => {\n    if (!questionText.trim()) return;\n    askQuestionMutation.mutate(questionText);\n  };\n\n  const handleAnswerQuestion = (questionId: string) => {\n    const answer = answerText[questionId];\n    if (!answer?.trim()) return;\n    answerQuestionMutation.mutate({ questionId, answer });\n  };\n\n  const toggleQuestion = (questionId: string, open: boolean) => {\n    setExpandedQuestions(prev => {\n      const newSet = new Set(prev);\n      if (open) {\n        newSet.add(questionId);\n      } else {\n        newSet.delete(questionId);\n      }\n      return newSet;\n    });\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 text-lg font-semibold\">\n          <MessageSquare className=\"h-5 w-5\" />\n          <span>Questions & Answers</span>\n        </div>\n        <p className=\"text-sm text-muted-foreground\">Loading questions...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 text-lg font-semibold\">\n        <MessageSquare className=\"h-5 w-5\" />\n        <span>Questions & Answers</span>\n      </div>\n\n      {/* Ask Question Form (visible to all) */}\n      <div className=\"space-y-2\">\n        <Textarea\n          placeholder=\"Ask a question about this video...\"\n          value={questionText}\n          onChange={(e) => setQuestionText(e.target.value)}\n          className=\"resize-none\"\n          rows={3}\n          data-testid={`input-question-text-${videoId}`}\n        />\n        <Button\n          onClick={handleAskQuestion}\n          disabled={askQuestionMutation.isPending || !questionText.trim()}\n          size=\"sm\"\n          data-testid={`button-submit-question-${videoId}`}\n        >\n          {askQuestionMutation.isPending ? \"Posting...\" : \"Post Question\"}\n        </Button>\n      </div>\n\n      {/* Questions List */}\n      {questions.length === 0 ? (\n        <p className=\"text-sm text-muted-foreground\">\n          No questions yet. Be the first to ask!\n        </p>\n      ) : (\n        <div className=\"space-y-3\">\n          {questions.map((question) => {\n            const isExpanded = expandedQuestions.has(question.id);\n            \n            return (\n              <div\n                key={question.id}\n                className=\"border rounded-md p-4\"\n                data-testid={`card-question-${question.id}`}\n              >\n                <Collapsible\n                  open={isExpanded}\n                  onOpenChange={(open) => toggleQuestion(question.id, open)}\n                >\n                  <CollapsibleTrigger asChild>\n                    <button \n                      className=\"w-full flex items-start justify-between gap-2 text-left hover-elevate active-elevate-2 p-2 rounded-md transition-all\"\n                      data-testid={`button-toggle-question-${question.id}`}\n                    >\n                      <div className=\"flex-1 space-y-1\">\n                        <p className=\"font-medium text-sm\">{question.text}</p>\n                        <p className=\"text-xs text-muted-foreground\">\n                          {formatDistanceToNow(new Date(question.createdAt), { addSuffix: true })}\n                        </p>\n                      </div>\n                      {isExpanded ? (\n                        <ChevronUp className=\"h-4 w-4 shrink-0 mt-1\" />\n                      ) : (\n                        <ChevronDown className=\"h-4 w-4 shrink-0 mt-1\" />\n                      )}\n                    </button>\n                  </CollapsibleTrigger>\n\n                  <CollapsibleContent className=\"pt-3\">\n                    <div className=\"space-y-3\">\n                      {question.answer ? (\n                        <div\n                          className=\"bg-muted/50 rounded-md p-3 space-y-2\"\n                          data-testid={`section-answer-${question.id}`}\n                        >\n                          <p className=\"text-xs font-semibold text-primary\">Answer:</p>\n                          <p className=\"text-sm\">{question.answer}</p>\n                          {question.answeredAt && (\n                            <p className=\"text-xs text-muted-foreground\">\n                              Answered {formatDistanceToNow(new Date(question.answeredAt), { addSuffix: true })}\n                            </p>\n                          )}\n                        </div>\n                      ) : (\n                        isTutor && (\n                          <div className=\"space-y-2\">\n                            <p className=\"text-xs text-muted-foreground\">No answer yet</p>\n                            <Textarea\n                              placeholder=\"Type your answer...\"\n                              value={answerText[question.id] || \"\"}\n                              onChange={(e) =>\n                                setAnswerText(prev => ({ ...prev, [question.id]: e.target.value }))\n                              }\n                              className=\"resize-none\"\n                              rows={3}\n                              data-testid={`input-answer-text-${question.id}`}\n                            />\n                            <Button\n                              onClick={() => handleAnswerQuestion(question.id)}\n                              disabled={answerQuestionMutation.isPending || !answerText[question.id]?.trim()}\n                              size=\"sm\"\n                              data-testid={`button-submit-answer-${question.id}`}\n                            >\n                              {answerQuestionMutation.isPending ? \"Posting...\" : \"Post Answer\"}\n                            </Button>\n                          </div>\n                        )\n                      )}\n                    </div>\n                  </CollapsibleContent>\n                </Collapsible>\n              </div>\n            );\n          })}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":8818},"client/src/components/admin/UserTable.tsx":{"content":"import { useState } from \"react\";\nimport { Search, Download, ChevronLeft, ChevronRight } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Badge } from \"@/components/ui/badge\";\nimport {\n  Select,\n  SelectContent,\n  SelectItem,\n  SelectTrigger,\n  SelectValue,\n} from \"@/components/ui/select\";\nimport {\n  Table,\n  TableBody,\n  TableCell,\n  TableHead,\n  TableHeader,\n  TableRow,\n} from \"@/components/ui/table\";\nimport { Card } from \"@/components/ui/card\";\nimport { PlaylistModal } from \"./PlaylistModal\";\n\ninterface Video {\n  id: number;\n  title: string;\n  duration: string;\n}\n\ninterface User {\n  id: number;\n  name: string;\n  email: string;\n  playlist: string;\n  dueDate: string;\n  amountPaid: string;\n  invoiceUrl: string;\n  status: string;\n  videos: Video[];\n  progress: number;\n}\n\ninterface UserTableProps {\n  users: User[];\n}\n\nexport function UserTable({ users }: UserTableProps) {\n  const [searchQuery, setSearchQuery] = useState(\"\");\n  const [statusFilter, setStatusFilter] = useState(\"all\");\n  const [currentPage, setCurrentPage] = useState(1);\n  const [selectedUser, setSelectedUser] = useState<User | null>(null);\n  const itemsPerPage = 10;\n\n  const filteredUsers = users.filter((user) => {\n    const matchesSearch = \n      user.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      user.email.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      user.playlist.toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesStatus = \n      statusFilter === \"all\" || \n      user.status.toLowerCase() === statusFilter.toLowerCase();\n    \n    return matchesSearch && matchesStatus;\n  });\n\n  const totalPages = Math.ceil(filteredUsers.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const paginatedUsers = filteredUsers.slice(startIndex, endIndex);\n\n  const handleDownloadInvoice = (user: User) => {\n    const blob = new Blob([`Invoice for ${user.name}\\nAmount: ${user.amountPaid}`], { type: \"text/plain\" });\n    const url = URL.createObjectURL(blob);\n    const a = document.createElement(\"a\");\n    a.href = url;\n    a.download = `invoice-${user.id}.txt`;\n    document.body.appendChild(a);\n    a.click();\n    document.body.removeChild(a);\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <>\n      <Card className=\"p-6\">\n        <div className=\"space-y-4\">\n          <div className=\"flex flex-col sm:flex-row gap-4\">\n            <div className=\"relative flex-1\">\n              <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n              <Input\n                placeholder=\"Search by name, email, or playlist...\"\n                value={searchQuery}\n                onChange={(e) => {\n                  setSearchQuery(e.target.value);\n                  setCurrentPage(1);\n                }}\n                className=\"pl-10\"\n                data-testid=\"input-search-users\"\n              />\n            </div>\n            \n            <Select value={statusFilter} onValueChange={(value) => {\n              setStatusFilter(value);\n              setCurrentPage(1);\n            }}>\n              <SelectTrigger className=\"w-full sm:w-48\" data-testid=\"select-filter-status\">\n                <SelectValue placeholder=\"Filter by status\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Status</SelectItem>\n                <SelectItem value=\"active\">Active</SelectItem>\n                <SelectItem value=\"expired\">Expired</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n\n          <div className=\"rounded-md border\">\n            <Table>\n              <TableHeader>\n                <TableRow>\n                  <TableHead>User Name</TableHead>\n                  <TableHead>Email</TableHead>\n                  <TableHead>Playlist Subscribed</TableHead>\n                  <TableHead>Due Date</TableHead>\n                  <TableHead>Amount Paid</TableHead>\n                  <TableHead>Invoice</TableHead>\n                  <TableHead>Status</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {paginatedUsers.length === 0 ? (\n                  <TableRow>\n                    <TableCell colSpan={7} className=\"text-center py-8 text-muted-foreground\">\n                      No users found matching your criteria\n                    </TableCell>\n                  </TableRow>\n                ) : (\n                  paginatedUsers.map((user) => (\n                    <TableRow key={user.id} data-testid={`row-user-${user.id}`}>\n                      <TableCell className=\"font-medium\" data-testid={`text-user-name-${user.id}`}>\n                        {user.name}\n                      </TableCell>\n                      <TableCell className=\"text-muted-foreground\" data-testid={`text-user-email-${user.id}`}>\n                        {user.email}\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"ghost\"\n                          className=\"p-0 h-auto font-normal text-primary hover:underline\"\n                          onClick={() => setSelectedUser(user)}\n                          data-testid={`button-playlist-${user.id}`}\n                        >\n                          {user.playlist}\n                        </Button>\n                      </TableCell>\n                      <TableCell data-testid={`text-due-date-${user.id}`}>\n                        {new Date(user.dueDate).toLocaleDateString('en-IN', {\n                          year: 'numeric',\n                          month: 'short',\n                          day: 'numeric'\n                        })}\n                      </TableCell>\n                      <TableCell className=\"font-medium\" data-testid={`text-amount-${user.id}`}>\n                        {user.amountPaid}\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => handleDownloadInvoice(user)}\n                          data-testid={`button-download-invoice-${user.id}`}\n                        >\n                          <Download className=\"h-4 w-4 mr-2\" />\n                          Download\n                        </Button>\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant={user.status === \"Active\" ? \"default\" : \"secondary\"}\n                          className={\n                            user.status === \"Active\"\n                              ? \"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-300\"\n                              : \"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-300\"\n                          }\n                          data-testid={`badge-status-${user.id}`}\n                        >\n                          {user.status}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))\n                )}\n              </TableBody>\n            </Table>\n          </div>\n\n          {filteredUsers.length > 0 && (\n            <div className=\"flex items-center justify-between\">\n              <p className=\"text-sm text-muted-foreground\" data-testid=\"text-pagination-info\">\n                Showing {startIndex + 1}-{Math.min(endIndex, filteredUsers.length)} of {filteredUsers.length} users\n              </p>\n              \n              <div className=\"flex items-center gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n                  disabled={currentPage === 1}\n                  data-testid=\"button-prev-page\"\n                >\n                  <ChevronLeft className=\"h-4 w-4 mr-1\" />\n                  Previous\n                </Button>\n                \n                <div className=\"flex items-center gap-1\">\n                  {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                    let pageNum;\n                    if (totalPages <= 5) {\n                      pageNum = i + 1;\n                    } else if (currentPage <= 3) {\n                      pageNum = i + 1;\n                    } else if (currentPage >= totalPages - 2) {\n                      pageNum = totalPages - 4 + i;\n                    } else {\n                      pageNum = currentPage - 2 + i;\n                    }\n                    \n                    return (\n                      <Button\n                        key={pageNum}\n                        variant={currentPage === pageNum ? \"default\" : \"outline\"}\n                        size=\"sm\"\n                        className=\"w-9\"\n                        onClick={() => setCurrentPage(pageNum)}\n                        data-testid={`button-page-${pageNum}`}\n                      >\n                        {pageNum}\n                      </Button>\n                    );\n                  })}\n                </div>\n                \n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n                  disabled={currentPage === totalPages}\n                  data-testid=\"button-next-page\"\n                >\n                  Next\n                  <ChevronRight className=\"h-4 w-4 ml-1\" />\n                </Button>\n              </div>\n            </div>\n          )}\n        </div>\n      </Card>\n\n      {selectedUser && (\n        <PlaylistModal\n          user={selectedUser}\n          isOpen={!!selectedUser}\n          onClose={() => setSelectedUser(null)}\n        />\n      )}\n    </>\n  );\n}\n","size_bytes":9968},"client/src/components/VideoPlaylistManager.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { insertVideoSchema, insertPlaylistSchema, type Playlist, type Video } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from \"@/components/ui/accordion\";\nimport { Trash2, Plus } from \"lucide-react\";\n\ninterface PlaylistWithVideos extends Playlist {\n  videos: Video[];\n}\n\nconst addVideoFormSchema = insertVideoSchema.extend({\n  playlistId: z.string().optional(),\n  newPlaylistName: z.string().optional(),\n});\n\ntype AddVideoFormData = z.infer<typeof addVideoFormSchema>;\n\nexport default function VideoPlaylistManager() {\n  const { toast } = useToast();\n  const [showNewPlaylistInput, setShowNewPlaylistInput] = useState(false);\n\n  const { data: playlists = [], isLoading } = useQuery<PlaylistWithVideos[]>({\n    queryKey: [\"/api/playlists\"],\n  });\n\n  const form = useForm<AddVideoFormData>({\n    resolver: zodResolver(addVideoFormSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      videoUrl: \"\",\n      category: \"\",\n      playlistId: \"\",\n      newPlaylistName: \"\",\n    },\n  });\n\n  const createPlaylistMutation = useMutation({\n    mutationFn: async (data: { name: string; description?: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/playlists\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/playlists\"] });\n    },\n  });\n\n  const createVideoMutation = useMutation({\n    mutationFn: async (data: { title: string; description: string; videoUrl: string; category: string; playlistId?: string }) => {\n      const response = await apiRequest(\"POST\", \"/api/videos\", data);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/playlists\"] });\n      form.reset();\n      setShowNewPlaylistInput(false);\n      toast({\n        title: \"Success\",\n        description: \"Video added successfully!\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to add video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const deleteVideoMutation = useMutation({\n    mutationFn: async (videoId: string) => {\n      const response = await apiRequest(\"DELETE\", `/api/videos/${videoId}`);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/playlists\"] });\n      toast({\n        title: \"Success\",\n        description: \"Video deleted successfully!\",\n      });\n    },\n    onError: () => {\n      toast({\n        title: \"Error\",\n        description: \"Failed to delete video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const convertDriveUrl = (url: string): string => {\n    try {\n      const urlObj = new URL(url);\n      if (urlObj.hostname.includes(\"drive.google.com\")) {\n        const fileIdMatch = url.match(/\\/file\\/d\\/([a-zA-Z0-9_-]+)/) || url.match(/[?&]id=([a-zA-Z0-9_-]+)/);\n        if (fileIdMatch && fileIdMatch[1]) {\n          return `https://drive.google.com/uc?export=preview&id=${fileIdMatch[1]}`;\n        }\n      }\n      return url;\n    } catch {\n      return url;\n    }\n  };\n\n  const onSubmit = async (data: AddVideoFormData) => {\n    try {\n      let playlistId = data.playlistId;\n\n      if (showNewPlaylistInput && data.newPlaylistName) {\n        const newPlaylist = await createPlaylistMutation.mutateAsync({\n          name: data.newPlaylistName,\n          description: \"\",\n        });\n        playlistId = newPlaylist.id;\n      }\n\n      const convertedUrl = convertDriveUrl(data.videoUrl);\n\n      await createVideoMutation.mutateAsync({\n        title: data.title,\n        description: data.description,\n        videoUrl: convertedUrl,\n        category: data.category,\n        playlistId: playlistId || undefined,\n      });\n    } catch (error) {\n      console.error(\"Error adding video:\", error);\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"flex items-center justify-center py-12\">\n        <p className=\"text-muted-foreground\">Loading playlists...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-8\">\n      <Card data-testid=\"card-add-video\">\n        <CardHeader>\n          <CardTitle>Add Video to Playlist</CardTitle>\n          <CardDescription>Upload a new video and assign it to a playlist</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"title\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Video Title</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Enter video title\" data-testid=\"input-video-title\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Description</FormLabel>\n                    <FormControl>\n                      <Textarea {...field} placeholder=\"Enter video description\" rows={3} data-testid=\"input-video-description\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"videoUrl\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Video URL (from Drive)</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"https://drive.google.com/file/d/FILE_ID/view\" data-testid=\"input-video-url\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"category\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Category</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-category\">\n                          <SelectValue placeholder=\"Select a category\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"Tutorial\">Tutorial</SelectItem>\n                        <SelectItem value=\"Lecture\">Lecture</SelectItem>\n                        <SelectItem value=\"Demo\">Demo</SelectItem>\n                        <SelectItem value=\"Review\">Review</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              {!showNewPlaylistInput ? (\n                <>\n                  <FormField\n                    control={form.control}\n                    name=\"playlistId\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Select Playlist</FormLabel>\n                        <Select onValueChange={field.onChange} value={field.value}>\n                          <FormControl>\n                            <SelectTrigger data-testid=\"select-playlist\">\n                              <SelectValue placeholder=\"Select a playlist\" />\n                            </SelectTrigger>\n                          </FormControl>\n                          <SelectContent>\n                            {playlists.map((playlist) => (\n                              <SelectItem key={playlist.id} value={playlist.id}>\n                                {playlist.name}\n                              </SelectItem>\n                            ))}\n                          </SelectContent>\n                        </Select>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowNewPlaylistInput(true)}\n                    className=\"w-full\"\n                    data-testid=\"button-create-new-playlist\"\n                  >\n                    <Plus className=\"w-4 h-4 mr-2\" />\n                    Create New Playlist\n                  </Button>\n                </>\n              ) : (\n                <>\n                  <FormField\n                    control={form.control}\n                    name=\"newPlaylistName\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>New Playlist Name</FormLabel>\n                        <FormControl>\n                          <Input {...field} placeholder=\"Enter new playlist name\" data-testid=\"input-new-playlist-name\" />\n                        </FormControl>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                  <Button\n                    type=\"button\"\n                    variant=\"outline\"\n                    onClick={() => setShowNewPlaylistInput(false)}\n                    className=\"w-full\"\n                    data-testid=\"button-cancel-new-playlist\"\n                  >\n                    Cancel - Select Existing Playlist\n                  </Button>\n                </>\n              )}\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={createVideoMutation.isPending || createPlaylistMutation.isPending}\n                data-testid=\"button-add-video\"\n              >\n                {createVideoMutation.isPending || createPlaylistMutation.isPending ? \"Adding...\" : \"Add Video\"}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <div className=\"space-y-4\">\n        <h2 className=\"text-2xl font-bold\" data-testid=\"text-playlists-title\">Playlists</h2>\n        {playlists.length === 0 ? (\n          <Card className=\"p-8 text-center\">\n            <p className=\"text-muted-foreground\">No playlists yet. Create one when adding a video!</p>\n          </Card>\n        ) : (\n          <Accordion type=\"single\" collapsible className=\"space-y-4\">\n            {playlists.map((playlist) => (\n              <AccordionItem key={playlist.id} value={playlist.id} className=\"border rounded-lg\">\n                <AccordionTrigger className=\"px-6 hover:no-underline\" data-testid={`accordion-trigger-${playlist.id}`}>\n                  <div className=\"flex flex-col items-start\">\n                    <h3 className=\"text-lg font-semibold\">{playlist.name}</h3>\n                    <p className=\"text-sm text-muted-foreground\">\n                      {playlist.videos.length} {playlist.videos.length === 1 ? \"video\" : \"videos\"}\n                    </p>\n                  </div>\n                </AccordionTrigger>\n                <AccordionContent className=\"px-6 pb-6\">\n                  {playlist.videos.length === 0 ? (\n                    <p className=\"text-muted-foreground text-center py-4\">No videos in this playlist yet</p>\n                  ) : (\n                    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                      {playlist.videos.map((video) => (\n                        <Card key={video.id} data-testid={`card-playlist-video-${video.id}`}>\n                          <div className=\"aspect-video bg-muted overflow-hidden\">\n                            <iframe\n                              src={video.videoUrl}\n                              className=\"w-full h-full\"\n                              title={video.title}\n                              allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                              allowFullScreen\n                            />\n                          </div>\n                          <CardHeader>\n                            <div className=\"flex items-start justify-between gap-2\">\n                              <div className=\"flex-1 min-w-0\">\n                                <CardTitle className=\"text-base line-clamp-1\">{video.title}</CardTitle>\n                                <CardDescription className=\"line-clamp-2\">{video.description}</CardDescription>\n                              </div>\n                              <Button\n                                variant=\"ghost\"\n                                size=\"icon\"\n                                onClick={() => deleteVideoMutation.mutate(video.id)}\n                                disabled={deleteVideoMutation.isPending}\n                                data-testid={`button-delete-video-${video.id}`}\n                              >\n                                <Trash2 className=\"w-4 h-4 text-destructive\" />\n                              </Button>\n                            </div>\n                          </CardHeader>\n                        </Card>\n                      ))}\n                    </div>\n                  )}\n                </AccordionContent>\n              </AccordionItem>\n            ))}\n          </Accordion>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":14421},"client/src/components/ProtectedRoute.tsx":{"content":"import { useAuth } from '@/context/AuthContext';\nimport { Redirect } from 'wouter';\nimport { ReactNode } from 'react';\nimport type { UserRole } from '@/context/AuthContext';\n\ninterface ProtectedRouteProps {\n  children: ReactNode;\n  allowedRoles?: UserRole[];\n}\n\nexport function ProtectedRoute({ children, allowedRoles }: ProtectedRouteProps) {\n  const { user, isAuthenticated } = useAuth();\n\n  if (!isAuthenticated) {\n    return <Redirect to=\"/login\" />;\n  }\n\n  if (allowedRoles && user && !allowedRoles.includes(user.role)) {\n    // Redirect to user's role-specific dashboard instead of /dashboard to avoid redirect loops\n    const userDashboard = `/${user.role}/dashboard`;\n    return <Redirect to={userDashboard} />;\n  }\n\n  return <>{children}</>;\n}\n","size_bytes":753},"client/src/components/layout/Sidebar.tsx":{"content":"import { Link, useLocation } from 'wouter';\nimport { useAuth } from '@/context/AuthContext';\nimport { usePermissions } from '@/context/PermissionsContext';\nimport { Button } from '@/components/ui/button';\nimport {\n  LayoutDashboard,\n  Users,\n  Video,\n  CreditCard,\n  FileText,\n  BarChart3,\n  Settings,\n  PlaySquare,\n  Upload,\n  MessageSquare,\n  DollarSign,\n  UserCircle,\n  Compass,\n  BookOpen,\n  HelpCircle,\n  ChevronLeft,\n  ChevronRight,\n  Shield\n} from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useState } from 'react';\n\ninterface SidebarItem {\n  label: string;\n  icon: React.ComponentType<{ className?: string }>;\n  path: string;\n}\n\nconst adminMenuItems: SidebarItem[] = [\n  { label: 'Dashboard', icon: LayoutDashboard, path: '/admin/dashboard' },\n  { label: 'Users', icon: Users, path: '/admin/users' },\n  { label: 'Playlists', icon: PlaySquare, path: '/admin/playlists' },\n  { label: 'Payments', icon: CreditCard, path: '/admin/payments' },\n  { label: 'Invoices', icon: FileText, path: '/admin/invoices' },\n  { label: 'Analytics', icon: BarChart3, path: '/admin/analytics' },\n  { label: 'Settings', icon: Settings, path: '/admin/settings' },\n];\n\nconst tutorMenuItems: SidebarItem[] = [\n  { label: 'Dashboard', icon: LayoutDashboard, path: '/tutor/dashboard' },\n  { label: 'My Playlists', icon: PlaySquare, path: '/tutor/playlists' },\n  { label: 'Upload Videos', icon: Upload, path: '/tutor/upload' },\n  { label: 'Comments & Q&A', icon: MessageSquare, path: '/tutor/comments' },\n  { label: 'Earnings', icon: DollarSign, path: '/tutor/earnings' },\n  { label: 'Profile', icon: UserCircle, path: '/tutor/profile' },\n];\n\nconst studentMenuItems: SidebarItem[] = [\n  { label: 'Dashboard', icon: LayoutDashboard, path: '/student/dashboard' },\n  { label: 'My Playlists', icon: PlaySquare, path: '/student/playlists' },\n  { label: 'Explore', icon: Compass, path: '/student/explore' },\n  { label: 'Subscriptions', icon: CreditCard, path: '/student/subscriptions' },\n  { label: 'Q&A', icon: HelpCircle, path: '/student/qna' },\n  { label: 'Profile', icon: UserCircle, path: '/student/profile' },\n];\n\nconst superadminMenuItems: SidebarItem[] = [\n  { label: 'Dashboard', icon: LayoutDashboard, path: '/superadmin/dashboard' },\n  { label: 'Access Control', icon: Shield, path: '/superadmin/access-control' },\n  { label: 'All Users', icon: Users, path: '/superadmin/users' },\n  { label: 'System Logs', icon: FileText, path: '/superadmin/logs' },\n  { label: 'Settings', icon: Settings, path: '/superadmin/settings' },\n];\n\nexport function Sidebar() {\n  const [location] = useLocation();\n  const { user } = useAuth();\n  const { hasPermission } = usePermissions();\n  const [isCollapsed, setIsCollapsed] = useState(false);\n\n  if (!user) return null;\n\n  let menuItems: SidebarItem[];\n  \n  if (user.role === 'superadmin') {\n    menuItems = superadminMenuItems;\n  } else if (user.role === 'admin') {\n    menuItems = adminMenuItems.filter(item => hasPermission('admin', item.label));\n  } else if (user.role === 'tutor') {\n    menuItems = tutorMenuItems.filter(item => hasPermission('tutor', item.label));\n  } else {\n    menuItems = studentMenuItems.filter(item => hasPermission('student', item.label));\n  }\n\n  return (\n    <aside\n      className={cn(\n        'bg-card border-r flex flex-col transition-all duration-300 h-screen sticky top-0',\n        isCollapsed ? 'w-16' : 'w-64'\n      )}\n      data-testid=\"sidebar-main\"\n    >\n      <div className=\"p-4 border-b flex items-center justify-between\">\n        {!isCollapsed && (\n          <div className=\"flex items-center gap-2\">\n            <BookOpen className=\"h-6 w-6 text-primary\" />\n            <h2 className=\"font-bold text-lg\">LMS</h2>\n          </div>\n        )}\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={() => setIsCollapsed(!isCollapsed)}\n          data-testid=\"button-toggle-sidebar\"\n          className={cn(isCollapsed && 'mx-auto')}\n        >\n          {isCollapsed ? (\n            <ChevronRight className=\"h-4 w-4\" />\n          ) : (\n            <ChevronLeft className=\"h-4 w-4\" />\n          )}\n        </Button>\n      </div>\n\n      <nav className=\"flex-1 p-2 overflow-y-auto\">\n        <div className=\"space-y-1\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = location === item.path;\n\n            return (\n              <Link key={item.path} href={item.path}>\n                <Button\n                  variant={isActive ? 'secondary' : 'ghost'}\n                  className={cn(\n                    'w-full justify-start gap-3',\n                    isCollapsed && 'justify-center px-2'\n                  )}\n                  data-testid={`button-nav-${item.label.toLowerCase().replace(/\\s+/g, '-')}`}\n                >\n                  <Icon className=\"h-5 w-5 shrink-0\" />\n                  {!isCollapsed && <span>{item.label}</span>}\n                </Button>\n              </Link>\n            );\n          })}\n        </div>\n      </nav>\n\n      <div className=\"p-4 border-t\">\n        {!isCollapsed && (\n          <div className=\"text-xs text-muted-foreground\">\n            <p className=\"font-medium\">{user.name}</p>\n            <p className=\"capitalize\">{user.role}</p>\n          </div>\n        )}\n      </div>\n    </aside>\n  );\n}\n","size_bytes":5290},"client/src/context/AuthContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode, useCallback } from 'react';\nimport apiClient, { setTokens, getAccessToken as getToken } from '@/lib/axios';\nimport axios from 'axios';\n\nexport type UserRole = 'superadmin' | 'admin' | 'tutor' | 'student';\n\nexport interface User {\n  id: string;\n  name: string;\n  email: string;\n  role: UserRole;\n  status?: string;\n  createdAt?: string;\n}\n\ninterface AuthContextType {\n  user: User | null;\n  login: (email: string, password: string) => Promise<void>;\n  logout: () => Promise<void>;\n  isAuthenticated: boolean;\n  isLoading: boolean;\n}\n\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\n\nexport function AuthProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<User | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const loadUserProfile = useCallback(async () => {\n    const token = getToken();\n    if (!token) {\n      setIsLoading(false);\n      return;\n    }\n\n    try {\n      const response = await apiClient.get('/users/profile');\n      setUser(response.data);\n    } catch (error) {\n      console.error('Failed to load user profile:', error);\n      setUser(null);\n    } finally {\n      setIsLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    const storedAccessToken = localStorage.getItem('lms_access_token');\n    const storedRefreshToken = localStorage.getItem('lms_refresh_token');\n\n    if (storedAccessToken && storedRefreshToken) {\n      setTokens(storedAccessToken, storedRefreshToken);\n      loadUserProfile();\n    } else {\n      setIsLoading(false);\n    }\n  }, [loadUserProfile]);\n\n  const login = async (email: string, password: string) => {\n    try {\n      setIsLoading(true);\n      const response = await axios.post('/api/auth/login', {\n        email,\n        password,\n      });\n\n      const { user: userData, accessToken: newAccessToken, refreshToken: newRefreshToken } = response.data;\n\n      setTokens(newAccessToken, newRefreshToken);\n      localStorage.setItem('lms_access_token', newAccessToken);\n      localStorage.setItem('lms_refresh_token', newRefreshToken);\n\n      setUser(userData);\n    } catch (error) {\n      console.error('Login failed:', error);\n      throw error;\n    } finally {\n      setIsLoading(false);\n    }\n  };\n\n  const logout = async () => {\n    try {\n      const token = getToken();\n      if (token) {\n        await apiClient.post('/auth/logout');\n      }\n    } catch (error) {\n      console.error('Logout failed:', error);\n    } finally {\n      setTokens(null, null);\n      localStorage.removeItem('lms_access_token');\n      localStorage.removeItem('lms_refresh_token');\n      setUser(null);\n    }\n  };\n\n  const value: AuthContextType = {\n    user,\n    login,\n    logout,\n    isAuthenticated: !!user,\n    isLoading,\n  };\n\n  return <AuthContext.Provider value={value}>{children}</AuthContext.Provider>;\n}\n\nexport function useAuth() {\n  const context = useContext(AuthContext);\n  if (context === undefined) {\n    throw new Error('useAuth must be used within an AuthProvider');\n  }\n  return context;\n}\n","size_bytes":3087},"client/src/components/AddDriveVideo.tsx":{"content":"import { useState } from \"react\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Plus, Loader2, Video } from \"lucide-react\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from \"@/components/ui/select\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\n\n// Google Drive link validation and conversion\nfunction extractDriveFileId(url: string): string | null {\n  // Support multiple Google Drive URL formats:\n  // 1. https://drive.google.com/file/d/FILE_ID/view\n  // 2. https://drive.google.com/open?id=FILE_ID\n  // 3. https://drive.google.com/uc?id=FILE_ID\n  \n  const patterns = [\n    /\\/file\\/d\\/([a-zA-Z0-9_-]+)/,  // /file/d/FILE_ID format\n    /[?&]id=([a-zA-Z0-9_-]+)/,      // ?id=FILE_ID format\n  ];\n  \n  for (const pattern of patterns) {\n    const match = url.match(pattern);\n    if (match && match[1]) {\n      return match[1];\n    }\n  }\n  \n  return null;\n}\n\nfunction convertToEmbedUrl(driveUrl: string): string | null {\n  const fileId = extractDriveFileId(driveUrl);\n  if (!fileId) return null;\n  \n  // Use the current (2025) Google Drive embed format\n  return `https://drive.google.com/file/d/${fileId}/preview`;\n}\n\n// Form validation schema\nconst driveVideoSchema = z.object({\n  title: z.string().min(1, \"Title is required\"),\n  description: z.string().min(1, \"Description is required\"),\n  driveUrl: z.string().url(\"Must be a valid URL\").refine(\n    (url) => {\n      return url.includes(\"drive.google.com\") && extractDriveFileId(url) !== null;\n    },\n    { message: \"Must be a valid Google Drive link\" }\n  ),\n  category: z.string().min(1, \"Category is required\"),\n});\n\ntype DriveVideoForm = z.infer<typeof driveVideoSchema>;\n\nexport default function AddDriveVideo() {\n  const { toast } = useToast();\n  const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n\n  const form = useForm<DriveVideoForm>({\n    resolver: zodResolver(driveVideoSchema),\n    defaultValues: {\n      title: \"\",\n      description: \"\",\n      driveUrl: \"\",\n      category: \"\",\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: DriveVideoForm) => {\n      const embedUrl = convertToEmbedUrl(data.driveUrl);\n      if (!embedUrl) {\n        throw new Error(\"Invalid Google Drive URL\");\n      }\n\n      const videoData = {\n        title: data.title,\n        description: data.description,\n        videoUrl: embedUrl,\n        category: data.category,\n      };\n\n      const response = await apiRequest(\"POST\", \"/api/videos\", videoData);\n      return await response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/videos\"] });\n      form.reset();\n      setPreviewUrl(null);\n      toast({\n        title: \"Success\",\n        description: \"Video from Google Drive added successfully\",\n      });\n    },\n    onError: (error) => {\n      toast({\n        title: \"Error\",\n        description: error instanceof Error ? error.message : \"Failed to add video\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const onSubmit = (data: DriveVideoForm) => {\n    createMutation.mutate(data);\n  };\n\n  // Update preview when drive URL changes\n  const handleDriveUrlChange = (url: string) => {\n    if (url) {\n      const embedUrl = convertToEmbedUrl(url);\n      setPreviewUrl(embedUrl);\n    } else {\n      setPreviewUrl(null);\n    }\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <Card className=\"shadow-lg\" data-testid=\"card-add-drive-video\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Video className=\"h-5 w-5\" />\n            Add Video from Google Drive\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(onSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"title\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Video Title</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"Enter video title\"\n                        {...field}\n                        disabled={createMutation.isPending}\n                        data-testid=\"input-drive-video-title\"\n                      />\n                    </FormControl>\n                    <FormMessage data-testid=\"error-drive-title\" />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Description</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        placeholder=\"Enter video description\"\n                        rows={4}\n                        {...field}\n                        disabled={createMutation.isPending}\n                        data-testid=\"input-drive-video-description\"\n                      />\n                    </FormControl>\n                    <FormMessage data-testid=\"error-drive-description\" />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"driveUrl\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Google Drive Video Link</FormLabel>\n                    <FormControl>\n                      <Input\n                        placeholder=\"https://drive.google.com/file/d/...\"\n                        {...field}\n                        disabled={createMutation.isPending}\n                        onChange={(e) => {\n                          field.onChange(e);\n                          handleDriveUrlChange(e.target.value);\n                        }}\n                        data-testid=\"input-drive-video-url\"\n                      />\n                    </FormControl>\n                    <FormDescription>\n                      Paste your Google Drive share link. Make sure the file is set to \"Anyone with the link can view\"\n                    </FormDescription>\n                    <FormMessage data-testid=\"error-drive-url\" />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"category\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Category / Subject</FormLabel>\n                    <Select\n                      onValueChange={field.onChange}\n                      value={field.value}\n                      disabled={createMutation.isPending}\n                    >\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-drive-video-category\">\n                          <SelectValue placeholder=\"Select a category\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"Tutorial\" data-testid=\"option-drive-category-tutorial\">Tutorial</SelectItem>\n                        <SelectItem value=\"Lecture\" data-testid=\"option-drive-category-lecture\">Lecture</SelectItem>\n                        <SelectItem value=\"Demo\" data-testid=\"option-drive-category-demo\">Demo</SelectItem>\n                        <SelectItem value=\"Review\" data-testid=\"option-drive-category-review\">Review</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage data-testid=\"error-drive-category\" />\n                  </FormItem>\n                )}\n              />\n\n              <Button\n                type=\"submit\"\n                className=\"w-full\"\n                disabled={createMutation.isPending}\n                data-testid=\"button-add-drive-video\"\n              >\n                {createMutation.isPending ? (\n                  <>\n                    <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n                    Adding Video...\n                  </>\n                ) : (\n                  <>\n                    <Plus className=\"mr-2 h-4 w-4\" />\n                    Add Video\n                  </>\n                )}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      {/* Video Preview */}\n      {previewUrl && (\n        <Card className=\"shadow-lg\" data-testid=\"card-drive-video-preview\">\n          <CardHeader>\n            <CardTitle className=\"text-lg\">Video Preview</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"aspect-video w-full rounded-md overflow-hidden bg-muted\">\n              <iframe\n                src={previewUrl}\n                className=\"w-full h-full\"\n                allow=\"autoplay; fullscreen\"\n                allowFullScreen\n                title=\"Google Drive Video Preview\"\n                data-testid=\"iframe-drive-video-preview\"\n              />\n            </div>\n            <p className=\"text-sm text-muted-foreground mt-2\">\n              Preview of your Google Drive video. If the video doesn't load, make sure sharing is set to \"Anyone with the link can view\".\n            </p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":9865},"client/src/components/admin/Sidebar.tsx":{"content":"import { LayoutDashboard, Users, CreditCard, FileText, Settings, X } from \"lucide-react\";\nimport { Button } from \"@/components/ui/button\";\nimport { cn } from \"@/lib/utils\";\n\ninterface SidebarProps {\n  activeSection: string;\n  setActiveSection: (section: string) => void;\n  isOpen: boolean;\n  setIsOpen: (isOpen: boolean) => void;\n}\n\nconst menuItems = [\n  { id: \"dashboard\", label: \"Dashboard\", icon: LayoutDashboard },\n  { id: \"users\", label: \"Users\", icon: Users },\n  { id: \"subscriptions\", label: \"Subscriptions\", icon: CreditCard },\n  { id: \"invoices\", label: \"Invoices\", icon: FileText },\n  { id: \"settings\", label: \"Settings\", icon: Settings },\n];\n\nexport function Sidebar({ activeSection, setActiveSection, isOpen, setIsOpen }: SidebarProps) {\n  return (\n    <>\n      {isOpen && (\n        <div \n          className=\"fixed inset-0 bg-black/50 z-40 lg:hidden\" \n          onClick={() => setIsOpen(false)}\n          data-testid=\"overlay-sidebar\"\n        />\n      )}\n      \n      <aside\n        className={cn(\n          \"fixed lg:static inset-y-0 left-0 z-50 w-64 bg-card border-r flex flex-col transition-transform duration-300\",\n          !isOpen && \"-translate-x-full lg:translate-x-0\"\n        )}\n        data-testid=\"sidebar-admin\"\n      >\n        <div className=\"p-6 border-b flex items-center justify-between\">\n          <div>\n            <h2 className=\"text-lg font-bold\" data-testid=\"text-sidebar-title\">LMS Admin</h2>\n            <p className=\"text-xs text-muted-foreground\">Management Portal</p>\n          </div>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className=\"lg:hidden\"\n            onClick={() => setIsOpen(false)}\n            data-testid=\"button-close-sidebar\"\n          >\n            <X className=\"h-4 w-4\" />\n          </Button>\n        </div>\n        \n        <nav className=\"flex-1 p-4 space-y-2\">\n          {menuItems.map((item) => {\n            const Icon = item.icon;\n            const isActive = activeSection === item.id;\n            \n            return (\n              <Button\n                key={item.id}\n                variant={isActive ? \"secondary\" : \"ghost\"}\n                className={cn(\n                  \"w-full justify-start gap-3\",\n                  isActive && \"bg-primary/10 text-primary font-medium\"\n                )}\n                onClick={() => {\n                  setActiveSection(item.id);\n                  setIsOpen(false);\n                }}\n                data-testid={`button-nav-${item.id}`}\n              >\n                <Icon className=\"h-5 w-5\" />\n                {item.label}\n              </Button>\n            );\n          })}\n        </nav>\n        \n        <div className=\"p-4 border-t\">\n          <div className=\"bg-primary/5 rounded-lg p-4\">\n            <p className=\"text-sm font-medium mb-1\">Need Help?</p>\n            <p className=\"text-xs text-muted-foreground mb-3\">\n              Check our documentation or contact support\n            </p>\n            <Button variant=\"outline\" size=\"sm\" className=\"w-full\" data-testid=\"button-help\">\n              Get Support\n            </Button>\n          </div>\n        </div>\n      </aside>\n    </>\n  );\n}\n","size_bytes":3161},"client/src/components/layout/TopNavbar.tsx":{"content":"import { useAuth } from '@/context/AuthContext';\nimport { useLocation } from 'wouter';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuTrigger,\n} from '@/components/ui/dropdown-menu';\nimport { Avatar, AvatarFallback } from '@/components/ui/avatar';\nimport { Bell, Search, LogOut, UserCircle, Moon, Sun } from 'lucide-react';\nimport { Badge } from '@/components/ui/badge';\nimport { useState, useEffect } from 'react';\n\nexport function TopNavbar() {\n  const { user, logout } = useAuth();\n  const [, setLocation] = useLocation();\n  const [darkMode, setDarkMode] = useState(false);\n\n  useEffect(() => {\n    const isDark = localStorage.getItem('lms_dark_mode') === 'true';\n    setDarkMode(isDark);\n    if (isDark) {\n      document.documentElement.classList.add('dark');\n    }\n  }, []);\n\n  const toggleDarkMode = () => {\n    const newDarkMode = !darkMode;\n    setDarkMode(newDarkMode);\n    localStorage.setItem('lms_dark_mode', String(newDarkMode));\n    document.documentElement.classList.toggle('dark');\n  };\n\n  const handleLogout = () => {\n    logout();\n    setLocation('/login');\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map((n) => n[0])\n      .join('')\n      .toUpperCase();\n  };\n\n  if (!user) return null;\n\n  return (\n    <header\n      className=\"h-16 border-b bg-background flex items-center justify-between px-4 sticky top-0 z-10\"\n      data-testid=\"topnav-header\"\n    >\n      <div className=\"flex items-center flex-1 max-w-md gap-2\">\n        <Search className=\"h-4 w-4 text-muted-foreground\" />\n        <Input\n          type=\"search\"\n          placeholder=\"Search courses, videos...\"\n          className=\"max-w-md\"\n          data-testid=\"input-search-global\"\n        />\n      </div>\n\n      <div className=\"flex items-center gap-3\">\n        <Button\n          variant=\"ghost\"\n          size=\"icon\"\n          onClick={toggleDarkMode}\n          data-testid=\"button-toggle-theme\"\n        >\n          {darkMode ? <Sun className=\"h-5 w-5\" /> : <Moon className=\"h-5 w-5\" />}\n        </Button>\n\n        <div className=\"relative\">\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            data-testid=\"button-notifications\"\n          >\n            <Bell className=\"h-5 w-5\" />\n          </Button>\n          <Badge\n            variant=\"destructive\"\n            className=\"absolute -top-1 -right-1 h-5 w-5 flex items-center justify-center p-0 text-xs\"\n            data-testid=\"badge-notification-count\"\n          >\n            3\n          </Badge>\n        </div>\n\n        <DropdownMenu>\n          <DropdownMenuTrigger asChild>\n            <Button\n              variant=\"ghost\"\n              className=\"gap-2\"\n              data-testid=\"button-profile-menu\"\n            >\n              <Avatar className=\"h-8 w-8\">\n                <AvatarFallback>{getInitials(user.name)}</AvatarFallback>\n              </Avatar>\n              <span className=\"hidden md:inline-block\">{user.name}</span>\n            </Button>\n          </DropdownMenuTrigger>\n          <DropdownMenuContent align=\"end\" className=\"w-56\">\n            <DropdownMenuLabel>\n              <div className=\"flex flex-col space-y-1\">\n                <p className=\"text-sm font-medium\">{user.name}</p>\n                <p className=\"text-xs text-muted-foreground\">{user.email}</p>\n                <Badge variant=\"outline\" className=\"w-fit capitalize\">\n                  {user.role}\n                </Badge>\n              </div>\n            </DropdownMenuLabel>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem data-testid=\"menu-item-profile\">\n              <UserCircle className=\"mr-2 h-4 w-4\" />\n              <span>Profile</span>\n            </DropdownMenuItem>\n            <DropdownMenuSeparator />\n            <DropdownMenuItem\n              onClick={handleLogout}\n              className=\"text-destructive\"\n              data-testid=\"menu-item-logout\"\n            >\n              <LogOut className=\"mr-2 h-4 w-4\" />\n              <span>Logout</span>\n            </DropdownMenuItem>\n          </DropdownMenuContent>\n        </DropdownMenu>\n      </div>\n    </header>\n  );\n}\n","size_bytes":4289},"client/src/components/admin/PlaylistModal.tsx":{"content":"import { X, PlayCircle, Clock } from \"lucide-react\";\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n} from \"@/components/ui/dialog\";\nimport { Progress } from \"@/components/ui/progress\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { ScrollArea } from \"@/components/ui/scroll-area\";\n\ninterface Video {\n  id: number;\n  title: string;\n  duration: string;\n}\n\ninterface User {\n  id: number;\n  name: string;\n  playlist: string;\n  dueDate: string;\n  videos: Video[];\n  progress: number;\n  status: string;\n}\n\ninterface PlaylistModalProps {\n  user: User;\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport function PlaylistModal({ user, isOpen, onClose }: PlaylistModalProps) {\n  const subscriptionDuration = () => {\n    const due = new Date(user.dueDate);\n    const now = new Date();\n    const diffTime = due.getTime() - now.getTime();\n    const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));\n    \n    if (diffDays < 0) {\n      return `Expired ${Math.abs(diffDays)} days ago`;\n    } else if (diffDays === 0) {\n      return \"Expires today\";\n    } else {\n      return `${diffDays} days remaining`;\n    }\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={(open) => !open && onClose()}>\n      <DialogContent className=\"max-w-2xl\" data-testid=\"modal-playlist-details\">\n        <DialogHeader>\n          <DialogTitle className=\"flex items-center gap-2\">\n            <PlayCircle className=\"h-5 w-5 text-primary\" />\n            {user.playlist}\n          </DialogTitle>\n        </DialogHeader>\n        \n        <div className=\"space-y-6\">\n          <div className=\"space-y-4\">\n            <div className=\"flex items-center justify-between\">\n              <div>\n                <h3 className=\"text-sm font-medium text-muted-foreground\">Student</h3>\n                <p className=\"text-base font-medium\" data-testid=\"text-modal-user-name\">{user.name}</p>\n              </div>\n              <div className=\"text-right\">\n                <h3 className=\"text-sm font-medium text-muted-foreground\">Subscription Status</h3>\n                <Badge\n                  variant={user.status === \"Active\" ? \"default\" : \"secondary\"}\n                  className={\n                    user.status === \"Active\"\n                      ? \"bg-green-100 text-green-800 dark:bg-green-950 dark:text-green-300\"\n                      : \"bg-red-100 text-red-800 dark:bg-red-950 dark:text-red-300\"\n                  }\n                  data-testid=\"badge-modal-status\"\n                >\n                  {user.status}\n                </Badge>\n              </div>\n            </div>\n\n            <div className=\"bg-muted/50 rounded-lg p-4\">\n              <div className=\"flex items-center justify-between mb-2\">\n                <span className=\"text-sm font-medium\">Course Progress</span>\n                <span className=\"text-sm font-medium text-primary\" data-testid=\"text-progress-percentage\">\n                  {user.progress}%\n                </span>\n              </div>\n              <Progress value={user.progress} className=\"h-2\" data-testid=\"progress-bar\" />\n            </div>\n\n            <div className=\"grid grid-cols-2 gap-4\">\n              <div className=\"bg-muted/50 rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 text-muted-foreground mb-1\">\n                  <Clock className=\"h-4 w-4\" />\n                  <span className=\"text-xs font-medium\">Duration</span>\n                </div>\n                <p className=\"text-sm font-medium\" data-testid=\"text-subscription-duration\">\n                  {subscriptionDuration()}\n                </p>\n              </div>\n              \n              <div className=\"bg-muted/50 rounded-lg p-4\">\n                <div className=\"flex items-center gap-2 text-muted-foreground mb-1\">\n                  <PlayCircle className=\"h-4 w-4\" />\n                  <span className=\"text-xs font-medium\">Total Videos</span>\n                </div>\n                <p className=\"text-sm font-medium\" data-testid=\"text-total-videos\">\n                  {user.videos.length} videos\n                </p>\n              </div>\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"text-sm font-semibold mb-3\">Course Content</h3>\n            <ScrollArea className=\"h-72 rounded-md border\">\n              <div className=\"p-4 space-y-3\">\n                {user.videos.map((video, index) => (\n                  <div\n                    key={video.id}\n                    className=\"flex items-start gap-3 p-3 rounded-lg bg-muted/30 hover-elevate\"\n                    data-testid={`video-item-${video.id}`}\n                  >\n                    <div className=\"flex items-center justify-center w-8 h-8 rounded-full bg-primary/10 text-primary text-sm font-medium flex-shrink-0\">\n                      {index + 1}\n                    </div>\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"text-sm font-medium mb-1\" data-testid={`text-video-title-${video.id}`}>\n                        {video.title}\n                      </p>\n                      <div className=\"flex items-center gap-2 text-xs text-muted-foreground\">\n                        <Clock className=\"h-3 w-3\" />\n                        <span data-testid={`text-video-duration-${video.id}`}>{video.duration}</span>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </ScrollArea>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","size_bytes":5522},"client/src/pages/student/StudentPlaylistsPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardFooter, CardHeader } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { PlaySquare, Search, BookOpen } from 'lucide-react';\nimport { Link } from 'wouter';\nimport type { Playlist, WatchProgress } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\n\ninterface PlaylistWithProgress extends Playlist {\n  progress: number;\n  watchedVideos: number;\n}\n\nexport default function StudentPlaylistsPage() {\n  const { user } = useAuth();\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const { data: playlists = [], isLoading } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const { data: watchProgress = [] } = useQuery<WatchProgress[]>({\n    queryKey: ['/api/watch-progress/student', user?.email],\n    enabled: !!user?.email,\n  });\n\n  const { data: subscriptions = [] } = useQuery<any[]>({\n    queryKey: ['/api/subscriptions/student', user?.email],\n    enabled: !!user?.email,\n  });\n\n  const subscribedPlaylistIds = subscriptions.map((sub: any) => sub.playlistId);\n\n  const subscribedPlaylists: PlaylistWithProgress[] = playlists\n    .filter(playlist => subscribedPlaylistIds.includes(playlist.id))\n    .map(playlist => {\n      const playlistProgress = watchProgress.filter(p => p.playlistId === playlist.id);\n      const watchedVideos = playlistProgress.filter(p => p.completed === 1).length;\n      const totalVideos = playlist.videoCount || 0;\n      const progress = totalVideos > 0 ? Math.round((watchedVideos / totalVideos) * 100) : 0;\n\n      return {\n        ...playlist,\n        progress,\n        watchedVideos,\n      };\n    })\n    .filter(playlist => \n      playlist.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      playlist.tutorName.toLowerCase().includes(searchQuery.toLowerCase())\n    );\n\n  if (isLoading) {\n    return (\n      <div className=\"space-y-6\">\n        <h1 className=\"text-3xl font-bold\">My Playlists</h1>\n        <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3\">\n          {[1, 2, 3].map(i => (\n            <Card key={i} className=\"animate-pulse\">\n              <div className=\"h-48 bg-muted\" />\n              <CardContent className=\"p-4\">\n                <div className=\"h-4 bg-muted rounded mb-2\" />\n                <div className=\"h-3 bg-muted rounded w-2/3\" />\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">My Playlists</h1>\n          <p className=\"text-muted-foreground\">\n            {subscribedPlaylists.length} playlist{subscribedPlaylists.length !== 1 ? 's' : ''} subscribed\n          </p>\n        </div>\n        <div className=\"relative w-80\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search playlists...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"input-search-playlists\"\n          />\n        </div>\n      </div>\n\n      {subscribedPlaylists.length === 0 ? (\n        <Card className=\"p-12\">\n          <div className=\"text-center space-y-4\">\n            <BookOpen className=\"h-16 w-16 mx-auto text-muted-foreground\" />\n            <div>\n              <h3 className=\"text-lg font-semibold\">No playlists found</h3>\n              <p className=\"text-muted-foreground\">\n                {searchQuery ? 'Try a different search term' : 'Subscribe to playlists to get started'}\n              </p>\n            </div>\n            {!searchQuery && (\n              <Link href=\"/student/explore\">\n                <Button data-testid=\"button-explore-courses\">Explore Courses</Button>\n              </Link>\n            )}\n          </div>\n        </Card>\n      ) : (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {subscribedPlaylists.map((playlist) => (\n            <Card key={playlist.id} className=\"overflow-hidden hover-elevate\" data-testid={`card-playlist-${playlist.id}`}>\n              <div className=\"aspect-video bg-gradient-to-br from-blue-500 to-purple-600 relative\">\n                {playlist.thumbnail ? (\n                  <img\n                    src={playlist.thumbnail}\n                    alt={playlist.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <PlaySquare className=\"h-16 w-16 text-white/80\" />\n                  </div>\n                )}\n                <div className=\"absolute top-2 right-2\">\n                  <Badge variant=\"secondary\" className=\"bg-black/50 text-white border-0\">\n                    {playlist.videoCount || 0} videos\n                  </Badge>\n                </div>\n              </div>\n\n              <CardHeader className=\"pb-3\">\n                <div className=\"space-y-1\">\n                  <h3 className=\"font-semibold line-clamp-1\" data-testid={`text-playlist-title-${playlist.id}`}>\n                    {playlist.name}\n                  </h3>\n                  <div className=\"flex items-center gap-2 text-sm text-muted-foreground\">\n                    <span>By {playlist.tutorName}</span>\n                    <span>â€¢</span>\n                    <Badge variant=\"outline\" className=\"text-xs\">\n                      {playlist.category}\n                    </Badge>\n                  </div>\n                </div>\n              </CardHeader>\n\n              <CardContent className=\"space-y-3\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Progress</span>\n                    <span className=\"font-medium\">{playlist.progress}%</span>\n                  </div>\n                  <Progress value={playlist.progress} className=\"h-2\" />\n                  <p className=\"text-xs text-muted-foreground\">\n                    {playlist.watchedVideos} of {playlist.videoCount || 0} videos completed\n                  </p>\n                </div>\n              </CardContent>\n\n              <CardFooter>\n                <Link href={`/student/playlist/${playlist.id}`} className=\"w-full\">\n                  <Button className=\"w-full\" data-testid={`button-view-playlist-${playlist.id}`}>\n                    View Playlist\n                  </Button>\n                </Link>\n              </CardFooter>\n            </Card>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}\n","size_bytes":6979},"client/src/pages/student/StudentExploreCoursesPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Card, CardContent, CardFooter, CardHeader } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Label } from '@/components/ui/label';\nimport { PlaySquare, Search, Filter } from 'lucide-react';\nimport type { Playlist } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function StudentExploreCoursesPage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<string>('all');\n  const [sortBy, setSortBy] = useState<'newest' | 'popular'>('newest');\n  const [subscribePlaylist, setSubscribePlaylist] = useState<Playlist | null>(null);\n  const [subscriptionMonths, setSubscriptionMonths] = useState('3');\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const { data: subscriptions = [] } = useQuery<any[]>({\n    queryKey: ['/api/subscriptions/student', user?.email],\n    enabled: !!user?.email,\n  });\n\n  const subscribedPlaylistIds = subscriptions.map((sub: any) => sub.playlistId);\n\n  const categories = Array.from(new Set(playlists.map(p => p.category))).filter(Boolean);\n\n  const filteredPlaylists = playlists\n    .filter(p => p.isPublic === 1)\n    .filter(p => \n      !searchQuery || \n      p.name.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      p.tutorName.toLowerCase().includes(searchQuery.toLowerCase())\n    )\n    .filter(p => selectedCategory === 'all' || p.category === selectedCategory)\n    .sort((a, b) => {\n      if (sortBy === 'popular') {\n        return (b.viewCount || 0) - (a.viewCount || 0);\n      }\n      return new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime();\n    });\n\n  const subscribeMutation = useMutation({\n    mutationFn: async (data: any) => {\n      const response = await apiRequest('POST', '/api/subscriptions', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/subscriptions/student'] });\n      setSubscribePlaylist(null);\n      toast({\n        title: 'Subscription successful!',\n        description: 'You now have access to this playlist',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Subscription failed',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleSubscribe = () => {\n    if (!subscribePlaylist || !user) return;\n\n    const months = parseInt(subscriptionMonths);\n    const endDate = new Date();\n    endDate.setMonth(endDate.getMonth() + months);\n\n    const amountPaid = months * 500; // â‚¹500 per month\n\n    subscribeMutation.mutate({\n      studentEmail: user.email,\n      studentName: user.name,\n      playlistId: subscribePlaylist.id,\n      startDate: new Date(),\n      endDate,\n      status: 'active',\n      amountPaid,\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Explore Courses</h1>\n        <p className=\"text-muted-foreground\">\n          Discover and subscribe to new learning content\n        </p>\n      </div>\n\n      <div className=\"flex flex-col sm:flex-row gap-4\">\n        <div className=\"relative flex-1\">\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n          <Input\n            placeholder=\"Search courses or tutors...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"pl-9\"\n            data-testid=\"input-search-courses\"\n          />\n        </div>\n\n        <Select value={selectedCategory} onValueChange={setSelectedCategory}>\n          <SelectTrigger className=\"w-48\" data-testid=\"select-category\">\n            <Filter className=\"h-4 w-4 mr-2\" />\n            <SelectValue placeholder=\"Category\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"all\">All Categories</SelectItem>\n            {categories.map(cat => (\n              <SelectItem key={cat} value={cat}>{cat}</SelectItem>\n            ))}\n          </SelectContent>\n        </Select>\n\n        <Select value={sortBy} onValueChange={(value: any) => setSortBy(value)}>\n          <SelectTrigger className=\"w-40\" data-testid=\"select-sort\">\n            <SelectValue placeholder=\"Sort by\" />\n          </SelectTrigger>\n          <SelectContent>\n            <SelectItem value=\"newest\">Newest</SelectItem>\n            <SelectItem value=\"popular\">Most Viewed</SelectItem>\n          </SelectContent>\n        </Select>\n      </div>\n\n      {filteredPlaylists.length === 0 ? (\n        <Card className=\"p-12\">\n          <div className=\"text-center space-y-2\">\n            <PlaySquare className=\"h-16 w-16 mx-auto text-muted-foreground\" />\n            <h3 className=\"text-lg font-semibold\">No courses found</h3>\n            <p className=\"text-muted-foreground\">Try adjusting your filters or search query</p>\n          </div>\n        </Card>\n      ) : (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {filteredPlaylists.map((playlist) => {\n            const isSubscribed = subscribedPlaylistIds.includes(playlist.id);\n\n            return (\n              <Card key={playlist.id} className=\"overflow-hidden hover-elevate\" data-testid={`card-course-${playlist.id}`}>\n                <div className=\"aspect-video bg-gradient-to-br from-blue-500 to-purple-600 relative\">\n                  {playlist.thumbnail ? (\n                    <img\n                      src={playlist.thumbnail}\n                      alt={playlist.name}\n                      className=\"w-full h-full object-cover\"\n                    />\n                  ) : (\n                    <div className=\"absolute inset-0 flex items-center justify-center\">\n                      <PlaySquare className=\"h-16 w-16 text-white/80\" />\n                    </div>\n                  )}\n                  <div className=\"absolute top-2 right-2\">\n                    <Badge variant=\"secondary\" className=\"bg-black/50 text-white border-0\">\n                      {playlist.videoCount || 0} videos\n                    </Badge>\n                  </div>\n                </div>\n\n                <CardHeader className=\"pb-3\">\n                  <div className=\"space-y-2\">\n                    <h3 className=\"font-semibold line-clamp-1\" data-testid={`text-course-title-${playlist.id}`}>\n                      {playlist.name}\n                    </h3>\n                    <div className=\"flex items-center gap-2 text-sm\">\n                      <span className=\"text-muted-foreground\">By {playlist.tutorName}</span>\n                    </div>\n                    <Badge variant=\"outline\" className=\"w-fit\">\n                      {playlist.category}\n                    </Badge>\n                  </div>\n                </CardHeader>\n\n                <CardContent>\n                  {playlist.description && (\n                    <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                      {playlist.description}\n                    </p>\n                  )}\n                  <div className=\"mt-2 flex items-center gap-3 text-xs text-muted-foreground\">\n                    <span>{playlist.viewCount || 0} views</span>\n                  </div>\n                </CardContent>\n\n                <CardFooter>\n                  {isSubscribed ? (\n                    <Badge variant=\"secondary\" className=\"w-full justify-center\">\n                      Subscribed\n                    </Badge>\n                  ) : (\n                    <Button\n                      className=\"w-full\"\n                      onClick={() => setSubscribePlaylist(playlist)}\n                      data-testid={`button-subscribe-${playlist.id}`}\n                    >\n                      Subscribe\n                    </Button>\n                  )}\n                </CardFooter>\n              </Card>\n            );\n          })}\n        </div>\n      )}\n\n      <Dialog open={!!subscribePlaylist} onOpenChange={() => setSubscribePlaylist(null)}>\n        <DialogContent data-testid=\"dialog-subscribe\">\n          <DialogHeader>\n            <DialogTitle>Subscribe to {subscribePlaylist?.name}</DialogTitle>\n            <DialogDescription>\n              Choose your subscription plan\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div className=\"space-y-2\">\n              <Label>Subscription Duration</Label>\n              <Select value={subscriptionMonths} onValueChange={setSubscriptionMonths}>\n                <SelectTrigger data-testid=\"select-duration\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"1\">1 Month - â‚¹500</SelectItem>\n                  <SelectItem value=\"3\">3 Months - â‚¹1,500</SelectItem>\n                  <SelectItem value=\"6\">6 Months - â‚¹3,000</SelectItem>\n                  <SelectItem value=\"12\">12 Months - â‚¹6,000</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n\n            <div className=\"rounded-lg border p-4 space-y-2\">\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Course:</span>\n                <span className=\"font-medium\">{subscribePlaylist?.name}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Tutor:</span>\n                <span>{subscribePlaylist?.tutorName}</span>\n              </div>\n              <div className=\"flex justify-between text-sm\">\n                <span className=\"text-muted-foreground\">Videos:</span>\n                <span>{subscribePlaylist?.videoCount || 0}</span>\n              </div>\n              <div className=\"border-t pt-2 flex justify-between font-semibold\">\n                <span>Total Amount:</span>\n                <span>â‚¹{parseInt(subscriptionMonths) * 500}</span>\n              </div>\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setSubscribePlaylist(null)}>\n              Cancel\n            </Button>\n            <Button \n              onClick={handleSubscribe}\n              disabled={subscribeMutation.isPending}\n              data-testid=\"button-confirm-subscribe\"\n            >\n              {subscribeMutation.isPending ? 'Processing...' : 'Confirm & Subscribe'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11178},"client/src/pages/student/StudentProfilePage.tsx":{"content":"import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Separator } from '@/components/ui/separator';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Form, FormControl, FormDescription, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { User, Mail, Lock, Bell, Save } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useToast } from '@/hooks/use-toast';\n\nconst profileFormSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  profilePicture: z.string().url().optional().or(z.literal('')),\n});\n\nconst passwordFormSchema = z.object({\n  currentPassword: z.string().min(6, 'Password must be at least 6 characters'),\n  newPassword: z.string().min(6, 'Password must be at least 6 characters'),\n  confirmPassword: z.string().min(6, 'Password must be at least 6 characters'),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\ntype ProfileFormData = z.infer<typeof profileFormSchema>;\ntype PasswordFormData = z.infer<typeof passwordFormSchema>;\n\nexport default function StudentProfilePage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [emailPreferences, setEmailPreferences] = useState({\n    newContent: true,\n    assignments: true,\n    messages: false,\n    newsletter: true,\n  });\n\n  const profileForm = useForm<ProfileFormData>({\n    resolver: zodResolver(profileFormSchema),\n    defaultValues: {\n      name: user?.name || '',\n      email: user?.email || '',\n      profilePicture: '',\n    },\n  });\n\n  const passwordForm = useForm<PasswordFormData>({\n    resolver: zodResolver(passwordFormSchema),\n    defaultValues: {\n      currentPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n    },\n  });\n\n  const handleProfileSubmit = (data: ProfileFormData) => {\n    console.log('Profile data:', data);\n    toast({\n      title: 'Profile updated',\n      description: 'Your profile has been updated successfully',\n    });\n  };\n\n  const handlePasswordSubmit = (data: PasswordFormData) => {\n    console.log('Password data:', data);\n    toast({\n      title: 'Password changed',\n      description: 'Your password has been changed successfully',\n    });\n    passwordForm.reset();\n  };\n\n  const handlePreferencesSubmit = (e: React.FormEvent) => {\n    e.preventDefault();\n    toast({\n      title: 'Preferences saved',\n      description: 'Your email preferences have been updated',\n    });\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map(n => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Profile Settings</h1>\n        <p className=\"text-muted-foreground\">\n          Manage your account settings and preferences\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Profile Information</CardTitle>\n          <CardDescription>\n            Update your personal information and profile picture\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...profileForm}>\n            <form onSubmit={profileForm.handleSubmit(handleProfileSubmit)} className=\"space-y-6\">\n              <div className=\"flex items-center gap-6\">\n                <Avatar className=\"h-24 w-24\">\n                  <AvatarImage src={profileForm.watch('profilePicture')} />\n                  <AvatarFallback className=\"text-2xl\">\n                    {user?.name ? getInitials(user.name) : 'ST'}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"space-y-2\">\n                  <FormField\n                    control={profileForm.control}\n                    name=\"profilePicture\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Profile Picture URL</FormLabel>\n                        <FormControl>\n                          <Input\n                            {...field}\n                            placeholder=\"https://example.com/avatar.jpg\"\n                            data-testid=\"input-profile-picture\"\n                          />\n                        </FormControl>\n                        <FormDescription className=\"text-xs\">\n                          Enter a URL for your profile picture\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={profileForm.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Full Name</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"John Doe\"\n                          data-testid=\"input-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={profileForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email Address</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"email\"\n                          placeholder=\"student@example.com\"\n                          data-testid=\"input-email\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-save-profile\">\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  Save Changes\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Change Password</CardTitle>\n          <CardDescription>\n            Update your password to keep your account secure\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...passwordForm}>\n            <form onSubmit={passwordForm.handleSubmit(handlePasswordSubmit)} className=\"space-y-4\">\n              <FormField\n                control={passwordForm.control}\n                name=\"currentPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Current Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"password\"\n                        placeholder=\"Enter current password\"\n                        data-testid=\"input-current-password\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"newPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>New Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"password\"\n                        placeholder=\"Enter new password\"\n                        data-testid=\"input-new-password\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Confirm New Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"password\"\n                        placeholder=\"Confirm new password\"\n                        data-testid=\"input-confirm-password\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-change-password\">\n                  <Lock className=\"h-4 w-4 mr-2\" />\n                  Change Password\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Email Preferences</CardTitle>\n          <CardDescription>\n            Choose what emails you want to receive\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <form onSubmit={handlePreferencesSubmit} className=\"space-y-4\">\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"new-content\"\n                  checked={emailPreferences.newContent}\n                  onCheckedChange={(checked) =>\n                    setEmailPreferences(prev => ({ ...prev, newContent: checked as boolean }))\n                  }\n                  data-testid=\"checkbox-new-content\"\n                />\n                <div className=\"space-y-1\">\n                  <Label htmlFor=\"new-content\" className=\"font-medium cursor-pointer\">\n                    New Course Content\n                  </Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Get notified when new videos are added to your subscribed playlists\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"assignments\"\n                  checked={emailPreferences.assignments}\n                  onCheckedChange={(checked) =>\n                    setEmailPreferences(prev => ({ ...prev, assignments: checked as boolean }))\n                  }\n                  data-testid=\"checkbox-assignments\"\n                />\n                <div className=\"space-y-1\">\n                  <Label htmlFor=\"assignments\" className=\"font-medium cursor-pointer\">\n                    Course Reminders\n                  </Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Receive reminders about incomplete courses\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"messages\"\n                  checked={emailPreferences.messages}\n                  onCheckedChange={(checked) =>\n                    setEmailPreferences(prev => ({ ...prev, messages: checked as boolean }))\n                  }\n                  data-testid=\"checkbox-messages\"\n                />\n                <div className=\"space-y-1\">\n                  <Label htmlFor=\"messages\" className=\"font-medium cursor-pointer\">\n                    Q&A Responses\n                  </Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Get notified when tutors answer your questions\n                  </p>\n                </div>\n              </div>\n\n              <div className=\"flex items-center space-x-3\">\n                <Checkbox\n                  id=\"newsletter\"\n                  checked={emailPreferences.newsletter}\n                  onCheckedChange={(checked) =>\n                    setEmailPreferences(prev => ({ ...prev, newsletter: checked as boolean }))\n                  }\n                  data-testid=\"checkbox-newsletter\"\n                />\n                <div className=\"space-y-1\">\n                  <Label htmlFor=\"newsletter\" className=\"font-medium cursor-pointer\">\n                    Newsletter\n                  </Label>\n                  <p className=\"text-sm text-muted-foreground\">\n                    Weekly newsletter with learning tips and platform updates\n                  </p>\n                </div>\n              </div>\n            </div>\n\n            <div className=\"flex justify-end\">\n              <Button type=\"submit\" data-testid=\"button-save-preferences\">\n                <Bell className=\"h-4 w-4 mr-2\" />\n                Save Preferences\n              </Button>\n            </div>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":13433},"client/src/pages/student/StudentPlaylistDetailPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { useParams, Link } from 'wouter';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Progress } from '@/components/ui/progress';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { ArrowLeft, Play, ThumbsUp, MessageCircle, Clock, CheckCircle2 } from 'lucide-react';\nimport type { Playlist, Video, WatchProgress } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport CommentList from '@/components/CommentList';\nimport QuestionAnswerSection from '@/components/QuestionAnswerSection';\n\nexport default function StudentPlaylistDetailPage() {\n  const { id } = useParams();\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [selectedVideo, setSelectedVideo] = useState<Video | null>(null);\n  const [activeTab, setActiveTab] = useState<'comments' | 'qa'>('comments');\n\n  const { data: playlist } = useQuery<Playlist>({\n    queryKey: ['/api/playlists', id],\n  });\n\n  const { data: videos = [] } = useQuery<Video[]>({\n    queryKey: ['/api/videos'],\n  });\n\n  const { data: watchProgress = [] } = useQuery<WatchProgress[]>({\n    queryKey: ['/api/watch-progress/student', user?.email, 'playlist', id],\n    enabled: !!user?.email && !!id,\n  });\n\n  const playlistVideos = videos.filter(v => v.playlistId === id);\n\n  const markAsWatchedMutation = useMutation({\n    mutationFn: async (videoId: string) => {\n      const response = await apiRequest('POST', '/api/watch-progress', {\n        studentEmail: user?.email,\n        videoId,\n        playlistId: id,\n        progress: 100,\n        completed: 1,\n      });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/watch-progress/student'] });\n      toast({\n        title: 'Progress saved',\n        description: 'Video marked as watched',\n      });\n    },\n  });\n\n  const likeVideoMutation = useMutation({\n    mutationFn: async (videoId: string) => {\n      const response = await apiRequest('POST', `/api/videos/${videoId}/like`);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/videos'] });\n      toast({\n        title: 'Video liked',\n      });\n    },\n  });\n\n  const getVideoUrl = (url: string) => {\n    if (url.includes('youtube.com') || url.includes('youtu.be')) {\n      const videoId = url.includes('youtu.be') \n        ? url.split('/').pop()?.split('?')[0]\n        : new URL(url).searchParams.get('v');\n      return `https://www.youtube.com/embed/${videoId}`;\n    }\n    if (url.includes('vimeo.com')) {\n      const videoId = url.split('/').pop();\n      return `https://player.vimeo.com/video/${videoId}`;\n    }\n    if (url.includes('drive.google.com')) {\n      return url;\n    }\n    return url;\n  };\n\n  const isVideoWatched = (videoId: string) => {\n    return watchProgress.some(p => p.videoId === videoId && p.completed === 1);\n  };\n\n  const watchedCount = playlistVideos.filter(v => isVideoWatched(v.id)).length;\n  const progressPercent = playlistVideos.length > 0 \n    ? Math.round((watchedCount / playlistVideos.length) * 100) \n    : 0;\n\n  if (!playlist) {\n    return (\n      <div className=\"space-y-6\">\n        <Link href=\"/student/playlists\">\n          <Button variant=\"ghost\" size=\"sm\">\n            <ArrowLeft className=\"h-4 w-4 mr-2\" />\n            Back to My Playlists\n          </Button>\n        </Link>\n        <Card className=\"p-12\">\n          <p className=\"text-center text-muted-foreground\">Loading playlist...</p>\n        </Card>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Link href=\"/student/playlists\">\n        <Button variant=\"ghost\" size=\"sm\" data-testid=\"button-back-to-playlists\">\n          <ArrowLeft className=\"h-4 w-4 mr-2\" />\n          Back to My Playlists\n        </Button>\n      </Link>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-start justify-between\">\n            <div className=\"space-y-2 flex-1\">\n              <CardTitle className=\"text-2xl\" data-testid=\"text-playlist-title\">{playlist.name}</CardTitle>\n              <CardDescription className=\"text-base\">\n                By {playlist.tutorName} â€¢ {playlist.category}\n              </CardDescription>\n              {playlist.description && (\n                <p className=\"text-sm text-muted-foreground\">{playlist.description}</p>\n              )}\n            </div>\n            <Badge variant=\"secondary\">\n              {playlistVideos.length} videos\n            </Badge>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <div className=\"flex items-center justify-between\">\n              <span className=\"text-sm font-medium\">Course Progress</span>\n              <span className=\"text-sm text-muted-foreground\">\n                {watchedCount} of {playlistVideos.length} completed\n              </span>\n            </div>\n            <Progress value={progressPercent} className=\"h-3\" />\n            <p className=\"text-xs text-muted-foreground\">{progressPercent}% complete</p>\n          </div>\n        </CardContent>\n      </Card>\n\n      <div className=\"space-y-4\">\n        <h2 className=\"text-xl font-semibold\">Videos</h2>\n        <div className=\"space-y-3\">\n          {playlistVideos.map((video, index) => {\n            const watched = isVideoWatched(video.id);\n            \n            return (\n              <Card key={video.id} className=\"hover-elevate\" data-testid={`card-video-${video.id}`}>\n                <CardContent className=\"p-4\">\n                  <div className=\"flex items-center gap-4\">\n                    <div className=\"flex-shrink-0 w-32 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded overflow-hidden relative\">\n                      <div className=\"absolute inset-0 flex items-center justify-center\">\n                        <Play className=\"h-8 w-8 text-white/80\" />\n                      </div>\n                      {watched && (\n                        <div className=\"absolute top-1 right-1\">\n                          <CheckCircle2 className=\"h-5 w-5 text-green-500 bg-white rounded-full\" />\n                        </div>\n                      )}\n                    </div>\n\n                    <div className=\"flex-1 min-w-0\">\n                      <div className=\"flex items-start justify-between gap-4\">\n                        <div className=\"flex-1 space-y-1\">\n                          <h3 className=\"font-semibold line-clamp-1\" data-testid={`text-video-title-${video.id}`}>\n                            {index + 1}. {video.title}\n                          </h3>\n                          <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                            {video.description}\n                          </p>\n                          <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n                            <span className=\"flex items-center gap-1\">\n                              <Clock className=\"h-3 w-3\" />\n                              {video.duration || '5:30'}\n                            </span>\n                            <span className=\"flex items-center gap-1\">\n                              <ThumbsUp className=\"h-3 w-3\" />\n                              {video.likes}\n                            </span>\n                          </div>\n                        </div>\n\n                        <div className=\"flex items-center gap-2\">\n                          {watched && (\n                            <Badge variant=\"secondary\" className=\"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300\">\n                              Completed\n                            </Badge>\n                          )}\n                          <Button\n                            size=\"sm\"\n                            onClick={() => setSelectedVideo(video)}\n                            data-testid={`button-watch-${video.id}`}\n                          >\n                            <Play className=\"h-4 w-4 mr-1\" />\n                            Watch\n                          </Button>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            );\n          })}\n        </div>\n      </div>\n\n      <Dialog open={!!selectedVideo} onOpenChange={() => setSelectedVideo(null)}>\n        <DialogContent className=\"max-w-5xl max-h-[90vh] overflow-y-auto\">\n          {selectedVideo && (\n            <>\n              <DialogHeader>\n                <DialogTitle data-testid=\"text-video-modal-title\">{selectedVideo.title}</DialogTitle>\n              </DialogHeader>\n\n              <div className=\"space-y-6\">\n                <div className=\"aspect-video bg-black rounded overflow-hidden\">\n                  <iframe\n                    src={getVideoUrl(selectedVideo.videoUrl)}\n                    className=\"w-full h-full\"\n                    allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\"\n                    allowFullScreen\n                    data-testid=\"iframe-video-player\"\n                  />\n                </div>\n\n                <div className=\"flex items-center gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => likeVideoMutation.mutate(selectedVideo.id)}\n                    disabled={likeVideoMutation.isPending}\n                    data-testid=\"button-like-video\"\n                  >\n                    <ThumbsUp className=\"h-4 w-4 mr-1\" />\n                    Like ({selectedVideo.likes})\n                  </Button>\n\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => markAsWatchedMutation.mutate(selectedVideo.id)}\n                    disabled={markAsWatchedMutation.isPending || isVideoWatched(selectedVideo.id)}\n                    data-testid=\"button-mark-watched\"\n                  >\n                    <CheckCircle2 className=\"h-4 w-4 mr-1\" />\n                    {isVideoWatched(selectedVideo.id) ? 'Completed' : 'Mark as Watched'}\n                  </Button>\n                </div>\n\n                <div className=\"space-y-4\">\n                  <div className=\"flex gap-4 border-b\">\n                    <Button\n                      variant={activeTab === 'comments' ? 'secondary' : 'ghost'}\n                      onClick={() => setActiveTab('comments')}\n                      data-testid=\"button-tab-comments\"\n                    >\n                      <MessageCircle className=\"h-4 w-4 mr-2\" />\n                      Comments\n                    </Button>\n                    <Button\n                      variant={activeTab === 'qa' ? 'secondary' : 'ghost'}\n                      onClick={() => setActiveTab('qa')}\n                      data-testid=\"button-tab-qa\"\n                    >\n                      Q&A\n                    </Button>\n                  </div>\n\n                  {activeTab === 'comments' && (\n                    <CommentList videoId={selectedVideo.id} />\n                  )}\n                  \n                  {activeTab === 'qa' && (\n                    <QuestionAnswerSection videoId={selectedVideo.id} />\n                  )}\n                </div>\n              </div>\n            </>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11799},"client/src/pages/student/StudentSubscriptionsPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Download, RefreshCw, CreditCard, Calendar } from 'lucide-react';\nimport { format, differenceInDays } from 'date-fns';\nimport type { Subscription, Playlist } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function StudentSubscriptionsPage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const { data: subscriptions = [] } = useQuery<Subscription[]>({\n    queryKey: ['/api/subscriptions/student', user?.email],\n    enabled: !!user?.email,\n  });\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const getPlaylistName = (playlistId: string) => {\n    const playlist = playlists.find(p => p.id === playlistId);\n    return playlist?.name || 'Unknown Playlist';\n  };\n\n  const getTutorName = (playlistId: string) => {\n    const playlist = playlists.find(p => p.id === playlistId);\n    return playlist?.tutorName || 'Unknown Tutor';\n  };\n\n  const activeSubscriptions = subscriptions.filter(s => s.status === 'active');\n  const expiredSubscriptions = subscriptions.filter(s => s.status === 'expired');\n  const totalSpent = subscriptions.reduce((sum, s) => sum + s.amountPaid, 0);\n\n  const handleDownloadInvoice = (subscription: Subscription) => {\n    const invoiceData = `\nLEARNING MANAGEMENT SYSTEM\nINVOICE\n\nStudent: ${subscription.studentName}\nEmail: ${subscription.studentEmail}\n\nCourse: ${getPlaylistName(subscription.playlistId)}\nTutor: ${getTutorName(subscription.playlistId)}\n\nStart Date: ${format(new Date(subscription.startDate), 'PP')}\nEnd Date: ${format(new Date(subscription.endDate), 'PP')}\nStatus: ${subscription.status}\n\nAmount Paid: â‚¹${subscription.amountPaid}\n\nThank you for your subscription!\n    `.trim();\n\n    const blob = new Blob([invoiceData], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `invoice-${subscription.id}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n\n    toast({\n      title: 'Invoice downloaded',\n      description: 'Your invoice has been downloaded successfully',\n    });\n  };\n\n  const handleRenew = () => {\n    toast({\n      title: 'Renewal coming soon',\n      description: 'This feature will be available soon',\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">My Subscriptions</h1>\n        <p className=\"text-muted-foreground\">\n          Manage your course subscriptions\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Subscriptions</CardTitle>\n            <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{subscriptions.length}</div>\n            <p className=\"text-xs text-muted-foreground\">All time</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Active Subscriptions</CardTitle>\n            <Calendar className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n              {activeSubscriptions.length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Currently active</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Expired Subscriptions</CardTitle>\n            <RefreshCw className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-red-600 dark:text-red-400\">\n              {expiredSubscriptions.length}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Need renewal</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Amount Spent</CardTitle>\n            <CreditCard className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">â‚¹{totalSpent}</div>\n            <p className=\"text-xs text-muted-foreground\">All time</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Subscription History</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {subscriptions.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <CreditCard className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">No subscriptions yet</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                Subscribe to courses to start learning\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Playlist</TableHead>\n                    <TableHead>Tutor</TableHead>\n                    <TableHead>Start Date</TableHead>\n                    <TableHead>End Date</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Amount Paid</TableHead>\n                    <TableHead>Actions</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {subscriptions.map((subscription) => {\n                    const daysRemaining = differenceInDays(new Date(subscription.endDate), new Date());\n                    const isActive = subscription.status === 'active';\n\n                    return (\n                      <TableRow key={subscription.id} data-testid={`row-subscription-${subscription.id}`}>\n                        <TableCell className=\"font-medium\">\n                          {getPlaylistName(subscription.playlistId)}\n                        </TableCell>\n                        <TableCell>{getTutorName(subscription.playlistId)}</TableCell>\n                        <TableCell>{format(new Date(subscription.startDate), 'PP')}</TableCell>\n                        <TableCell>\n                          <div className=\"space-y-1\">\n                            <div>{format(new Date(subscription.endDate), 'PP')}</div>\n                            {isActive && daysRemaining > 0 && (\n                              <div className=\"text-xs text-muted-foreground\">\n                                {daysRemaining} days remaining\n                              </div>\n                            )}\n                          </div>\n                        </TableCell>\n                        <TableCell>\n                          <Badge \n                            variant={isActive ? 'default' : 'secondary'}\n                            className={isActive ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : ''}\n                          >\n                            {subscription.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell className=\"font-semibold\">â‚¹{subscription.amountPaid}</TableCell>\n                        <TableCell>\n                          <div className=\"flex gap-2\">\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => handleDownloadInvoice(subscription)}\n                              data-testid={`button-download-invoice-${subscription.id}`}\n                            >\n                              <Download className=\"h-3 w-3 mr-1\" />\n                              Invoice\n                            </Button>\n                            {!isActive && (\n                              <Button\n                                variant=\"outline\"\n                                size=\"sm\"\n                                onClick={handleRenew}\n                                data-testid={`button-renew-${subscription.id}`}\n                              >\n                                <RefreshCw className=\"h-3 w-3 mr-1\" />\n                                Renew\n                              </Button>\n                            )}\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    );\n                  })}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":9456},"client/src/pages/student/StudentQnaPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { MessageCircle, CheckCircle2, Clock, Plus } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { insertQuestionSchema, type Question, type Video } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\nconst questionFormSchema = insertQuestionSchema;\n\ntype QuestionFormData = z.infer<typeof questionFormSchema>;\n\nexport default function StudentQnaPage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [filter, setFilter] = useState<'all' | 'answered' | 'unanswered'>('all');\n  const [showNewQuestion, setShowNewQuestion] = useState(false);\n\n  const { data: studentQuestions = [] } = useQuery<Question[]>({\n    queryKey: ['/api/questions/student', user?.email],\n    enabled: !!user?.email,\n  });\n\n  const { data: videos = [] } = useQuery<Video[]>({\n    queryKey: ['/api/videos'],\n  });\n\n  const form = useForm<QuestionFormData>({\n    resolver: zodResolver(questionFormSchema),\n    defaultValues: {\n      videoId: '',\n      studentEmail: user?.email || '',\n      studentName: user?.name || '',\n      text: '',\n    },\n  });\n\n  const createQuestionMutation = useMutation({\n    mutationFn: async (data: QuestionFormData) => {\n      const response = await apiRequest('POST', '/api/questions', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/questions/student', user?.email] });\n      setShowNewQuestion(false);\n      form.reset({\n        videoId: '',\n        studentEmail: user?.email || '',\n        studentName: user?.name || '',\n        text: '',\n      });\n      toast({\n        title: 'Question posted',\n        description: 'Your question has been submitted successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to post question',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const getVideoTitle = (videoId: string) => {\n    const video = videos.find((v: Video) => v.id === videoId);\n    return video?.title || 'Unknown Video';\n  };\n\n  const filteredQuestions = studentQuestions.filter((q: Question) => {\n    if (filter === 'answered') return q.answer !== null;\n    if (filter === 'unanswered') return q.answer === null;\n    return true;\n  });\n\n  const answeredCount = studentQuestions.filter((q: Question) => q.answer !== null).length;\n  const unansweredCount = studentQuestions.filter((q: Question) => q.answer === null).length;\n\n  const handleOpenDialog = () => {\n    form.reset({\n      videoId: '',\n      studentEmail: user?.email || '',\n      studentName: user?.name || '',\n      text: '',\n    });\n    setShowNewQuestion(true);\n  };\n\n  const handleSubmit = (data: QuestionFormData) => {\n    createQuestionMutation.mutate(data);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Comments & Q&A</h1>\n          <p className=\"text-muted-foreground\">\n            View your questions and get answers from tutors\n          </p>\n        </div>\n        <Button onClick={handleOpenDialog} data-testid=\"button-new-question\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Ask Question\n        </Button>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Questions</CardTitle>\n            <MessageCircle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{studentQuestions.length}</div>\n            <p className=\"text-xs text-muted-foreground\">All time</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Answered</CardTitle>\n            <CheckCircle2 className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n              {answeredCount}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Received answers</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Pending</CardTitle>\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600 dark:text-orange-400\">\n              {unansweredCount}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Waiting for answer</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Your Questions</CardTitle>\n            <div className=\"flex gap-2\">\n              <Button\n                variant={filter === 'all' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter('all')}\n                data-testid=\"button-filter-all\"\n              >\n                All\n              </Button>\n              <Button\n                variant={filter === 'answered' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter('answered')}\n                data-testid=\"button-filter-answered\"\n              >\n                Answered\n              </Button>\n              <Button\n                variant={filter === 'unanswered' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter('unanswered')}\n                data-testid=\"button-filter-unanswered\"\n              >\n                Unanswered\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {filteredQuestions.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <MessageCircle className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">No questions found</h3>\n              <p className=\"text-muted-foreground mb-4\">\n                {filter === 'all' \n                  ? 'Ask a question to get started'\n                  : `No ${filter} questions`}\n              </p>\n              {filter === 'all' && (\n                <Button onClick={handleOpenDialog}>\n                  Ask Your First Question\n                </Button>\n              )}\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Video</TableHead>\n                    <TableHead>Question</TableHead>\n                    <TableHead>Tutor Reply</TableHead>\n                    <TableHead>Date</TableHead>\n                    <TableHead>Status</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredQuestions.map((question: Question) => (\n                    <TableRow key={question.id} data-testid={`row-question-${question.id}`}>\n                      <TableCell className=\"font-medium max-w-xs\">\n                        <div className=\"line-clamp-2\">\n                          {getVideoTitle(question.videoId)}\n                        </div>\n                      </TableCell>\n                      <TableCell className=\"max-w-md\">\n                        <div className=\"line-clamp-3\">{question.text}</div>\n                      </TableCell>\n                      <TableCell className=\"max-w-md\">\n                        {question.answer ? (\n                          <div className=\"space-y-1\">\n                            <div className=\"line-clamp-3\">{question.answer}</div>\n                            {question.answeredAt && (\n                              <div className=\"text-xs text-muted-foreground\">\n                                {format(new Date(question.answeredAt), 'PP')}\n                              </div>\n                            )}\n                          </div>\n                        ) : (\n                          <span className=\"text-muted-foreground italic\">No answer yet</span>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        {format(new Date(question.createdAt), 'PP')}\n                      </TableCell>\n                      <TableCell>\n                        <Badge \n                          variant={question.answer ? 'default' : 'secondary'}\n                          className={question.answer ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300'}\n                        >\n                          {question.answer ? 'Answered' : 'Pending'}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Dialog open={showNewQuestion} onOpenChange={setShowNewQuestion}>\n        <DialogContent data-testid=\"dialog-new-question\">\n          <DialogHeader>\n            <DialogTitle>Ask a Question</DialogTitle>\n            <DialogDescription>\n              Select a video and ask your question\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"videoId\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Select Video</FormLabel>\n                    <Select onValueChange={field.onChange} value={field.value}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-video\">\n                          <SelectValue placeholder=\"Choose a video\" />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        {videos.map((video: Video) => (\n                          <SelectItem key={video.id} value={video.id}>\n                            {video.title}\n                          </SelectItem>\n                        ))}\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"text\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Your Question</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"Type your question here...\"\n                        rows={5}\n                        data-testid=\"textarea-question\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <DialogFooter>\n                <Button \n                  type=\"button\" \n                  variant=\"outline\" \n                  onClick={() => setShowNewQuestion(false)}\n                >\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createQuestionMutation.isPending}\n                  data-testid=\"button-submit-question\"\n                >\n                  {createQuestionMutation.isPending ? 'Posting...' : 'Post Question'}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":13154},"client/src/pages/tutor/TutorUploadVideosPage.tsx":{"content":"import UnifiedVideoManager from '@/components/UnifiedVideoManager';\n\nexport default function TutorUploadVideosPage() {\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Upload Videos</h1>\n        <p className=\"text-muted-foreground\">\n          Add videos from YouTube, Vimeo, Google Drive, or upload files directly\n        </p>\n      </div>\n\n      <UnifiedVideoManager />\n    </div>\n  );\n}\n","size_bytes":468},"client/src/pages/admin/AdminSettingsPage.tsx":{"content":"import { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from '@/components/ui/form';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Separator } from '@/components/ui/separator';\nimport { Save, LogOut } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/context/AuthContext';\nimport { useLocation } from 'wouter';\n\nconst pricingFormSchema = z.object({\n  monthlyPrice: z.string().min(1, 'Monthly price is required'),\n  yearlyPrice: z.string().min(1, 'Yearly price is required'),\n  currency: z.string().min(1, 'Currency is required'),\n  tax: z.string().min(1, 'Tax percentage is required'),\n});\n\nconst profileFormSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  currentPassword: z.string().optional(),\n  newPassword: z.string().optional(),\n}).refine((data) => {\n  if (data.newPassword && !data.currentPassword) {\n    return false;\n  }\n  return true;\n}, {\n  message: \"Current password is required to set new password\",\n  path: [\"currentPassword\"],\n});\n\ntype PricingFormData = z.infer<typeof pricingFormSchema>;\ntype ProfileFormData = z.infer<typeof profileFormSchema>;\n\nexport default function AdminSettingsPage() {\n  const { toast } = useToast();\n  const { user, logout } = useAuth();\n  const [, setLocation] = useLocation();\n\n  const pricingForm = useForm<PricingFormData>({\n    resolver: zodResolver(pricingFormSchema),\n    defaultValues: {\n      monthlyPrice: '500',\n      yearlyPrice: '5000',\n      currency: 'INR',\n      tax: '18',\n    },\n  });\n\n  const profileForm = useForm<ProfileFormData>({\n    resolver: zodResolver(profileFormSchema),\n    defaultValues: {\n      name: user?.name || 'Admin',\n      email: user?.email || 'admin@lms.com',\n      currentPassword: '',\n      newPassword: '',\n    },\n  });\n\n  const handlePricingSubmit = (data: PricingFormData) => {\n    console.log('Pricing data:', data);\n    toast({\n      title: 'Settings updated',\n      description: 'Subscription pricing has been updated successfully',\n    });\n  };\n\n  const handleProfileSubmit = (data: ProfileFormData) => {\n    console.log('Profile data:', data);\n    toast({\n      title: 'Profile updated',\n      description: 'Your admin profile has been updated successfully',\n    });\n    profileForm.setValue('currentPassword', '');\n    profileForm.setValue('newPassword', '');\n  };\n\n  const handleLogout = () => {\n    logout();\n    setLocation('/');\n    toast({\n      title: 'Logged out',\n      description: 'You have been logged out successfully',\n    });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Settings</h1>\n        <p className=\"text-muted-foreground\">\n          Manage platform configuration and your admin profile\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Subscription Pricing</CardTitle>\n          <CardDescription>\n            Configure subscription pricing and currency settings\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...pricingForm}>\n            <form onSubmit={pricingForm.handleSubmit(handlePricingSubmit)} className=\"space-y-4\">\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={pricingForm.control}\n                  name=\"monthlyPrice\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Monthly Subscription</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"number\" placeholder=\"500\" data-testid=\"input-monthly-price\" />\n                      </FormControl>\n                      <FormDescription>Price per month</FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={pricingForm.control}\n                  name=\"yearlyPrice\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Yearly Subscription</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"number\" placeholder=\"5000\" data-testid=\"input-yearly-price\" />\n                      </FormControl>\n                      <FormDescription>Price per year</FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={pricingForm.control}\n                  name=\"currency\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Currency</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-currency\">\n                            <SelectValue placeholder=\"Select currency\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"INR\">INR (â‚¹)</SelectItem>\n                          <SelectItem value=\"USD\">USD ($)</SelectItem>\n                          <SelectItem value=\"EUR\">EUR (â‚¬)</SelectItem>\n                          <SelectItem value=\"GBP\">GBP (Â£)</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={pricingForm.control}\n                  name=\"tax\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tax Percentage</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"number\" placeholder=\"18\" data-testid=\"input-tax\" />\n                      </FormControl>\n                      <FormDescription>Tax % on subscriptions</FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-save-pricing\">\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  Save Pricing\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Admin Profile</CardTitle>\n          <CardDescription>\n            Update your personal information and password\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...profileForm}>\n            <form onSubmit={profileForm.handleSubmit(handleProfileSubmit)} className=\"space-y-4\">\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={profileForm.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Full Name</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"Admin Name\" data-testid=\"input-name\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={profileForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email Address</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"email\" placeholder=\"admin@example.com\" data-testid=\"input-email\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <Separator />\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={profileForm.control}\n                  name=\"currentPassword\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Current Password</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"password\" placeholder=\"Enter current password\" data-testid=\"input-current-password\" />\n                      </FormControl>\n                      <FormDescription>Leave empty to keep current password</FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={profileForm.control}\n                  name=\"newPassword\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>New Password</FormLabel>\n                      <FormControl>\n                        <Input {...field} type=\"password\" placeholder=\"Enter new password\" data-testid=\"input-new-password\" />\n                      </FormControl>\n                      <FormDescription>Min 6 characters</FormDescription>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-save-profile\">\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  Save Profile\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Account Actions</CardTitle>\n          <CardDescription>\n            Manage your admin session\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Button variant=\"destructive\" onClick={handleLogout} data-testid=\"button-logout\">\n            <LogOut className=\"h-4 w-4 mr-2\" />\n            Logout\n          </Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":10770},"client/src/pages/admin/AdminUsersPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Search, Eye, Download, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { format } from 'date-fns';\nimport type { Subscription, Playlist } from '@shared/schema';\n\nexport default function AdminUsersPage() {\n  const [searchQuery, setSearchQuery] = useState('');\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'expired'>('all');\n  const [selectedUser, setSelectedUser] = useState<Subscription | null>(null);\n  const [currentPage, setCurrentPage] = useState(1);\n  const itemsPerPage = 10;\n\n  const { data: subscriptions = [] } = useQuery<Subscription[]>({\n    queryKey: ['/api/subscriptions'],\n  });\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const getPlaylistName = (playlistId: string) => {\n    const playlist = playlists.find(p => p.id === playlistId);\n    return playlist?.name || 'Unknown Playlist';\n  };\n\n  const filteredSubscriptions = subscriptions.filter((sub) => {\n    const matchesSearch = \n      sub.studentName.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      sub.studentEmail.toLowerCase().includes(searchQuery.toLowerCase()) ||\n      getPlaylistName(sub.playlistId).toLowerCase().includes(searchQuery.toLowerCase());\n    \n    const matchesStatus = \n      statusFilter === 'all' || \n      (statusFilter === 'active' && sub.status === 'active') ||\n      (statusFilter === 'expired' && sub.status === 'expired');\n\n    return matchesSearch && matchesStatus;\n  });\n\n  const totalPages = Math.ceil(filteredSubscriptions.length / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const paginatedSubscriptions = filteredSubscriptions.slice(startIndex, startIndex + itemsPerPage);\n\n  const downloadInvoice = (sub: Subscription) => {\n    const invoice = `\nINVOICE\n\nStudent: ${sub.studentName}\nEmail: ${sub.studentEmail}\nPlaylist: ${getPlaylistName(sub.playlistId)}\n\nSubscription Details:\nStart Date: ${format(new Date(sub.startDate), 'MMM dd, yyyy')}\nEnd Date: ${format(new Date(sub.endDate), 'MMM dd, yyyy')}\nStatus: ${sub.status}\n\nAmount Paid: â‚¹${sub.amountPaid}\n\nThank you for your subscription!\n    `;\n    \n    const blob = new Blob([invoice], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `invoice-${sub.studentEmail}-${Date.now()}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">User Management</h1>\n        <p className=\"text-muted-foreground\">\n          View and manage all registered users and their subscriptions\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex flex-col md:flex-row items-start md:items-center justify-between gap-4\">\n            <CardTitle>All Users</CardTitle>\n            <div className=\"flex flex-col sm:flex-row gap-2 w-full md:w-auto\">\n              <div className=\"relative flex-1 md:w-64\">\n                <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground\" />\n                <Input\n                  placeholder=\"Search by name, email, or playlist...\"\n                  value={searchQuery}\n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  className=\"pl-9\"\n                  data-testid=\"input-search-users\"\n                />\n              </div>\n              <Select value={statusFilter} onValueChange={(value: any) => setStatusFilter(value)}>\n                <SelectTrigger className=\"w-full sm:w-32\" data-testid=\"select-status-filter\">\n                  <SelectValue />\n                </SelectTrigger>\n                <SelectContent>\n                  <SelectItem value=\"all\">All</SelectItem>\n                  <SelectItem value=\"active\">Active</SelectItem>\n                  <SelectItem value=\"expired\">Expired</SelectItem>\n                </SelectContent>\n              </Select>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {paginatedSubscriptions.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-muted-foreground\">No users found</p>\n            </div>\n          ) : (\n            <>\n              <div className=\"overflow-x-auto\">\n                <Table>\n                  <TableHeader>\n                    <TableRow>\n                      <TableHead>User Name</TableHead>\n                      <TableHead>Email</TableHead>\n                      <TableHead>Playlist</TableHead>\n                      <TableHead>Start Date</TableHead>\n                      <TableHead>Due Date</TableHead>\n                      <TableHead>Amount Paid</TableHead>\n                      <TableHead>Status</TableHead>\n                      <TableHead>Actions</TableHead>\n                    </TableRow>\n                  </TableHeader>\n                  <TableBody>\n                    {paginatedSubscriptions.map((sub) => (\n                      <TableRow key={sub.id} data-testid={`row-user-${sub.id}`}>\n                        <TableCell className=\"font-medium\">{sub.studentName}</TableCell>\n                        <TableCell>{sub.studentEmail}</TableCell>\n                        <TableCell>{getPlaylistName(sub.playlistId)}</TableCell>\n                        <TableCell>{format(new Date(sub.startDate), 'MMM dd, yyyy')}</TableCell>\n                        <TableCell>{format(new Date(sub.endDate), 'MMM dd, yyyy')}</TableCell>\n                        <TableCell className=\"font-semibold\">â‚¹{sub.amountPaid}</TableCell>\n                        <TableCell>\n                          <Badge\n                            variant={sub.status === 'active' ? 'default' : 'secondary'}\n                            className={sub.status === 'active' ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300'}\n                          >\n                            {sub.status}\n                          </Badge>\n                        </TableCell>\n                        <TableCell>\n                          <div className=\"flex gap-2\">\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => setSelectedUser(sub)}\n                              data-testid={`button-view-${sub.id}`}\n                            >\n                              <Eye className=\"h-3 w-3 mr-1\" />\n                              View\n                            </Button>\n                            <Button\n                              variant=\"outline\"\n                              size=\"sm\"\n                              onClick={() => downloadInvoice(sub)}\n                              data-testid={`button-invoice-${sub.id}`}\n                            >\n                              <Download className=\"h-3 w-3\" />\n                            </Button>\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    ))}\n                  </TableBody>\n                </Table>\n              </div>\n\n              {totalPages > 1 && (\n                <div className=\"flex items-center justify-between mt-4\">\n                  <p className=\"text-sm text-muted-foreground\">\n                    Showing {startIndex + 1} to {Math.min(startIndex + itemsPerPage, filteredSubscriptions.length)} of {filteredSubscriptions.length} users\n                  </p>\n                  <div className=\"flex gap-2\">\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(p => Math.max(1, p - 1))}\n                      disabled={currentPage === 1}\n                      data-testid=\"button-prev-page\"\n                    >\n                      <ChevronLeft className=\"h-4 w-4\" />\n                    </Button>\n                    <span className=\"flex items-center px-3 text-sm\">\n                      Page {currentPage} of {totalPages}\n                    </span>\n                    <Button\n                      variant=\"outline\"\n                      size=\"sm\"\n                      onClick={() => setCurrentPage(p => Math.min(totalPages, p + 1))}\n                      disabled={currentPage === totalPages}\n                      data-testid=\"button-next-page\"\n                    >\n                      <ChevronRight className=\"h-4 w-4\" />\n                    </Button>\n                  </div>\n                </div>\n              )}\n            </>\n          )}\n        </CardContent>\n      </Card>\n\n      <Dialog open={!!selectedUser} onOpenChange={() => setSelectedUser(null)}>\n        <DialogContent data-testid=\"dialog-user-details\">\n          <DialogHeader>\n            <DialogTitle>User Details</DialogTitle>\n            <DialogDescription>Complete subscription information</DialogDescription>\n          </DialogHeader>\n          \n          {selectedUser && (\n            <div className=\"space-y-4\">\n              <div className=\"grid gap-2\">\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">Name:</span>\n                  <span className=\"text-sm\">{selectedUser.studentName}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">Email:</span>\n                  <span className=\"text-sm\">{selectedUser.studentEmail}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">Playlist:</span>\n                  <span className=\"text-sm\">{getPlaylistName(selectedUser.playlistId)}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">Status:</span>\n                  <Badge\n                    variant={selectedUser.status === 'active' ? 'default' : 'secondary'}\n                    className={selectedUser.status === 'active' ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : ''}\n                  >\n                    {selectedUser.status}\n                  </Badge>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">Start Date:</span>\n                  <span className=\"text-sm\">{format(new Date(selectedUser.startDate), 'MMMM dd, yyyy')}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">End Date:</span>\n                  <span className=\"text-sm\">{format(new Date(selectedUser.endDate), 'MMMM dd, yyyy')}</span>\n                </div>\n                <div className=\"flex justify-between\">\n                  <span className=\"text-sm font-medium\">Amount Paid:</span>\n                  <span className=\"text-sm font-semibold\">â‚¹{selectedUser.amountPaid}</span>\n                </div>\n              </div>\n\n              <Button onClick={() => downloadInvoice(selectedUser)} className=\"w-full\">\n                <Download className=\"h-4 w-4 mr-2\" />\n                Download Invoice\n              </Button>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":12090},"client/src/pages/tutor/TutorProfilePage.tsx":{"content":"import { useState } from 'react';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { z } from 'zod';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Separator } from '@/components/ui/separator';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage, FormDescription } from '@/components/ui/form';\nimport { User, Mail, Lock, Save, CreditCard } from 'lucide-react';\nimport { useAuth } from '@/context/AuthContext';\nimport { useToast } from '@/hooks/use-toast';\n\nconst profileFormSchema = z.object({\n  name: z.string().min(2, 'Name must be at least 2 characters'),\n  email: z.string().email('Invalid email address'),\n  bio: z.string().max(500, 'Bio must be less than 500 characters').optional(),\n  profilePicture: z.string().url().optional().or(z.literal('')),\n});\n\nconst passwordFormSchema = z.object({\n  currentPassword: z.string().min(6, 'Password must be at least 6 characters'),\n  newPassword: z.string().min(6, 'Password must be at least 6 characters'),\n  confirmPassword: z.string().min(6, 'Password must be at least 6 characters'),\n}).refine((data) => data.newPassword === data.confirmPassword, {\n  message: \"Passwords don't match\",\n  path: [\"confirmPassword\"],\n});\n\nconst paymentFormSchema = z.object({\n  accountName: z.string().min(2, 'Account name is required'),\n  accountNumber: z.string().min(8, 'Account number must be at least 8 digits'),\n  bankName: z.string().min(2, 'Bank name is required'),\n  ifscCode: z.string().min(11, 'IFSC code must be 11 characters').max(11),\n});\n\ntype ProfileFormData = z.infer<typeof profileFormSchema>;\ntype PasswordFormData = z.infer<typeof passwordFormSchema>;\ntype PaymentFormData = z.infer<typeof paymentFormSchema>;\n\nexport default function TutorProfilePage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const profileForm = useForm<ProfileFormData>({\n    resolver: zodResolver(profileFormSchema),\n    defaultValues: {\n      name: user?.name || '',\n      email: user?.email || '',\n      bio: '',\n      profilePicture: '',\n    },\n  });\n\n  const passwordForm = useForm<PasswordFormData>({\n    resolver: zodResolver(passwordFormSchema),\n    defaultValues: {\n      currentPassword: '',\n      newPassword: '',\n      confirmPassword: '',\n    },\n  });\n\n  const paymentForm = useForm<PaymentFormData>({\n    resolver: zodResolver(paymentFormSchema),\n    defaultValues: {\n      accountName: '',\n      accountNumber: '',\n      bankName: '',\n      ifscCode: '',\n    },\n  });\n\n  const handleProfileSubmit = (data: ProfileFormData) => {\n    console.log('Profile data:', data);\n    toast({\n      title: 'Profile updated',\n      description: 'Your profile has been updated successfully',\n    });\n  };\n\n  const handlePasswordSubmit = (data: PasswordFormData) => {\n    console.log('Password data:', data);\n    toast({\n      title: 'Password changed',\n      description: 'Your password has been changed successfully',\n    });\n    passwordForm.reset();\n  };\n\n  const handlePaymentSubmit = (data: PaymentFormData) => {\n    console.log('Payment data:', data);\n    toast({\n      title: 'Payment info saved',\n      description: 'Your payment information has been updated',\n    });\n  };\n\n  const getInitials = (name: string) => {\n    return name\n      .split(' ')\n      .map(n => n[0])\n      .join('')\n      .toUpperCase()\n      .slice(0, 2);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Profile Settings</h1>\n        <p className=\"text-muted-foreground\">\n          Manage your tutor profile and account settings\n        </p>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Profile Information</CardTitle>\n          <CardDescription>\n            Update your personal information and profile picture\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...profileForm}>\n            <form onSubmit={profileForm.handleSubmit(handleProfileSubmit)} className=\"space-y-6\">\n              <div className=\"flex items-center gap-6\">\n                <Avatar className=\"h-24 w-24\">\n                  <AvatarImage src={profileForm.watch('profilePicture')} />\n                  <AvatarFallback className=\"text-2xl\">\n                    {user?.name ? getInitials(user.name) : 'TU'}\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"flex-1 space-y-2\">\n                  <FormField\n                    control={profileForm.control}\n                    name=\"profilePicture\"\n                    render={({ field }) => (\n                      <FormItem>\n                        <FormLabel>Profile Picture URL</FormLabel>\n                        <FormControl>\n                          <Input\n                            {...field}\n                            placeholder=\"https://example.com/avatar.jpg\"\n                            data-testid=\"input-profile-picture\"\n                          />\n                        </FormControl>\n                        <FormDescription className=\"text-xs\">\n                          Enter a URL for your profile picture\n                        </FormDescription>\n                        <FormMessage />\n                      </FormItem>\n                    )}\n                  />\n                </div>\n              </div>\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={profileForm.control}\n                  name=\"name\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Full Name</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          placeholder=\"John Doe\"\n                          data-testid=\"input-name\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={profileForm.control}\n                  name=\"email\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Email Address</FormLabel>\n                      <FormControl>\n                        <Input\n                          {...field}\n                          type=\"email\"\n                          placeholder=\"tutor@example.com\"\n                          data-testid=\"input-email\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={profileForm.control}\n                name=\"bio\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Bio</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"Tell students about yourself...\"\n                        rows={4}\n                        data-testid=\"textarea-bio\"\n                      />\n                    </FormControl>\n                    <FormDescription>\n                      Brief description about your expertise and teaching style\n                    </FormDescription>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-save-profile\">\n                  <Save className=\"h-4 w-4 mr-2\" />\n                  Save Changes\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Change Password</CardTitle>\n          <CardDescription>\n            Update your password to keep your account secure\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...passwordForm}>\n            <form onSubmit={passwordForm.handleSubmit(handlePasswordSubmit)} className=\"space-y-4\">\n              <FormField\n                control={passwordForm.control}\n                name=\"currentPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Current Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"password\"\n                        placeholder=\"Enter current password\"\n                        data-testid=\"input-current-password\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"newPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>New Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"password\"\n                        placeholder=\"Enter new password\"\n                        data-testid=\"input-new-password\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={passwordForm.control}\n                name=\"confirmPassword\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Confirm New Password</FormLabel>\n                    <FormControl>\n                      <Input\n                        {...field}\n                        type=\"password\"\n                        placeholder=\"Confirm new password\"\n                        data-testid=\"input-confirm-password\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-change-password\">\n                  <Lock className=\"h-4 w-4 mr-2\" />\n                  Change Password\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Payment Information</CardTitle>\n          <CardDescription>\n            Add your bank details for receiving payments\n          </CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...paymentForm}>\n            <form onSubmit={paymentForm.handleSubmit(handlePaymentSubmit)} className=\"space-y-4\">\n              <FormField\n                control={paymentForm.control}\n                name=\"accountName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Account Holder Name</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"John Doe\" data-testid=\"input-account-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={paymentForm.control}\n                  name=\"accountNumber\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Account Number</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"1234567890\" data-testid=\"input-account-number\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={paymentForm.control}\n                  name=\"ifscCode\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>IFSC Code</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"SBIN0001234\" maxLength={11} data-testid=\"input-ifsc-code\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={paymentForm.control}\n                name=\"bankName\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Bank Name</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"State Bank of India\" data-testid=\"input-bank-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"flex justify-end\">\n                <Button type=\"submit\" data-testid=\"button-save-payment\">\n                  <CreditCard className=\"h-4 w-4 mr-2\" />\n                  Save Payment Info\n                </Button>\n              </div>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":13714},"client/src/pages/tutor/TutorEarningsPage.tsx":{"content":"import { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { DollarSign, TrendingUp, Users, PlaySquare } from 'lucide-react';\nimport { format } from 'date-fns';\nimport type { Subscription, Playlist } from '@shared/schema';\nimport { useAuth } from '@/context/AuthContext';\n\nexport default function TutorEarningsPage() {\n  const { user } = useAuth();\n\n  const { data: subscriptions = [] } = useQuery<Subscription[]>({\n    queryKey: ['/api/subscriptions'],\n  });\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const tutorPlaylists = playlists.filter(p => p.tutorName === user?.name);\n  const tutorPlaylistIds = tutorPlaylists.map(p => p.id);\n  const tutorSubscriptions = subscriptions.filter(s => tutorPlaylistIds.includes(s.playlistId));\n\n  const totalEarnings = tutorSubscriptions.reduce((sum, s) => sum + s.amountPaid, 0);\n  const activeSubscriptions = tutorSubscriptions.filter(s => s.status === 'active');\n  const thisMonth = new Date();\n  thisMonth.setDate(1);\n  const monthlyEarnings = tutorSubscriptions\n    .filter(s => new Date(s.createdAt) >= thisMonth)\n    .reduce((sum, s) => sum + s.amountPaid, 0);\n\n  const earningsByPlaylist = tutorPlaylists.map(playlist => {\n    const playlistSubs = tutorSubscriptions.filter(s => s.playlistId === playlist.id);\n    const earnings = playlistSubs.reduce((sum, s) => sum + s.amountPaid, 0);\n    const subscribers = playlistSubs.length;\n    const latestSub = playlistSubs.sort((a, b) => \n      new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime()\n    )[0];\n\n    return {\n      playlist,\n      earnings,\n      subscribers,\n      lastPayment: latestSub ? new Date(latestSub.createdAt) : null,\n    };\n  });\n\n  const stats = [\n    {\n      title: 'Total Earnings',\n      value: `â‚¹${totalEarnings.toLocaleString()}`,\n      description: 'All time revenue',\n      icon: DollarSign,\n      iconBg: 'bg-green-100 dark:bg-green-900',\n      iconColor: 'text-green-600 dark:text-green-400',\n    },\n    {\n      title: 'This Month',\n      value: `â‚¹${monthlyEarnings.toLocaleString()}`,\n      description: 'Current month earnings',\n      icon: TrendingUp,\n      iconBg: 'bg-blue-100 dark:bg-blue-900',\n      iconColor: 'text-blue-600 dark:text-blue-400',\n    },\n    {\n      title: 'Active Subscribers',\n      value: activeSubscriptions.length.toString(),\n      description: 'Currently enrolled',\n      icon: Users,\n      iconBg: 'bg-purple-100 dark:bg-purple-900',\n      iconColor: 'text-purple-600 dark:text-purple-400',\n    },\n    {\n      title: 'Earning Playlists',\n      value: earningsByPlaylist.filter(e => e.subscribers > 0).length.toString(),\n      description: `Out of ${tutorPlaylists.length} total`,\n      icon: PlaySquare,\n      iconBg: 'bg-orange-100 dark:bg-orange-900',\n      iconColor: 'text-orange-600 dark:text-orange-400',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Earnings Summary</h1>\n        <p className=\"text-muted-foreground\">\n          Track your revenue from course subscriptions\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} data-testid={`card-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{stat.title}</CardTitle>\n                <div className={`h-8 w-8 rounded-full flex items-center justify-center ${stat.iconBg}`}>\n                  <Icon className={`h-4 w-4 ${stat.iconColor}`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{stat.value}</div>\n                <p className=\"text-xs text-muted-foreground\">{stat.description}</p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <Card>\n        <CardHeader>\n          <CardTitle>Earnings by Playlist</CardTitle>\n        </CardHeader>\n        <CardContent>\n          {earningsByPlaylist.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <PlaySquare className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">No playlists yet</h3>\n              <p className=\"text-muted-foreground\">Create playlists to start earning</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Playlist</TableHead>\n                    <TableHead>Category</TableHead>\n                    <TableHead>Subscribers</TableHead>\n                    <TableHead>Earnings</TableHead>\n                    <TableHead>Last Payment</TableHead>\n                    <TableHead>Status</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {earningsByPlaylist.map(({ playlist, earnings, subscribers, lastPayment }) => (\n                    <TableRow key={playlist.id} data-testid={`row-earnings-${playlist.id}`}>\n                      <TableCell className=\"font-medium\">{playlist.name}</TableCell>\n                      <TableCell>\n                        <Badge variant=\"outline\">{playlist.category}</Badge>\n                      </TableCell>\n                      <TableCell>{subscribers}</TableCell>\n                      <TableCell className=\"font-semibold\">â‚¹{earnings.toLocaleString()}</TableCell>\n                      <TableCell>\n                        {lastPayment ? format(lastPayment, 'MMM d, yyyy') : 'No payments'}\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant={subscribers > 0 ? 'default' : 'secondary'}\n                          className={subscribers > 0 ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : ''}\n                        >\n                          {subscribers > 0 ? 'Active' : 'No Subscribers'}\n                        </Badge>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":6722},"client/src/pages/admin/AdminPaymentsPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { DollarSign, AlertCircle, CheckCircle2, Clock, Download } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, ResponsiveContainer } from 'recharts';\nimport type { Subscription, Playlist } from '@shared/schema';\n\nexport default function AdminPaymentsPage() {\n  const [statusFilter, setStatusFilter] = useState<'all' | 'active' | 'expired'>('all');\n\n  const { data: subscriptions = [] } = useQuery<Subscription[]>({\n    queryKey: ['/api/subscriptions'],\n  });\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const getPlaylistName = (playlistId: string) => {\n    const playlist = playlists.find(p => p.id === playlistId);\n    return playlist?.name || 'Unknown Playlist';\n  };\n\n  const filteredPayments = subscriptions.filter((sub) => {\n    if (statusFilter === 'all') return true;\n    return statusFilter === 'active' ? sub.status === 'active' : sub.status === 'expired';\n  });\n\n  const totalEarnings = subscriptions.reduce((sum, s) => sum + s.amountPaid, 0);\n  const pendingPayments = subscriptions.filter(s => s.status === 'active' && new Date(s.endDate) > new Date()).length;\n  const failedTransactions = 0; // Mock data\n\n  // Monthly earnings data\n  const monthlyData = subscriptions.reduce((acc, sub) => {\n    const month = format(new Date(sub.startDate), 'MMM yyyy');\n    const existing = acc.find(item => item.month === month);\n    if (existing) {\n      existing.earnings += sub.amountPaid;\n    } else {\n      acc.push({ month, earnings: sub.amountPaid });\n    }\n    return acc;\n  }, [] as { month: string; earnings: number }[]);\n\n  const downloadInvoice = (sub: Subscription) => {\n    const invoice = `\nPAYMENT INVOICE\n\nStudent: ${sub.studentName}\nEmail: ${sub.studentEmail}\nPlaylist: ${getPlaylistName(sub.playlistId)}\n\nPayment Date: ${format(new Date(sub.startDate), 'MMM dd, yyyy')}\nAmount: â‚¹${sub.amountPaid}\nStatus: ${sub.status === 'active' ? 'Success' : 'Completed'}\n\nThank you for your payment!\n    `;\n    \n    const blob = new Blob([invoice], { type: 'text/plain' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement('a');\n    link.href = url;\n    link.download = `payment-${sub.studentEmail}-${Date.now()}.txt`;\n    link.click();\n    URL.revokeObjectURL(url);\n  };\n\n  const stats = [\n    {\n      title: 'Total Earnings',\n      value: `â‚¹${totalEarnings.toLocaleString()}`,\n      description: 'All time revenue',\n      icon: DollarSign,\n      iconBg: 'bg-green-100 dark:bg-green-900',\n      iconColor: 'text-green-600 dark:text-green-400',\n    },\n    {\n      title: 'Pending Payments',\n      value: pendingPayments.toString(),\n      description: 'Active subscriptions',\n      icon: Clock,\n      iconBg: 'bg-blue-100 dark:bg-blue-900',\n      iconColor: 'text-blue-600 dark:text-blue-400',\n    },\n    {\n      title: 'Successful',\n      value: subscriptions.length.toString(),\n      description: 'Total transactions',\n      icon: CheckCircle2,\n      iconBg: 'bg-purple-100 dark:bg-purple-900',\n      iconColor: 'text-purple-600 dark:text-purple-400',\n    },\n    {\n      title: 'Failed',\n      value: failedTransactions.toString(),\n      description: 'Failed transactions',\n      icon: AlertCircle,\n      iconBg: 'bg-red-100 dark:bg-red-900',\n      iconColor: 'text-red-600 dark:text-red-400',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Payment Management</h1>\n        <p className=\"text-muted-foreground\">\n          Track and manage all payment transactions\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\n        {stats.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} data-testid={`card-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{stat.title}</CardTitle>\n                <div className={`h-8 w-8 rounded-full flex items-center justify-center ${stat.iconBg}`}>\n                  <Icon className={`h-4 w-4 ${stat.iconColor}`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\">{stat.value}</div>\n                <p className=\"text-xs text-muted-foreground\">{stat.description}</p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      {monthlyData.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Monthly Earnings</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={250}>\n              <BarChart data={monthlyData}>\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-muted\" />\n                <XAxis dataKey=\"month\" className=\"text-xs\" />\n                <YAxis className=\"text-xs\" />\n                <Tooltip \n                  contentStyle={{ backgroundColor: 'hsl(var(--card))', border: '1px solid hsl(var(--border))' }}\n                  labelStyle={{ color: 'hsl(var(--foreground))' }}\n                />\n                <Legend />\n                <Bar dataKey=\"earnings\" fill=\"hsl(var(--primary))\" name=\"Earnings (â‚¹)\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      )}\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>All Transactions</CardTitle>\n            <Select value={statusFilter} onValueChange={(value: any) => setStatusFilter(value)}>\n              <SelectTrigger className=\"w-32\" data-testid=\"select-status-filter\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All</SelectItem>\n                <SelectItem value=\"active\">Active</SelectItem>\n                <SelectItem value=\"expired\">Completed</SelectItem>\n              </SelectContent>\n            </Select>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {filteredPayments.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <p className=\"text-muted-foreground\">No transactions found</p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>User Name</TableHead>\n                    <TableHead>Email</TableHead>\n                    <TableHead>Playlist</TableHead>\n                    <TableHead>Payment Date</TableHead>\n                    <TableHead>Amount</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Invoice</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredPayments.map((payment) => (\n                    <TableRow key={payment.id} data-testid={`row-payment-${payment.id}`}>\n                      <TableCell className=\"font-medium\">{payment.studentName}</TableCell>\n                      <TableCell>{payment.studentEmail}</TableCell>\n                      <TableCell>{getPlaylistName(payment.playlistId)}</TableCell>\n                      <TableCell>{format(new Date(payment.startDate), 'MMM dd, yyyy')}</TableCell>\n                      <TableCell className=\"font-semibold\">â‚¹{payment.amountPaid}</TableCell>\n                      <TableCell>\n                        <Badge\n                          variant=\"default\"\n                          className=\"bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300\"\n                        >\n                          Success\n                        </Badge>\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => downloadInvoice(payment)}\n                          data-testid={`button-invoice-${payment.id}`}\n                        >\n                          <Download className=\"h-3 w-3\" />\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":9048},"client/src/pages/admin/AdminPlaylistsPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Plus, Edit2, Trash2, PlaySquare, Eye, Video } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { insertPlaylistSchema, type Playlist, type InsertPlaylist } from '@shared/schema';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\ntype PlaylistFormData = InsertPlaylist;\n\nexport default function AdminPlaylistsPage() {\n  const { toast } = useToast();\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const [editingPlaylist, setEditingPlaylist] = useState<Playlist | null>(null);\n  const [deletingPlaylist, setDeletingPlaylist] = useState<Playlist | null>(null);\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const form = useForm<PlaylistFormData>({\n    resolver: zodResolver(insertPlaylistSchema),\n    defaultValues: {\n      name: '',\n      description: '',\n      tutorName: 'Admin',\n      category: 'General',\n      thumbnail: '',\n      isPublic: 1,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: PlaylistFormData) => {\n      const response = await apiRequest('POST', '/api/playlists', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/playlists'] });\n      setShowCreateDialog(false);\n      form.reset();\n      toast({\n        title: 'Playlist created',\n        description: 'The playlist has been created successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to create playlist',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const updateMutation = useMutation({\n    mutationFn: async ({ id, data }: { id: string; data: PlaylistFormData }) => {\n      const response = await apiRequest('PATCH', `/api/playlists/${id}`, data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/playlists'] });\n      setEditingPlaylist(null);\n      form.reset();\n      toast({\n        title: 'Playlist updated',\n        description: 'The playlist has been updated successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to update playlist',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/playlists/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/playlists'] });\n      setDeletingPlaylist(null);\n      toast({\n        title: 'Playlist deleted',\n        description: 'The playlist has been removed',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to delete playlist',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleSubmit = (data: PlaylistFormData) => {\n    if (editingPlaylist) {\n      updateMutation.mutate({ id: editingPlaylist.id, data });\n    } else {\n      createMutation.mutate(data);\n    }\n  };\n\n  const handleOpenEdit = (playlist: Playlist) => {\n    setEditingPlaylist(playlist);\n    form.reset({\n      name: playlist.name,\n      description: playlist.description || '',\n      tutorName: playlist.tutorName,\n      category: playlist.category,\n      thumbnail: playlist.thumbnail || '',\n      isPublic: playlist.isPublic,\n    });\n  };\n\n  const handleDelete = (playlist: Playlist) => {\n    setDeletingPlaylist(playlist);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Playlist Management</h1>\n          <p className=\"text-muted-foreground\">\n            View and manage all course playlists on the platform\n          </p>\n        </div>\n        <Button onClick={() => setShowCreateDialog(true)} data-testid=\"button-create-playlist\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Add New Playlist\n        </Button>\n      </div>\n\n      {playlists.length === 0 ? (\n        <Card className=\"p-12\">\n          <div className=\"text-center space-y-2\">\n            <PlaySquare className=\"h-16 w-16 mx-auto text-muted-foreground\" />\n            <h3 className=\"text-lg font-semibold\">No playlists yet</h3>\n            <p className=\"text-muted-foreground\">Create your first playlist to get started</p>\n            <Button onClick={() => setShowCreateDialog(true)} className=\"mt-4\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Add Playlist\n            </Button>\n          </div>\n        </Card>\n      ) : (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {playlists.map((playlist) => (\n            <Card key={playlist.id} className=\"overflow-hidden hover-elevate\" data-testid={`card-playlist-${playlist.id}`}>\n              <div className=\"aspect-video bg-gradient-to-br from-blue-500 to-purple-600 relative\">\n                {playlist.thumbnail ? (\n                  <img\n                    src={playlist.thumbnail}\n                    alt={playlist.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <PlaySquare className=\"h-16 w-16 text-white/80\" />\n                  </div>\n                )}\n                <div className=\"absolute top-2 right-2\">\n                  <Badge variant=\"secondary\" className=\"bg-black/50 text-white border-0\">\n                    <Video className=\"h-3 w-3 mr-1\" />\n                    {playlist.videoCount || 0} videos\n                  </Badge>\n                </div>\n              </div>\n\n              <CardHeader className=\"pb-3\">\n                <div className=\"space-y-2\">\n                  <CardTitle className=\"line-clamp-1\" data-testid={`text-playlist-title-${playlist.id}`}>\n                    {playlist.name}\n                  </CardTitle>\n                  <div className=\"flex gap-2\">\n                    <Badge variant=\"outline\" className=\"w-fit\">\n                      {playlist.category}\n                    </Badge>\n                    <Badge variant=\"outline\" className=\"w-fit\">\n                      {playlist.isPublic ? 'Public' : 'Private'}\n                    </Badge>\n                  </div>\n                </div>\n              </CardHeader>\n\n              <CardContent>\n                {playlist.description && (\n                  <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                    {playlist.description}\n                  </p>\n                )}\n                <div className=\"mt-2 flex items-center gap-2 text-xs text-muted-foreground\">\n                  <span>By {playlist.tutorName}</span>\n                  <span>â€¢</span>\n                  <span>{format(new Date(playlist.createdAt), 'MMM d, yyyy')}</span>\n                </div>\n              </CardContent>\n\n              <CardFooter className=\"flex gap-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleOpenEdit(playlist)}\n                  className=\"flex-1\"\n                  data-testid={`button-edit-${playlist.id}`}\n                >\n                  <Edit2 className=\"h-3 w-3 mr-1\" />\n                  Edit\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleDelete(playlist)}\n                  data-testid={`button-delete-${playlist.id}`}\n                >\n                  <Trash2 className=\"h-3 w-3\" />\n                </Button>\n              </CardFooter>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <Dialog open={showCreateDialog || !!editingPlaylist} onOpenChange={(open) => {\n        if (!open) {\n          setShowCreateDialog(false);\n          setEditingPlaylist(null);\n          form.reset();\n        }\n      }}>\n        <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-playlist-form\">\n          <DialogHeader>\n            <DialogTitle>{editingPlaylist ? 'Edit Playlist' : 'Add New Playlist'}</DialogTitle>\n            <DialogDescription>\n              {editingPlaylist ? 'Update playlist information' : 'Create a new course playlist'}\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(handleSubmit)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Playlist Title</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Introduction to Programming\" data-testid=\"input-playlist-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Description</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"Learn programming fundamentals...\"\n                        rows={3}\n                        data-testid=\"textarea-playlist-description\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={form.control}\n                  name=\"tutorName\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Tutor Name</FormLabel>\n                      <FormControl>\n                        <Input {...field} placeholder=\"John Doe\" data-testid=\"input-tutor-name\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"category\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Category</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-playlist-category\">\n                            <SelectValue placeholder=\"Select category\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"Programming\">Programming</SelectItem>\n                          <SelectItem value=\"Design\">Design</SelectItem>\n                          <SelectItem value=\"Business\">Business</SelectItem>\n                          <SelectItem value=\"Marketing\">Marketing</SelectItem>\n                          <SelectItem value=\"Math\">Math</SelectItem>\n                          <SelectItem value=\"Science\">Science</SelectItem>\n                          <SelectItem value=\"General\">General</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"isPublic\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Visibility</FormLabel>\n                    <Select onValueChange={(value) => field.onChange(parseInt(value))} value={field.value.toString()}>\n                      <FormControl>\n                        <SelectTrigger data-testid=\"select-playlist-visibility\">\n                          <SelectValue />\n                        </SelectTrigger>\n                      </FormControl>\n                      <SelectContent>\n                        <SelectItem value=\"1\">Public</SelectItem>\n                        <SelectItem value=\"0\">Private</SelectItem>\n                      </SelectContent>\n                    </Select>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"thumbnail\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Thumbnail URL (Optional)</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"https://example.com/image.jpg\" data-testid=\"input-playlist-thumbnail\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <DialogFooter>\n                <Button type=\"button\" variant=\"outline\" onClick={() => {\n                  setShowCreateDialog(false);\n                  setEditingPlaylist(null);\n                  form.reset();\n                }}>\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending || updateMutation.isPending}\n                  data-testid=\"button-save-playlist\"\n                >\n                  {(createMutation.isPending || updateMutation.isPending) ? 'Saving...' : editingPlaylist ? 'Save Changes' : 'Create Playlist'}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={!!deletingPlaylist} onOpenChange={() => setDeletingPlaylist(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Playlist?</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete \"{deletingPlaylist?.name}\"? This action cannot be undone and will remove all associated videos.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => deletingPlaylist && deleteMutation.mutate(deletingPlaylist.id)}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":15899},"client/src/pages/tutor/TutorCommentsPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { MessageCircle, CheckCircle2, Clock, Reply } from 'lucide-react';\nimport { format } from 'date-fns';\nimport type { Question, Video } from '@shared/schema';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\n\nexport default function TutorCommentsPage() {\n  const { toast } = useToast();\n  const [filter, setFilter] = useState<'all' | 'answered' | 'unanswered'>('all');\n  const [replyingTo, setReplyingTo] = useState<Question | null>(null);\n  const [replyText, setReplyText] = useState('');\n  const [searchQuery, setSearchQuery] = useState('');\n\n  const { data: questions = [] } = useQuery<Question[]>({\n    queryKey: ['/api/questions'],\n  });\n\n  const { data: videos = [] } = useQuery<Video[]>({\n    queryKey: ['/api/videos'],\n  });\n\n  const answerMutation = useMutation({\n    mutationFn: async ({ id, answer }: { id: string; answer: string }) => {\n      const response = await apiRequest('POST', `/api/questions/${id}/answer`, { answer });\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/questions'] });\n      setReplyingTo(null);\n      setReplyText('');\n      toast({\n        title: 'Answer posted',\n        description: 'Your answer has been sent to the student',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to post answer',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const getVideoTitle = (videoId: string) => {\n    const video = videos.find((v: Video) => v.id === videoId);\n    return video?.title || 'Unknown Video';\n  };\n\n  const filteredQuestions = questions\n    .filter((q: Question) => {\n      if (filter === 'answered') return q.answer !== null;\n      if (filter === 'unanswered') return q.answer === null;\n      return true;\n    })\n    .filter((q: Question) => {\n      if (!searchQuery) return true;\n      const query = searchQuery.toLowerCase();\n      return (\n        q.text.toLowerCase().includes(query) ||\n        q.studentName.toLowerCase().includes(query) ||\n        getVideoTitle(q.videoId).toLowerCase().includes(query)\n      );\n    });\n\n  const answeredCount = questions.filter((q: Question) => q.answer !== null).length;\n  const unansweredCount = questions.filter((q: Question) => q.answer === null).length;\n\n  const handleReply = () => {\n    if (!replyingTo || !replyText.trim()) return;\n    answerMutation.mutate({ id: replyingTo.id, answer: replyText });\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">Comments & Questions</h1>\n        <p className=\"text-muted-foreground\">\n          Respond to student questions and feedback\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-3\">\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Total Questions</CardTitle>\n            <MessageCircle className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold\">{questions.length}</div>\n            <p className=\"text-xs text-muted-foreground\">From all students</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Answered</CardTitle>\n            <CheckCircle2 className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-green-600 dark:text-green-400\">\n              {answeredCount}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Replies sent</p>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n            <CardTitle className=\"text-sm font-medium\">Pending</CardTitle>\n            <Clock className=\"h-4 w-4 text-muted-foreground\" />\n          </CardHeader>\n          <CardContent>\n            <div className=\"text-2xl font-bold text-orange-600 dark:text-orange-400\">\n              {unansweredCount}\n            </div>\n            <p className=\"text-xs text-muted-foreground\">Need attention</p>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Card>\n        <CardHeader>\n          <div className=\"flex items-center justify-between\">\n            <CardTitle>Student Questions</CardTitle>\n            <div className=\"flex gap-2\">\n              <Input\n                placeholder=\"Search questions...\"\n                value={searchQuery}\n                onChange={(e) => setSearchQuery(e.target.value)}\n                className=\"w-64\"\n                data-testid=\"input-search-questions\"\n              />\n              <Button\n                variant={filter === 'all' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter('all')}\n                data-testid=\"button-filter-all\"\n              >\n                All\n              </Button>\n              <Button\n                variant={filter === 'unanswered' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter('unanswered')}\n                data-testid=\"button-filter-unanswered\"\n              >\n                Unanswered\n              </Button>\n              <Button\n                variant={filter === 'answered' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setFilter('answered')}\n                data-testid=\"button-filter-answered\"\n              >\n                Answered\n              </Button>\n            </div>\n          </div>\n        </CardHeader>\n        <CardContent>\n          {filteredQuestions.length === 0 ? (\n            <div className=\"text-center py-12\">\n              <MessageCircle className=\"h-16 w-16 mx-auto text-muted-foreground mb-4\" />\n              <h3 className=\"text-lg font-semibold mb-2\">No questions found</h3>\n              <p className=\"text-muted-foreground\">\n                {filter === 'all' ? 'No student questions yet' : `No ${filter} questions`}\n              </p>\n            </div>\n          ) : (\n            <div className=\"overflow-x-auto\">\n              <Table>\n                <TableHeader>\n                  <TableRow>\n                    <TableHead>Student</TableHead>\n                    <TableHead>Video</TableHead>\n                    <TableHead>Question</TableHead>\n                    <TableHead>Date</TableHead>\n                    <TableHead>Status</TableHead>\n                    <TableHead>Action</TableHead>\n                  </TableRow>\n                </TableHeader>\n                <TableBody>\n                  {filteredQuestions.map((question: Question) => (\n                    <TableRow key={question.id} data-testid={`row-question-${question.id}`}>\n                      <TableCell className=\"font-medium\">\n                        {question.studentName}\n                      </TableCell>\n                      <TableCell className=\"max-w-xs\">\n                        <div className=\"line-clamp-2\">\n                          {getVideoTitle(question.videoId)}\n                        </div>\n                      </TableCell>\n                      <TableCell className=\"max-w-md\">\n                        <div className=\"line-clamp-3\">{question.text}</div>\n                        {question.answer && (\n                          <div className=\"mt-2 p-2 bg-muted rounded-md\">\n                            <p className=\"text-sm font-medium mb-1\">Your Reply:</p>\n                            <p className=\"text-sm text-muted-foreground line-clamp-2\">{question.answer}</p>\n                          </div>\n                        )}\n                      </TableCell>\n                      <TableCell>\n                        {format(new Date(question.createdAt), 'MMM d, yyyy')}\n                      </TableCell>\n                      <TableCell>\n                        <Badge\n                          variant={question.answer ? 'default' : 'secondary'}\n                          className={question.answer ? 'bg-green-100 dark:bg-green-900 text-green-700 dark:text-green-300' : 'bg-orange-100 dark:bg-orange-900 text-orange-700 dark:text-orange-300'}\n                        >\n                          {question.answer ? 'Answered' : 'Pending'}\n                        </Badge>\n                      </TableCell>\n                      <TableCell>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={() => {\n                            setReplyingTo(question);\n                            setReplyText(question.answer || '');\n                          }}\n                          data-testid={`button-reply-${question.id}`}\n                        >\n                          <Reply className=\"h-3 w-3 mr-1\" />\n                          {question.answer ? 'Edit' : 'Reply'}\n                        </Button>\n                      </TableCell>\n                    </TableRow>\n                  ))}\n                </TableBody>\n              </Table>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n\n      <Dialog open={!!replyingTo} onOpenChange={() => setReplyingTo(null)}>\n        <DialogContent data-testid=\"dialog-reply\">\n          <DialogHeader>\n            <DialogTitle>Reply to Question</DialogTitle>\n            <DialogDescription>\n              From: {replyingTo?.studentName}\n            </DialogDescription>\n          </DialogHeader>\n\n          <div className=\"space-y-4\">\n            <div className=\"p-3 bg-muted rounded-md\">\n              <p className=\"text-sm font-medium mb-1\">Student's Question:</p>\n              <p className=\"text-sm\">{replyingTo?.text}</p>\n            </div>\n\n            <div>\n              <label className=\"text-sm font-medium mb-2 block\">Your Answer:</label>\n              <Textarea\n                placeholder=\"Type your answer here...\"\n                value={replyText}\n                onChange={(e) => setReplyText(e.target.value)}\n                rows={6}\n                data-testid=\"textarea-reply\"\n              />\n            </div>\n          </div>\n\n          <DialogFooter>\n            <Button variant=\"outline\" onClick={() => setReplyingTo(null)}>\n              Cancel\n            </Button>\n            <Button\n              onClick={handleReply}\n              disabled={!replyText.trim() || answerMutation.isPending}\n              data-testid=\"button-send-reply\"\n            >\n              {answerMutation.isPending ? 'Sending...' : 'Send Reply'}\n            </Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n}\n","size_bytes":11478},"client/src/pages/tutor/TutorPlaylistsPage.tsx":{"content":"import { useState } from 'react';\nimport { useQuery, useMutation } from '@tanstack/react-query';\nimport { useForm } from 'react-hook-form';\nimport { zodResolver } from '@hookform/resolvers/zod';\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Dialog, DialogContent, DialogDescription, DialogFooter, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from '@/components/ui/form';\nimport { Input } from '@/components/ui/input';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle } from '@/components/ui/alert-dialog';\nimport { Plus, Edit2, Trash2, PlaySquare, Eye } from 'lucide-react';\nimport { format } from 'date-fns';\nimport { insertPlaylistSchema, type Playlist, type InsertPlaylist } from '@shared/schema';\nimport { apiRequest, queryClient } from '@/lib/queryClient';\nimport { useToast } from '@/hooks/use-toast';\nimport { useAuth } from '@/context/AuthContext';\n\ntype PlaylistFormData = InsertPlaylist;\n\nexport default function TutorPlaylistsPage() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [showCreateDialog, setShowCreateDialog] = useState(false);\n  const [editingPlaylist, setEditingPlaylist] = useState<Playlist | null>(null);\n  const [deletingPlaylist, setDeletingPlaylist] = useState<Playlist | null>(null);\n\n  const { data: playlists = [] } = useQuery<Playlist[]>({\n    queryKey: ['/api/playlists'],\n  });\n\n  const form = useForm<PlaylistFormData>({\n    resolver: zodResolver(insertPlaylistSchema),\n    defaultValues: {\n      name: '',\n      description: '',\n      tutorName: user?.name || '',\n      category: 'General',\n      thumbnail: '',\n      isPublic: 1,\n    },\n  });\n\n  const createMutation = useMutation({\n    mutationFn: async (data: PlaylistFormData) => {\n      const response = await apiRequest('POST', '/api/playlists', data);\n      return response.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/playlists'] });\n      setShowCreateDialog(false);\n      form.reset();\n      toast({\n        title: 'Playlist created',\n        description: 'Your playlist has been created successfully',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to create playlist',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const deleteMutation = useMutation({\n    mutationFn: async (id: string) => {\n      await apiRequest('DELETE', `/api/playlists/${id}`);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: ['/api/playlists'] });\n      setDeletingPlaylist(null);\n      toast({\n        title: 'Playlist deleted',\n        description: 'The playlist has been removed',\n      });\n    },\n    onError: () => {\n      toast({\n        title: 'Failed to delete playlist',\n        description: 'Please try again later',\n        variant: 'destructive',\n      });\n    },\n  });\n\n  const handleCreate = (data: PlaylistFormData) => {\n    createMutation.mutate(data);\n  };\n\n  const handleOpenEdit = (playlist: Playlist) => {\n    setEditingPlaylist(playlist);\n    form.reset({\n      name: playlist.name,\n      description: playlist.description || '',\n      tutorName: playlist.tutorName,\n      category: playlist.category,\n      thumbnail: playlist.thumbnail || '',\n      isPublic: playlist.isPublic,\n    });\n  };\n\n  const handleDelete = (playlist: Playlist) => {\n    setDeletingPlaylist(playlist);\n  };\n\n  const tutorPlaylists = playlists.filter(p => p.tutorName === user?.name);\n\n  return (\n    <div className=\"space-y-6\">\n      <div className=\"flex items-center justify-between\">\n        <div>\n          <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">My Playlists</h1>\n          <p className=\"text-muted-foreground\">\n            Create and manage your course playlists\n          </p>\n        </div>\n        <Button onClick={() => setShowCreateDialog(true)} data-testid=\"button-create-playlist\">\n          <Plus className=\"h-4 w-4 mr-2\" />\n          Create New Playlist\n        </Button>\n      </div>\n\n      {tutorPlaylists.length === 0 ? (\n        <Card className=\"p-12\">\n          <div className=\"text-center space-y-2\">\n            <PlaySquare className=\"h-16 w-16 mx-auto text-muted-foreground\" />\n            <h3 className=\"text-lg font-semibold\">No playlists yet</h3>\n            <p className=\"text-muted-foreground\">Create your first playlist to start organizing videos</p>\n            <Button onClick={() => setShowCreateDialog(true)} className=\"mt-4\">\n              <Plus className=\"h-4 w-4 mr-2\" />\n              Create Playlist\n            </Button>\n          </div>\n        </Card>\n      ) : (\n        <div className=\"grid gap-6 md:grid-cols-2 lg:grid-cols-3\">\n          {tutorPlaylists.map((playlist) => (\n            <Card key={playlist.id} className=\"overflow-hidden hover-elevate\" data-testid={`card-playlist-${playlist.id}`}>\n              <div className=\"aspect-video bg-gradient-to-br from-blue-500 to-purple-600 relative\">\n                {playlist.thumbnail ? (\n                  <img\n                    src={playlist.thumbnail}\n                    alt={playlist.name}\n                    className=\"w-full h-full object-cover\"\n                  />\n                ) : (\n                  <div className=\"absolute inset-0 flex items-center justify-center\">\n                    <PlaySquare className=\"h-16 w-16 text-white/80\" />\n                  </div>\n                )}\n                <div className=\"absolute top-2 right-2\">\n                  <Badge variant=\"secondary\" className=\"bg-black/50 text-white border-0\">\n                    {playlist.videoCount || 0} videos\n                  </Badge>\n                </div>\n              </div>\n\n              <CardHeader className=\"pb-3\">\n                <div className=\"space-y-2\">\n                  <CardTitle className=\"line-clamp-1\" data-testid={`text-playlist-title-${playlist.id}`}>\n                    {playlist.name}\n                  </CardTitle>\n                  <Badge variant=\"outline\" className=\"w-fit\">\n                    {playlist.category}\n                  </Badge>\n                </div>\n              </CardHeader>\n\n              <CardContent>\n                {playlist.description && (\n                  <p className=\"text-sm text-muted-foreground line-clamp-2\">\n                    {playlist.description}\n                  </p>\n                )}\n                <div className=\"mt-2 flex items-center gap-3 text-xs text-muted-foreground\">\n                  <span>{format(new Date(playlist.createdAt), 'MMM d, yyyy')}</span>\n                  <span>â€¢</span>\n                  <span>{playlist.isPublic ? 'Public' : 'Private'}</span>\n                </div>\n              </CardContent>\n\n              <CardFooter className=\"flex gap-2\">\n                <Button variant=\"outline\" size=\"sm\" className=\"flex-1\">\n                  <Eye className=\"h-3 w-3 mr-1\" />\n                  View\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleOpenEdit(playlist)}\n                  data-testid={`button-edit-${playlist.id}`}\n                >\n                  <Edit2 className=\"h-3 w-3\" />\n                </Button>\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  onClick={() => handleDelete(playlist)}\n                  data-testid={`button-delete-${playlist.id}`}\n                >\n                  <Trash2 className=\"h-3 w-3\" />\n                </Button>\n              </CardFooter>\n            </Card>\n          ))}\n        </div>\n      )}\n\n      <Dialog open={showCreateDialog || !!editingPlaylist} onOpenChange={(open) => {\n        if (!open) {\n          setShowCreateDialog(false);\n          setEditingPlaylist(null);\n          form.reset();\n        }\n      }}>\n        <DialogContent className=\"max-w-2xl\" data-testid=\"dialog-playlist-form\">\n          <DialogHeader>\n            <DialogTitle>{editingPlaylist ? 'Edit Playlist' : 'Create New Playlist'}</DialogTitle>\n            <DialogDescription>\n              {editingPlaylist ? 'Update your playlist information' : 'Add a new playlist to organize your videos'}\n            </DialogDescription>\n          </DialogHeader>\n\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit(handleCreate)} className=\"space-y-4\">\n              <FormField\n                control={form.control}\n                name=\"name\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Playlist Title</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"Introduction to React\" data-testid=\"input-playlist-name\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <FormField\n                control={form.control}\n                name=\"description\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Description</FormLabel>\n                    <FormControl>\n                      <Textarea\n                        {...field}\n                        placeholder=\"Learn React from scratch...\"\n                        rows={3}\n                        data-testid=\"textarea-playlist-description\"\n                      />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <div className=\"grid gap-4 md:grid-cols-2\">\n                <FormField\n                  control={form.control}\n                  name=\"category\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Category</FormLabel>\n                      <Select onValueChange={field.onChange} value={field.value}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-playlist-category\">\n                            <SelectValue placeholder=\"Select category\" />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"Programming\">Programming</SelectItem>\n                          <SelectItem value=\"Design\">Design</SelectItem>\n                          <SelectItem value=\"Business\">Business</SelectItem>\n                          <SelectItem value=\"Marketing\">Marketing</SelectItem>\n                          <SelectItem value=\"General\">General</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n\n                <FormField\n                  control={form.control}\n                  name=\"isPublic\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Visibility</FormLabel>\n                      <Select onValueChange={(value) => field.onChange(parseInt(value))} value={field.value.toString()}>\n                        <FormControl>\n                          <SelectTrigger data-testid=\"select-playlist-visibility\">\n                            <SelectValue />\n                          </SelectTrigger>\n                        </FormControl>\n                        <SelectContent>\n                          <SelectItem value=\"1\">Public</SelectItem>\n                          <SelectItem value=\"0\">Private</SelectItem>\n                        </SelectContent>\n                      </Select>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n\n              <FormField\n                control={form.control}\n                name=\"thumbnail\"\n                render={({ field }) => (\n                  <FormItem>\n                    <FormLabel>Thumbnail URL (Optional)</FormLabel>\n                    <FormControl>\n                      <Input {...field} placeholder=\"https://example.com/image.jpg\" data-testid=\"input-playlist-thumbnail\" />\n                    </FormControl>\n                    <FormMessage />\n                  </FormItem>\n                )}\n              />\n\n              <DialogFooter>\n                <Button type=\"button\" variant=\"outline\" onClick={() => {\n                  setShowCreateDialog(false);\n                  setEditingPlaylist(null);\n                  form.reset();\n                }}>\n                  Cancel\n                </Button>\n                <Button\n                  type=\"submit\"\n                  disabled={createMutation.isPending}\n                  data-testid=\"button-save-playlist\"\n                >\n                  {createMutation.isPending ? 'Saving...' : editingPlaylist ? 'Save Changes' : 'Create Playlist'}\n                </Button>\n              </DialogFooter>\n            </form>\n          </Form>\n        </DialogContent>\n      </Dialog>\n\n      <AlertDialog open={!!deletingPlaylist} onOpenChange={() => setDeletingPlaylist(null)}>\n        <AlertDialogContent>\n          <AlertDialogHeader>\n            <AlertDialogTitle>Delete Playlist?</AlertDialogTitle>\n            <AlertDialogDescription>\n              Are you sure you want to delete \"{deletingPlaylist?.name}\"? This action cannot be undone.\n            </AlertDialogDescription>\n          </AlertDialogHeader>\n          <AlertDialogFooter>\n            <AlertDialogCancel>Cancel</AlertDialogCancel>\n            <AlertDialogAction\n              onClick={() => deletingPlaylist && deleteMutation.mutate(deletingPlaylist.id)}\n              className=\"bg-destructive text-destructive-foreground hover:bg-destructive/90\"\n            >\n              Delete\n            </AlertDialogAction>\n          </AlertDialogFooter>\n        </AlertDialogContent>\n      </AlertDialog>\n    </div>\n  );\n}\n","size_bytes":14387},"client/src/pages/superadmin/SuperAdminDashboardPage.tsx":{"content":"import { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Users, Shield, GraduationCap, BookOpen, Activity } from 'lucide-react';\n\nexport default function SuperAdminDashboardPage() {\n  const stats = [\n    {\n      title: 'Total Users',\n      value: '1,234',\n      icon: Users,\n      description: 'All platform users',\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-100 dark:bg-blue-900/20',\n    },\n    {\n      title: 'Admins',\n      value: '12',\n      icon: Shield,\n      description: 'Platform administrators',\n      color: 'text-purple-600',\n      bgColor: 'bg-purple-100 dark:bg-purple-900/20',\n    },\n    {\n      title: 'Tutors',\n      value: '89',\n      icon: GraduationCap,\n      description: 'Content creators',\n      color: 'text-green-600',\n      bgColor: 'bg-green-100 dark:bg-green-900/20',\n    },\n    {\n      title: 'Students',\n      value: '1,133',\n      icon: BookOpen,\n      description: 'Active learners',\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-100 dark:bg-orange-900/20',\n    },\n    {\n      title: 'System Status',\n      value: 'Healthy',\n      icon: Activity,\n      description: 'All systems operational',\n      color: 'text-emerald-600',\n      bgColor: 'bg-emerald-100 dark:bg-emerald-900/20',\n    },\n  ];\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          Super Admin Dashboard\n        </h1>\n        <p className=\"text-muted-foreground\">\n          System-wide overview and access control management\n        </p>\n      </div>\n\n      <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5\">\n        {stats.map((stat) => {\n          const Icon = stat.icon;\n          return (\n            <Card key={stat.title} data-testid={`card-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium\">{stat.title}</CardTitle>\n                <div className={`p-2 rounded-lg ${stat.bgColor}`}>\n                  <Icon className={`h-4 w-4 ${stat.color}`} />\n                </div>\n              </CardHeader>\n              <CardContent>\n                <div className=\"text-2xl font-bold\" data-testid={`text-stat-${stat.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                  {stat.value}\n                </div>\n                <p className=\"text-xs text-muted-foreground mt-1\">\n                  {stat.description}\n                </p>\n              </CardContent>\n            </Card>\n          );\n        })}\n      </div>\n\n      <div className=\"grid gap-6 md:grid-cols-2\">\n        <Card>\n          <CardHeader>\n            <CardTitle>Quick Actions</CardTitle>\n          </CardHeader>\n          <CardContent className=\"space-y-2\">\n            <div className=\"p-3 rounded-lg border hover-elevate cursor-pointer\" data-testid=\"button-manage-access\">\n              <div className=\"flex items-center gap-3\">\n                <Shield className=\"h-5 w-5 text-primary\" />\n                <div>\n                  <div className=\"font-medium\">Manage Access Control</div>\n                  <div className=\"text-sm text-muted-foreground\">Configure role permissions</div>\n                </div>\n              </div>\n            </div>\n            <div className=\"p-3 rounded-lg border hover-elevate cursor-pointer\" data-testid=\"button-system-logs\">\n              <div className=\"flex items-center gap-3\">\n                <Activity className=\"h-5 w-5 text-primary\" />\n                <div>\n                  <div className=\"font-medium\">System Logs</div>\n                  <div className=\"text-sm text-muted-foreground\">View platform activity</div>\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader>\n            <CardTitle>Platform Overview</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-3\">\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Active Sessions</span>\n                <span className=\"font-medium\">423</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Total Playlists</span>\n                <span className=\"font-medium\">156</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Total Videos</span>\n                <span className=\"font-medium\">2,847</span>\n              </div>\n              <div className=\"flex justify-between items-center\">\n                <span className=\"text-sm text-muted-foreground\">Storage Used</span>\n                <span className=\"font-medium\">234 GB</span>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n}\n","size_bytes":5060},"client/src/pages/superadmin/SuperAdminAccessControlPage.tsx":{"content":"import { useState, useEffect } from 'react';\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Checkbox } from '@/components/ui/checkbox';\nimport { Button } from '@/components/ui/button';\nimport { Label } from '@/components/ui/label';\nimport { Badge } from '@/components/ui/badge';\nimport { Save, Shield, GraduationCap, BookOpen, ChevronDown, ChevronUp } from 'lucide-react';\nimport { usePermissions } from '@/context/PermissionsContext';\nimport { useToast } from '@/hooks/use-toast';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\n\nconst roleConfig = {\n  admin: {\n    name: 'Admin',\n    icon: Shield,\n    color: 'bg-purple-100 dark:bg-purple-900/20 text-purple-600',\n    availableFeatures: [\n      'Dashboard',\n      'Users',\n      'Playlists',\n      'Payments',\n      'Invoices',\n      'Analytics',\n      'Settings',\n    ],\n  },\n  tutor: {\n    name: 'Tutor',\n    icon: GraduationCap,\n    color: 'bg-green-100 dark:bg-green-900/20 text-green-600',\n    availableFeatures: [\n      'Dashboard',\n      'My Playlists',\n      'Upload Videos',\n      'Comments & Q&A',\n      'Earnings',\n      'Profile',\n    ],\n  },\n  student: {\n    name: 'Student',\n    icon: BookOpen,\n    color: 'bg-blue-100 dark:bg-blue-900/20 text-blue-600',\n    availableFeatures: [\n      'Dashboard',\n      'My Playlists',\n      'Explore',\n      'Subscriptions',\n      'Q&A',\n      'Profile',\n    ],\n  },\n};\n\nexport default function SuperAdminAccessControlPage() {\n  const { permissions, updateAllPermissions } = usePermissions();\n  const { toast } = useToast();\n  const [localPermissions, setLocalPermissions] = useState(permissions);\n  const [expandedRoles, setExpandedRoles] = useState<Record<string, boolean>>({\n    admin: true,\n    tutor: true,\n    student: true,\n  });\n\n  // Sync local permissions with context permissions when they change\n  useEffect(() => {\n    setLocalPermissions(permissions);\n  }, [permissions]);\n\n  const handleFeatureToggle = (role: keyof typeof roleConfig, feature: string) => {\n    setLocalPermissions((prev) => {\n      const currentFeatures = prev[role];\n      const isChecked = currentFeatures.includes(feature);\n\n      return {\n        ...prev,\n        [role]: isChecked\n          ? currentFeatures.filter((f) => f !== feature)\n          : [...currentFeatures, feature],\n      };\n    });\n  };\n\n  const handleSaveChanges = () => {\n    updateAllPermissions(localPermissions);\n\n    toast({\n      title: 'Changes Saved',\n      description: 'Role permissions have been updated successfully',\n    });\n\n    console.log('Updated permissions:', localPermissions);\n  };\n\n  const toggleRoleExpansion = (role: string) => {\n    setExpandedRoles((prev) => ({\n      ...prev,\n      [role]: !prev[role],\n    }));\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-bold\" data-testid=\"text-page-title\">\n          Access Control\n        </h1>\n        <p className=\"text-muted-foreground\">\n          Manage feature permissions for each role\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        {Object.entries(roleConfig).map(([roleKey, config]) => {\n          const Icon = config.icon;\n          const role = roleKey as keyof typeof roleConfig;\n          const selectedCount = localPermissions[role]?.length || 0;\n          const totalCount = config.availableFeatures.length;\n          const isExpanded = expandedRoles[role];\n\n          return (\n            <Card key={role} data-testid={`card-role-${role}`}>\n              <Collapsible open={isExpanded} onOpenChange={() => toggleRoleExpansion(role)}>\n                <CardHeader>\n                  <CollapsibleTrigger asChild>\n                    <div className=\"flex items-center justify-between cursor-pointer\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className={`p-2 rounded-lg ${config.color}`}>\n                          <Icon className=\"h-5 w-5\" />\n                        </div>\n                        <div>\n                          <CardTitle className=\"text-xl\">{config.name}</CardTitle>\n                          <CardDescription>\n                            {selectedCount} of {totalCount} features enabled\n                          </CardDescription>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        <Badge variant=\"secondary\" data-testid={`badge-count-${role}`}>\n                          {selectedCount}/{totalCount}\n                        </Badge>\n                        {isExpanded ? (\n                          <ChevronUp className=\"h-5 w-5 text-muted-foreground\" />\n                        ) : (\n                          <ChevronDown className=\"h-5 w-5 text-muted-foreground\" />\n                        )}\n                      </div>\n                    </div>\n                  </CollapsibleTrigger>\n                </CardHeader>\n\n                <CollapsibleContent>\n                  <CardContent>\n                    <div className=\"grid gap-4 sm:grid-cols-2 lg:grid-cols-3\">\n                      {config.availableFeatures.map((feature) => {\n                        const isChecked = localPermissions[role]?.includes(feature) || false;\n                        return (\n                          <div\n                            key={feature}\n                            className=\"flex items-center space-x-3 p-3 rounded-lg border hover-elevate\"\n                            data-testid={`checkbox-container-${role}-${feature.toLowerCase().replace(/\\s+/g, '-')}`}\n                          >\n                            <Checkbox\n                              id={`${role}-${feature}`}\n                              checked={isChecked}\n                              onCheckedChange={() => handleFeatureToggle(role, feature)}\n                              data-testid={`checkbox-${role}-${feature.toLowerCase().replace(/\\s+/g, '-')}`}\n                            />\n                            <Label\n                              htmlFor={`${role}-${feature}`}\n                              className=\"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer\"\n                            >\n                              {feature}\n                            </Label>\n                          </div>\n                        );\n                      })}\n                    </div>\n                  </CardContent>\n                </CollapsibleContent>\n              </Collapsible>\n            </Card>\n          );\n        })}\n      </div>\n\n      <div className=\"flex justify-end gap-3\">\n        <Button\n          variant=\"outline\"\n          onClick={() => setLocalPermissions(permissions)}\n          data-testid=\"button-reset\"\n        >\n          Reset Changes\n        </Button>\n        <Button onClick={handleSaveChanges} data-testid=\"button-save-changes\">\n          <Save className=\"h-4 w-4 mr-2\" />\n          Save Changes\n        </Button>\n      </div>\n\n      <Card className=\"bg-muted/50\">\n        <CardHeader>\n          <CardTitle className=\"text-sm\">Note</CardTitle>\n        </CardHeader>\n        <CardContent className=\"text-sm text-muted-foreground\">\n          <ul className=\"list-disc list-inside space-y-1\">\n            <li>Changes will take effect immediately for new sessions</li>\n            <li>Users may need to log out and log back in to see updated permissions</li>\n            <li>Permissions are stored locally in the browser (mock backend)</li>\n            <li>Super Admin always has access to all features</li>\n          </ul>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":7736},"server/auth/jwt.ts":{"content":"import jwt from 'jsonwebtoken';\nimport type { User, Role } from '@shared/schema';\n\nconst isDevelopment = process.env.NODE_ENV === 'development';\n\nif (!process.env.SESSION_SECRET) {\n  throw new Error(\n    'FATAL: SESSION_SECRET environment variable is required for JWT token generation. ' +\n    'Please set SESSION_SECRET in your environment.'\n  );\n}\n\nconst JWT_SECRET = process.env.SESSION_SECRET;\n\nlet JWT_REFRESH_SECRET: string;\nif (!process.env.JWT_REFRESH_SECRET) {\n  if (isDevelopment) {\n    console.warn(\n      'âš ï¸  WARNING: JWT_REFRESH_SECRET not set. Using SESSION_SECRET for refresh tokens in development.\\n' +\n      '   For production, please set JWT_REFRESH_SECRET to a different secure value.'\n    );\n    JWT_REFRESH_SECRET = process.env.SESSION_SECRET;\n  } else {\n    throw new Error(\n      'FATAL: JWT_REFRESH_SECRET environment variable is required for production. ' +\n      'Please set JWT_REFRESH_SECRET in your deployment environment.'\n    );\n  }\n} else {\n  JWT_REFRESH_SECRET = process.env.JWT_REFRESH_SECRET;\n}\n\nconst ACCESS_TOKEN_EXPIRY = '15m';\nconst REFRESH_TOKEN_EXPIRY = '7d';\n\nexport interface TokenPayload {\n  userId: string;\n  email: string;\n  roleId: string;\n  roleName: string;\n}\n\nexport interface AuthTokens {\n  accessToken: string;\n  refreshToken: string;\n}\n\nexport function generateAccessToken(user: User, role: Role): string {\n  const payload: TokenPayload = {\n    userId: user.id,\n    email: user.email,\n    roleId: user.roleId,\n    roleName: role.name,\n  };\n\n  return jwt.sign(payload, JWT_SECRET, {\n    expiresIn: ACCESS_TOKEN_EXPIRY,\n  });\n}\n\nexport function generateRefreshToken(user: User, role: Role): string {\n  const payload: TokenPayload = {\n    userId: user.id,\n    email: user.email,\n    roleId: user.roleId,\n    roleName: role.name,\n  };\n\n  return jwt.sign(payload, JWT_REFRESH_SECRET, {\n    expiresIn: REFRESH_TOKEN_EXPIRY,\n  });\n}\n\nexport function generateTokens(user: User, role: Role): AuthTokens {\n  return {\n    accessToken: generateAccessToken(user, role),\n    refreshToken: generateRefreshToken(user, role),\n  };\n}\n\nexport function verifyAccessToken(token: string): TokenPayload | null {\n  try {\n    const payload = jwt.verify(token, JWT_SECRET) as TokenPayload;\n    return payload;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function verifyRefreshToken(token: string): TokenPayload | null {\n  try {\n    const payload = jwt.verify(token, JWT_REFRESH_SECRET) as TokenPayload;\n    return payload;\n  } catch (error) {\n    return null;\n  }\n}\n\nexport function decodeToken(token: string): TokenPayload | null {\n  try {\n    const payload = jwt.decode(token) as TokenPayload;\n    return payload;\n  } catch (error) {\n    return null;\n  }\n}\n","size_bytes":2698},"server/auth/middleware.ts":{"content":"import type { Request, Response, NextFunction } from 'express';\nimport { verifyAccessToken, type TokenPayload } from './jwt';\n\ndeclare global {\n  namespace Express {\n    interface Request {\n      user?: TokenPayload;\n    }\n  }\n}\n\nexport function authenticate(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n\n  if (!authHeader || !authHeader.startsWith('Bearer ')) {\n    return res.status(401).json({\n      error: 'Unauthorized',\n      message: 'Missing or invalid authorization header',\n    });\n  }\n\n  const token = authHeader.substring(7);\n  const payload = verifyAccessToken(token);\n\n  if (!payload) {\n    return res.status(401).json({\n      error: 'Unauthorized',\n      message: 'Invalid or expired token',\n    });\n  }\n\n  req.user = payload;\n  next();\n}\n\nexport function requireRole(...allowedRoles: string[]) {\n  return (req: Request, res: Response, next: NextFunction) => {\n    if (!req.user) {\n      return res.status(401).json({\n        error: 'Unauthorized',\n        message: 'Authentication required',\n      });\n    }\n\n    if (!allowedRoles.includes(req.user.roleName)) {\n      return res.status(403).json({\n        error: 'Forbidden',\n        message: 'Insufficient permissions',\n      });\n    }\n\n    next();\n  };\n}\n\nexport function optionalAuth(req: Request, res: Response, next: NextFunction) {\n  const authHeader = req.headers.authorization;\n\n  if (authHeader && authHeader.startsWith('Bearer ')) {\n    const token = authHeader.substring(7);\n    const payload = verifyAccessToken(token);\n\n    if (payload) {\n      req.user = payload;\n    }\n  }\n\n  next();\n}\n","size_bytes":1621},"client/src/context/PermissionsContext.tsx":{"content":"import { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { UserRole } from './AuthContext';\n\nexport interface RolePermissions {\n  admin: string[];\n  tutor: string[];\n  student: string[];\n}\n\ninterface PermissionsContextType {\n  permissions: RolePermissions;\n  updatePermissions: (role: keyof RolePermissions, features: string[]) => void;\n  updateAllPermissions: (newPermissions: RolePermissions) => void;\n  hasPermission: (role: UserRole, feature: string) => boolean;\n}\n\nconst defaultPermissions: RolePermissions = {\n  admin: ['Dashboard', 'Users', 'Playlists', 'Payments', 'Settings'],\n  tutor: ['Dashboard', 'My Playlists', 'Upload Videos', 'Comments & Q&A', 'Earnings', 'Profile'],\n  student: ['Dashboard', 'My Playlists', 'Explore', 'Subscriptions', 'Q&A', 'Profile'],\n};\n\nconst PermissionsContext = createContext<PermissionsContextType | undefined>(undefined);\n\nexport function PermissionsProvider({ children }: { children: ReactNode }) {\n  const [permissions, setPermissions] = useState<RolePermissions>(defaultPermissions);\n\n  useEffect(() => {\n    const storedPermissions = localStorage.getItem('lms_permissions');\n    if (storedPermissions) {\n      try {\n        setPermissions(JSON.parse(storedPermissions));\n      } catch (error) {\n        console.error('Failed to parse stored permissions:', error);\n      }\n    }\n  }, []);\n\n  const updatePermissions = (role: keyof RolePermissions, features: string[]) => {\n    const newPermissions = {\n      ...permissions,\n      [role]: features,\n    };\n    setPermissions(newPermissions);\n    localStorage.setItem('lms_permissions', JSON.stringify(newPermissions));\n  };\n\n  const updateAllPermissions = (newPermissions: RolePermissions) => {\n    setPermissions(newPermissions);\n    localStorage.setItem('lms_permissions', JSON.stringify(newPermissions));\n  };\n\n  const hasPermission = (role: UserRole, feature: string): boolean => {\n    if (role === 'superadmin') return true;\n    return permissions[role as keyof RolePermissions]?.includes(feature) ?? false;\n  };\n\n  const value: PermissionsContextType = {\n    permissions,\n    updatePermissions,\n    updateAllPermissions,\n    hasPermission,\n  };\n\n  return <PermissionsContext.Provider value={value}>{children}</PermissionsContext.Provider>;\n}\n\nexport function usePermissions() {\n  const context = useContext(PermissionsContext);\n  if (context === undefined) {\n    throw new Error('usePermissions must be used within a PermissionsProvider');\n  }\n  return context;\n}\n","size_bytes":2498},"server/seed.ts":{"content":"import { storage } from \"./storage\";\n\nasync function seed() {\n  try {\n    console.log(\"Starting database seed...\");\n\n    const roleNames = [\"superadmin\", \"admin\", \"tutor\", \"student\"] as const;\n    const roleDescriptions = {\n      superadmin: \"Super Administrator with full system access and permission management\",\n      admin: \"Administrator with platform management capabilities\",\n      tutor: \"Instructor who can create and manage educational content\",\n      student: \"Learner who can access courses and track progress\",\n    };\n\n    console.log(\"Creating roles...\");\n    const roles: Record<string, any> = {};\n    \n    for (const roleName of roleNames) {\n      const existingRole = await storage.getRoleByName(roleName);\n      if (existingRole) {\n        console.log(`Role ${roleName} already exists`);\n        roles[roleName] = existingRole;\n      } else {\n        const role = await storage.createRole({\n          name: roleName,\n          description: roleDescriptions[roleName],\n        });\n        roles[roleName] = role;\n        console.log(`Created role: ${roleName}`);\n      }\n    }\n\n    console.log(\"Creating test users...\");\n    const testUsers = [\n      {\n        name: \"Super Admin User\",\n        email: \"superadmin@lms.com\",\n        password: \"password123\",\n        roleId: roles.superadmin.id,\n        status: \"active\" as const,\n      },\n      {\n        name: \"Admin User\",\n        email: \"admin@lms.com\",\n        password: \"password123\",\n        roleId: roles.admin.id,\n        status: \"active\" as const,\n      },\n      {\n        name: \"Tutor User\",\n        email: \"tutor@lms.com\",\n        password: \"password123\",\n        roleId: roles.tutor.id,\n        status: \"active\" as const,\n      },\n      {\n        name: \"Student User\",\n        email: \"student@lms.com\",\n        password: \"password123\",\n        roleId: roles.student.id,\n        status: \"active\" as const,\n      },\n    ];\n\n    for (const userData of testUsers) {\n      const existingUser = await storage.getUserByEmail(userData.email);\n      if (existingUser) {\n        console.log(`User ${userData.email} already exists`);\n      } else {\n        await storage.createUser(userData);\n        console.log(`Created user: ${userData.email}`);\n      }\n    }\n\n    console.log(\"Database seed completed successfully!\");\n    process.exit(0);\n  } catch (error) {\n    console.error(\"Seed failed:\", error);\n    process.exit(1);\n  }\n}\n\nseed();\n","size_bytes":2408},"API_DOCUMENTATION.md":{"content":"# Authentication API Documentation\n\n## Overview\n\nThis document describes the authentication and user management API endpoints for the Learning Management System. The API uses JWT (JSON Web Tokens) for authentication with both access tokens (15 minutes expiry) and refresh tokens (7 days expiry).\n\n## Base URL\n\nAll endpoints are relative to: `http://localhost:5000/api`\n\n## Authentication\n\nMost endpoints require authentication via JWT token in the Authorization header:\n\n```\nAuthorization: Bearer <access_token>\n```\n\n## Test Users\n\nThe system is seeded with four test users:\n\n| Role | Email | Password |\n|------|-------|----------|\n| Super Admin | superadmin@lms.com | password123 |\n| Admin | admin@lms.com | password123 |\n| Tutor | tutor@lms.com | password123 |\n| Student | student@lms.com | password123 |\n\n## Endpoints\n\n### Authentication Endpoints\n\n#### POST /auth/signup\nRegister a new user account.\n\n**Request Body:**\n```json\n{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\",\n  \"roleName\": \"student\"\n}\n```\n\n**Response (201 Created):**\n```json\n{\n  \"message\": \"User created successfully\",\n  \"user\": {\n    \"id\": \"uuid\",\n    \"name\": \"John Doe\",\n    \"email\": \"john@example.com\",\n    \"role\": \"student\",\n    \"status\": \"active\"\n  },\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Validation:**\n- `name`: Required, min 2 characters\n- `email`: Required, valid email format\n- `password`: Required, min 6 characters\n- `roleName`: Optional, defaults to \"student\", must be one of: \"student\", \"tutor\", \"admin\", \"superadmin\"\n\n---\n\n#### POST /auth/login\nAuthenticate and receive JWT tokens.\n\n**Request Body:**\n```json\n{\n  \"email\": \"student@lms.com\",\n  \"password\": \"password123\"\n}\n```\n\n**Response (200 OK):**\n```json\n{\n  \"message\": \"Login successful\",\n  \"user\": {\n    \"id\": \"uuid\",\n    \"name\": \"Student User\",\n    \"email\": \"student@lms.com\",\n    \"role\": \"student\",\n    \"status\": \"active\"\n  },\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Error Responses:**\n- `400 Bad Request`: Invalid credentials or validation errors\n- `401 Unauthorized`: Invalid email or password\n\n---\n\n#### POST /auth/logout\nInvalidate the current refresh token (client should also discard tokens).\n\n**Headers:**\n```\nAuthorization: Bearer <access_token>\n```\n\n**Response (200 OK):**\n```json\n{\n  \"message\": \"Logout successful\"\n}\n```\n\n---\n\n#### POST /auth/refresh\nGet a new access token using a refresh token.\n\n**Request Body:**\n```json\n{\n  \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Response (200 OK):**\n```json\n{\n  \"accessToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\",\n  \"refreshToken\": \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\"\n}\n```\n\n**Error Responses:**\n- `401 Unauthorized`: Invalid or expired refresh token\n\n---\n\n### User Management Endpoints\n\n#### GET /users/profile\nGet the authenticated user's profile.\n\n**Headers:**\n```\nAuthorization: Bearer <access_token>\n```\n\n**Response (200 OK):**\n```json\n{\n  \"id\": \"uuid\",\n  \"name\": \"Student User\",\n  \"email\": \"student@lms.com\",\n  \"role\": \"student\",\n  \"status\": \"active\",\n  \"createdAt\": \"2025-11-02T08:58:17.277Z\"\n}\n```\n\n**Error Responses:**\n- `401 Unauthorized`: Missing or invalid token\n\n---\n\n#### GET /users\nList all users (Admin and Super Admin only).\n\n**Headers:**\n```\nAuthorization: Bearer <access_token>\n```\n\n**Response (200 OK):**\n```json\n[\n  {\n    \"id\": \"uuid\",\n    \"name\": \"Super Admin User\",\n    \"email\": \"superadmin@lms.com\",\n    \"role\": \"superadmin\",\n    \"status\": \"active\",\n    \"createdAt\": \"2025-11-02T08:58:16.364Z\"\n  },\n  {\n    \"id\": \"uuid\",\n    \"name\": \"Admin User\",\n    \"email\": \"admin@lms.com\",\n    \"role\": \"admin\",\n    \"status\": \"active\",\n    \"createdAt\": \"2025-11-02T08:58:16.673Z\"\n  }\n]\n```\n\n**Authorization:**\n- Requires role: `admin` or `superadmin`\n\n**Error Responses:**\n- `401 Unauthorized`: Missing or invalid token\n- `403 Forbidden`: Insufficient permissions (not admin/superadmin)\n\n---\n\n#### POST /users/:userId/role\nUpdate a user's role (Super Admin only).\n\n**Headers:**\n```\nAuthorization: Bearer <access_token>\n```\n\n**URL Parameters:**\n- `userId`: The UUID of the user to update\n\n**Request Body:**\n```json\n{\n  \"roleName\": \"admin\"\n}\n```\n\n**Response (200 OK):**\n```json\n{\n  \"message\": \"User role updated successfully\",\n  \"user\": {\n    \"id\": \"uuid\",\n    \"name\": \"Updated User\",\n    \"email\": \"user@example.com\",\n    \"role\": \"admin\",\n    \"status\": \"active\",\n    \"createdAt\": \"2025-11-02T08:58:17.277Z\"\n  }\n}\n```\n\n**Authorization:**\n- Requires role: `superadmin`\n\n**Validation:**\n- `roleName`: Required, must be one of: \"student\", \"tutor\", \"admin\", \"superadmin\"\n\n**Error Responses:**\n- `401 Unauthorized`: Missing or invalid token\n- `403 Forbidden`: Insufficient permissions (not superadmin)\n- `404 Not Found`: User not found\n\n---\n\n#### DELETE /users/:userId\nDelete a user account (Super Admin only).\n\n**Headers:**\n```\nAuthorization: Bearer <access_token>\n```\n\n**URL Parameters:**\n- `userId`: The UUID of the user to delete\n\n**Response (200 OK):**\n```json\n{\n  \"message\": \"User deleted successfully\"\n}\n```\n\n**Authorization:**\n- Requires role: `superadmin`\n\n**Error Responses:**\n- `401 Unauthorized`: Missing or invalid token\n- `403 Forbidden`: Insufficient permissions (not superadmin)\n- `404 Not Found`: User not found\n\n---\n\n## JWT Token Structure\n\n### Access Token Payload\n```json\n{\n  \"userId\": \"uuid\",\n  \"email\": \"user@example.com\",\n  \"roleId\": \"uuid\",\n  \"roleName\": \"student\",\n  \"iat\": 1762073975,\n  \"exp\": 1762074875\n}\n```\n\n**Expiry:** 15 minutes\n\n### Refresh Token Payload\n```json\n{\n  \"userId\": \"uuid\",\n  \"email\": \"user@example.com\",\n  \"roleId\": \"uuid\",\n  \"roleName\": \"student\",\n  \"iat\": 1762073975,\n  \"exp\": 1762678775\n}\n```\n\n**Expiry:** 7 days\n\n---\n\n## Error Response Format\n\nAll error responses follow this format:\n\n```json\n{\n  \"error\": \"Error message\",\n  \"details\": [\n    {\n      \"code\": \"validation_code\",\n      \"message\": \"Detailed error message\",\n      \"path\": [\"field_name\"]\n    }\n  ]\n}\n```\n\n---\n\n## Common HTTP Status Codes\n\n- `200 OK`: Request successful\n- `201 Created`: Resource created successfully\n- `400 Bad Request`: Invalid input or validation error\n- `401 Unauthorized`: Missing or invalid authentication\n- `403 Forbidden`: Insufficient permissions\n- `404 Not Found`: Resource not found\n- `500 Internal Server Error`: Server error\n\n---\n\n## Role-Based Access Control\n\n| Endpoint | Student | Tutor | Admin | Super Admin |\n|----------|---------|-------|-------|-------------|\n| POST /auth/signup | âœ… | âœ… | âœ… | âœ… |\n| POST /auth/login | âœ… | âœ… | âœ… | âœ… |\n| POST /auth/logout | âœ… | âœ… | âœ… | âœ… |\n| POST /auth/refresh | âœ… | âœ… | âœ… | âœ… |\n| GET /users/profile | âœ… | âœ… | âœ… | âœ… |\n| GET /users | âŒ | âŒ | âœ… | âœ… |\n| POST /users/:userId/role | âŒ | âŒ | âŒ | âœ… |\n| DELETE /users/:userId | âŒ | âŒ | âŒ | âœ… |\n\n---\n\n## Example Usage with curl\n\n### Login\n```bash\ncurl -X POST http://localhost:5000/api/auth/login \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\"email\": \"student@lms.com\", \"password\": \"password123\"}'\n```\n\n### Get Profile\n```bash\nTOKEN=\"your_access_token_here\"\ncurl -X GET http://localhost:5000/api/users/profile \\\n  -H \"Authorization: Bearer $TOKEN\"\n```\n\n### List Users (Admin only)\n```bash\nTOKEN=\"your_access_token_here\"\ncurl -X GET http://localhost:5000/api/users \\\n  -H \"Authorization: Bearer $TOKEN\"\n```\n\n### Refresh Token\n```bash\nREFRESH_TOKEN=\"your_refresh_token_here\"\ncurl -X POST http://localhost:5000/api/auth/refresh \\\n  -H \"Content-Type: application/json\" \\\n  -d \"{\\\"refreshToken\\\": \\\"$REFRESH_TOKEN\\\"}\"\n```\n\n---\n\n## Frontend Integration Notes\n\n1. **Store tokens securely**: Store access and refresh tokens in memory or secure storage (not localStorage for production)\n2. **Handle token expiry**: Implement automatic token refresh when access token expires\n3. **Include token in requests**: Add Authorization header to all authenticated requests\n4. **Handle 401 responses**: Redirect to login when receiving 401 Unauthorized\n5. **Logout cleanup**: Clear tokens from storage on logout\n\n---\n\n## Security Considerations\n\n1. **HTTPS in Production**: Always use HTTPS in production to protect tokens in transit\n2. **Token Storage**: Avoid storing tokens in localStorage in production (use httpOnly cookies or secure storage)\n3. **Password Requirements**: Enforce strong password policies (currently min 6 characters)\n4. **Rate Limiting**: Consider implementing rate limiting on authentication endpoints\n5. **Account Lockout**: Consider implementing account lockout after failed login attempts\n6. **Token Rotation**: Refresh tokens are rotated on each refresh request\n7. **Logout**: Tokens should be discarded client-side on logout\n","size_bytes":8771},"client/src/lib/axios.ts":{"content":"import axios from 'axios';\n\nlet accessToken: string | null = null;\nlet refreshToken: string | null = null;\nlet isRefreshing = false;\nlet failedQueue: any[] = [];\n\nconst processQueue = (error: any, token: string | null = null) => {\n  failedQueue.forEach((prom) => {\n    if (error) {\n      prom.reject(error);\n    } else {\n      prom.resolve(token);\n    }\n  });\n\n  failedQueue = [];\n};\n\nexport const setTokens = (access: string | null, refresh: string | null) => {\n  accessToken = access;\n  refreshToken = refresh;\n};\n\nexport const getAccessToken = () => accessToken;\n\nconst apiClient = axios.create({\n  baseURL: '/api',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\napiClient.interceptors.request.use(\n  (config) => {\n    if (accessToken && config.headers) {\n      config.headers.Authorization = `Bearer ${accessToken}`;\n    }\n    return config;\n  },\n  (error) => {\n    return Promise.reject(error);\n  }\n);\n\napiClient.interceptors.response.use(\n  (response) => {\n    return response;\n  },\n  async (error) => {\n    const originalRequest = error.config;\n\n    if (error.response?.status === 401 && !originalRequest._retry) {\n      if (isRefreshing) {\n        return new Promise((resolve, reject) => {\n          failedQueue.push({ resolve, reject });\n        })\n          .then((token) => {\n            originalRequest.headers.Authorization = `Bearer ${token}`;\n            return apiClient(originalRequest);\n          })\n          .catch((err) => {\n            return Promise.reject(err);\n          });\n      }\n\n      originalRequest._retry = true;\n      isRefreshing = true;\n\n      if (!refreshToken) {\n        isRefreshing = false;\n        localStorage.removeItem('lms_access_token');\n        localStorage.removeItem('lms_refresh_token');\n        window.location.href = '/';\n        return Promise.reject(error);\n      }\n\n      try {\n        const response = await axios.post('/api/auth/refresh', {\n          refreshToken,\n        });\n\n        const { accessToken: newAccessToken, refreshToken: newRefreshToken } =\n          response.data;\n\n        accessToken = newAccessToken;\n        refreshToken = newRefreshToken;\n\n        localStorage.setItem('lms_access_token', newAccessToken);\n        localStorage.setItem('lms_refresh_token', newRefreshToken);\n\n        apiClient.defaults.headers.common.Authorization = `Bearer ${newAccessToken}`;\n        originalRequest.headers.Authorization = `Bearer ${newAccessToken}`;\n\n        processQueue(null, newAccessToken);\n\n        return apiClient(originalRequest);\n      } catch (refreshError) {\n        processQueue(refreshError, null);\n        accessToken = null;\n        refreshToken = null;\n        localStorage.removeItem('lms_access_token');\n        localStorage.removeItem('lms_refresh_token');\n        window.location.href = '/';\n        return Promise.reject(refreshError);\n      } finally {\n        isRefreshing = false;\n      }\n    }\n\n    return Promise.reject(error);\n  }\n);\n\nexport default apiClient;\n","size_bytes":2970}},"version":2}